{"version":3,"sources":["_helpers/axiosBaseURL.js","_constants/user.constants.js","_helpers/history.js","_services/SharedFunctions.js","_services/SharedModals.js","SharedComponents/AuthContext/AuthContext.js","_constants/actionTypes.constants.js","_actions/categoryActions.js","_assets/Images/new_logo.jpg","SharedComponents/Navbar/Navbar.js","Pages/Login/layouts.js","Pages/Login/Login.js","_assets/Images/No_Image.jpg","Pages/Homepage/Category.js","_actions/productActions.js","Pages/Homepage/CategoryList.js","_assets/Images/HomepageImages/Image_1.png","_assets/Images/HomepageImages/Image_2.png","_assets/Images/HomepageImages/Image_3.png","Pages/Homepage/HomepageCarousel.js","_constants/orderStatus.constants.js","Pages/HomepageAdmin/Functions.js","_actions/incompleteOrderActions.js","_actions/completeOrderActions.js","SharedComponents/Modals/Modals.js","Pages/HomepageAdmin/Modals.js","Pages/HomepageAdmin/HomepageAdminOrder.js","Pages/HomepageAdmin/HomepageAdminOrderList.js","Pages/HomepageAdmin/ProductAdmin.js","Pages/HomepageAdmin/ProductListAdmin.js","Pages/HomepageAdmin/HomepageAdmin.js","Pages/EditCustomer/FormLayout.js","Pages/EditCustomer/Modals.js","Pages/EditCustomer/EditCustomer.js","_helpers/utils.js","Pages/Products/Product.js","Pages/Products/ProductsList.js","SharedComponents/Categories/CategoriesFunctions.js","Pages/Products/Products.js","Pages/Products/ProductImagesCarousel.js","_constants/cart.constants.js","_actions/cartActions.js","Pages/Products/ProductMainTitle.js","Pages/Products/ProductDescription.js","Pages/Products/ProductDetails.js","_actions/companyInfoActions.js","Pages/DeliveryDispatch/DeliveryDispatch.js","Pages/ContactUs/ContactUs.js","Pages/TermsConditions/TermsConditions.js","Pages/Blog/Blog.js","Pages/EmailRequest/EmailRequest.js","Pages/ReenterPassword/ReenterPassword.js","Pages/Cart/CartItem.js","Pages/Cart/CartProducts.js","_assets/Images/visa.png","_assets/Images/mastercard.jpg","Pages/Cart/index.js","_assets/Images/Alipay.png","Pages/Checkout/CheckoutShipping.js","Pages/Checkout/CheckoutSecurePayment.js","Pages/Checkout/CheckoutReviewOrder.js","Pages/Checkout/CheckoutOrderComplete.js","Pages/Checkout/PaymentCancelled.js","Pages/ManageOrdersCustomer/OrderView.js","Pages/ManageOrdersCustomer/ManageOrdersCustomer.js","Pages/ManageOrdersCustomer/Functions.js","Pages/Order/Helpers/Functions.js","Pages/Order/Helpers/PageConstants.js","Pages/Order/Forms/NewItemForm/NewItemForm.js","Pages/Order/Helpers/Modals.js","Pages/Order/Forms/POForm/POForm2.js","Pages/Order/Forms/POForm/POForm1.js","Pages/Order/Forms/POForm/POForm1View.js","Pages/Order/Order.js","Pages/CurrentOrders/OrderRow.js","Pages/CurrentOrders/CurrentOrders.js","Pages/CurrentOrders/Functions.js","Pages/ProcessedOrders/Functions.js","Pages/ProcessedOrders/Modals.js","Pages/ProcessedOrders/ProcessedOrders.js","Pages/EditCompanyInfo/FormLayout.js","Pages/EditCompanyInfo/Modals.js","Pages/EditCompanyInfo/Functions.js","Pages/EditCompanyInfo/EditCompanyInfo.js","Pages/ManageProducts/ProductTableRows.js","Pages/ManageProducts/ManageProducts.js","Pages/ManageProducts/Functions.js","Pages/AddEditProduct/PageStates.js","Pages/AddEditProduct/Modals.js","Pages/AddEditProduct/Functions.js","Pages/AddEditProduct/AddEditProduct.js","Pages/ManageCategories/Helpers/Modals.js","Pages/ManageCategories/Helpers/Functions.js","Pages/ManageCategories/ManageCategories.js","Pages/Signup/Layouts.js","_routers/config.js","Pages/Signup/Signup.js","Pages/Signup/Modals.js","Pages/Homepage/Homepage.js","_routers/PrivateRoute.js","SharedComponents/Footer/FooterMenu.js","SharedComponents/Footer/FooterMenuMobile.js","SharedComponents/Footer/FooterMain.js","App/App.js","Misc/reportWebVitals.js","_reducers/productReducer.js","_reducers/productDetailsReducer.js","_reducers/categoryReducer.js","_reducers/companyInfoReducer.js","_reducers/completeOrdersReducer.js","_reducers/incompleteOrdersReducer.js","_reducers/cartReducer.js","_reducers/index.js","_helpers/store.js","index.js"],"names":["domain","module","exports","userConstants","history","createBrowserHistory","getCategoryName","id","categories","category","find","_id","undefined","c_name","onlyNumbers","e","form","field","index","subfield","reg","str","target","value","field_obj","arr","getFieldValue","sub_obj","test","makeNumber","setFieldsValue","i","length","isNaN","substring","filterEmail","orders","c_email","setOrdersList","filteredOrders","filter","order","Modal","warning","title","content","onOk","removeSpaceLogic","isWhiteSpace","s","validateEmail","email","String","toLowerCase","checkPasswordStrength","password","_logout","updateAuth","localStorage","setItem","JSON","stringify","roles","push","AuthContext","createContext","AuthUpdateContext","useAuth","useContext","useAuthUpdate","initialAuth","user","parse","getItem","obj","hasOwnProperty","Array","isArray","Object","keys","AuthProvider","children","useState","authType","setAuthType","Provider","USER","GET_PRODUCTS","GET_PRODUCT","DEFAULT_ORDER","LOADING_PRODUCTS","DELETE_PRODUCT","EDIT_PRODUCT","ADD_PRODUCT","ERROR","SET_LOADING","GET_CATEGORIES","GET_SUB_CATEGORIES","ERROR_CATEGORIES","LOADING_CATEGORIES","EMPTY_CATEGORIES","GET_COMPANY_INFO","SET_COMPANY_INFO","LOADING_COMPANY_INFO","GET_COMPLETE_ORDERS","LOADING_COMPLETE_ORDERS","DELETE_COMPLETE_ORDER","ERROR_COMPLETE_ORDERS","ADD_COMPLETE_ORDER","EDIT_COMPLETE_ORDER","EMPTY_COMPLETE_ORDER","GET_INCOMPLETE_ORDERS","LOADING_INCOMPLETE_ORDERS","DELETE_INCOMPLETE_ORDERS","ERROR_INCOMPLETE_ORDERS","ADD_TRACKING","ADD_INCOMPLETE_ORDER","EDIT_INCOMPLETE_ORDER","EMPTY_INCOMPLETE_ORDER","getAllCategories","dispatch","setCategoriesLoading","axios","get","then","res","data","type","payload","catch","err","console","log","SubMenu","Menu","Navbar","useDispatch","auth","userDetails","setUserDetails","parentCategoires","setParentCategories","childCategories","setChildCategories","useSelector","state","categoryState","emptyCategories","empty","itemCount","cartState","items","isLoading","loading","useEffect","parents","c","path","config","headers","authorization","access_token","defaults","baseURL","response","status","logout","customerMenu","Item","to","accountSpecificMenu","accountMenu","onClick","accountMenuMobile","className","icon","UserOutlined","first_name","categoriesMenu","map","p","sub_categories","ourProductsDropdown","ourProductsSubmenuMobile","disabled","login","loginMobile","overlay","orderDropdown","productsDropdown","mainMenu","count","showZero","style","backgroundColor","ShoppingCartOutlined","mainMenuMobile","MenuOutlined","logoLink","mode","selectable","src","image","alt","layout","labelCol","span","wrapperCol","actionButtonsLayout","Login","setLoading","useForm","name","label","rules","required","message","whitespace","validateTrigger","maxLength","validator","_","Promise","resolve","post","reject","Error","Password","cursor","color","marginRight","htmlType","Meta","Card","Category","props","img","tabIndex","cover","altImage","getAllProducts","setIsLoading","products","setLoadingProductDetails","setDefaultOrder","val","CategoryList","error","productsList","productState","currentCategories","setCurrentCategories","isChild","setIsChild","underConstructionMessage","info","marginTop","height","getCategoryImage","c_id","cat","child","noImage","product","p_categories","p_image_uri","textAlign","size","grid","gutter","xs","sm","md","lg","xl","xxl","pagination","position","defaultPageSize","dataSource","renderItem","item","childrenOfParent","changeCategoryType","toString","HomepageCarousel","autoplay","image_1","image_2","image_3","orderStatusConstants","navigateAddOrder","window","scrollTo","getIncompleteOrders","token","setIncompleteOrdersLoading","addTracking","trackingDetails","success","getCompleteOrders","setCompleteOrdersLoading","deleteConfirm","p_code","confirm","okText","okType","deleteProduct","deleteOrderSuccess","po_number","deleteOrderFail","deleteOrderConfirm","deleteCompleteOrder","deleteIncompleteOrder","sumbitTrackingFailed","confirmSubmitTracking","tracking","tracking_number","carrier","HomepageAdminOrder","date","Date","issued_date","dateString","getDate","getMonth","getFullYear","trackingNumberDiv","onFinish","validateFields","values","onFinishFailed","placeholder","actions","DeleteOutlined","EditOutlined","description","HomepageAdminOrderList","loadingOrders","errorLoadingOrders","renderableOrders","o","orderProps","Product","categoryName","p_name","p_price","ProductList","renderableProducts","errorLoading","productProps","ProductAdmin","HomepageAdmin","radioState","setRadioState","completeOrders","completeOrdersState","errorLoadingCompleteOrders","loadingCompleteOrders","emptyCompleteOrders","incompleteOrders","incompleteOrdersState","errorLoadingIncompleteOrders","loadingIncompleteOrders","emptyIncomplateOrders","productListProps","ordersListProps","radioToggle","ProductListAdmin","checked","onChange","complete","location","navigateFullList","tailLayout","editFailModal","reload","EditCustomer","setError","userInfo","setUserInfo","form2","last_name","mobile","v","submit","editConfirmModal","phone","a","float","changePasswordConfirmModal","new_password","verify_password","setFields","errors","formatNumber","amount","Math","round","Number","EPSILON","Intl","NumberFormat","currency","currencyDisplay","format","productDetails","descriptionWithPrice","p_description","trim","placeholderImg","p_price_id","ProductsList","showSizeChanger","addSubCategories","categoriesList","forEach","parent","key","includes","splice","indexOf","getCategoriesHierarchy","insideAllCategories","copyOfCategories","x","rootParents","Option","Select","Products","useParams","loadingCategory","errorCategory","loadingProduct","errorProduct","filteredAndSorted","setFilterAndSorted","setFilter","sorted","setSorted","sortProduct","productToCompare","sortValue","filterAndSortProduct","filterSortChildren","filteredSortedProducts","sort","b","prods","class","treeData","defaultValue","treeDefaultExpandAll","onSelect","SortAscendingOutlined","SortDescendingOutlined","RiseOutlined","FallOutlined","ProductImagesCarousel","dotPosition","returnVal","uri","contentCarousel","ADD_TO_CART","CLEAR_CART","REMOVE_ITEMS","INCREASE_QUANTITY","DECREASE_QUANTITY","SET_SHIPPING_INFO","SET_ERROR","LOAD_STRIPE","UPDATE_ITEM_INFO","clearCart","updateItemInfo","quantityOptions","connect","total","addToCart","quantity","specialRequirements","productSize","special_requirements","p_size","TextArea","Input","setQuantity","setSpecialRequirements","setProductSize","selectionGenerator","options","onChangeCallback","setDefault","element","item_code","p_unit","htmlFor","rows","showCount","ShoppingOutlined","ProductDescription","ProductDetails","productDetailsState","queryString","search","URLSearchParams","getProductCode","productCode","align","getCompanyInfo","DeliveryDispatch","companyInfo","companyInfoState","constructor","c_delivery","Title","Typography","ContactUs","level","PhoneFilled","c_number","MailFilled","EnvironmentFilled","c_address","TermsConditions","c_TandC","Blog","c_blog","offset","EmailRequest","fontSize","showEmailSent","somethingWentWrong","ReenterPassword","toolTipVisible","setToolTipVisible","visible","onFocus","confirmPassword","body","increase","increaseQuantity","decrease","decreaseQuantity","editable","quantityState","setQuantityState","width","objectFit","unit_price","PlusOutlined","MinusOutlined","autoSize","minRows","maxRows","line_items","removeItems","invalid_pcodes","li","validPCodes","setValidPCodes","invalidProducts","setInvalidProducts","productInfo","setProductInfo","setLoadingState","invalidRemoved","setInvalidRemoved","valid","invalid","p_codes","valid_pcodes","invalid1","invalid2","filterInavlidProducts","invalidProds","itemList","colSpan","ExclamationCircleOutlined","prod","cartItems","subTotal","GST","freightCharge","grandTotal","visa","mastercard","Step","Steps","address","setShipping","Form","current","direction","addressPayload","po_attention_to","fullname","po_address_line1","address_line1","po_address_line2","address_line2","po_suburb","suburb","po_state","po_postcode","postcode","emailPayload","errorInfo","requiredMark","initialValues","CaretLeftOutlined","min","max","fetchCheckoutSession","fetch","method","json","stripe","loadStripeAction","publicKey","loadStripe","fetchConfig","paymentOnClick","event","sessionId","redirectToCheckout","clear","CheckCircleFilled","CloseCircleFilled","PaymentCancelled","removeItem","justify","OrderView","itemRow","setCurrentOrder","setPage","po_postal_code","po_country","OptGroup","ManageOrdersCustomer","setOrders","ordersOriginal","setOrdersOriginal","currentOrder","noOrders","setNoOrders","page","maxNumberOfPages","ceil","row","sortedOrders","slice","filterOrders","sortOrders","defaultCurrent","setUndefinedValues","newOrder","lenth","MODE","EDIT","VIEW","ADD","NewItemForm","fontWeight","AddItemModal","new_item","new_items","unshift","new_order","setOrder","setNewItemFormVisible","resetFields","onCancel","_addIncompleteOrder","cancelText","addIncompleteOrder","addSuccess","addFail","editSuccess","editFail","POForm2","deleteOrderItem","hidden","showDeleteConfirm","onBlur","temp_order","border","POForm1","orderOriginal","date_S","updateOrderText","section_1_a","paddingBottom","section_1_b","POForm1View","Order","compeletOrders","setOrderOriginal","setMode","newItemFormVisible","form_1","form_2","handleSubmit","confirmSubmit","showNoItemsPresent","editedOrder","createAddress","createOrderAdd","createOrderEdit","prev","curr","completeLength","incompleteLength","_editOrder","addItemModal_props","form_1_props","form_2_props","toggleButton","margin","submitUndoButtons","paddingTop","showUndo","display","OrderRow","promise_1","promise_2","all","CheckCircleOutlined","CurrentOrders","ordersList","orderList","handleOrder","Search","allowClear","enterButton","onSearch","document","getElementById","ProcessedOrders","postCompanyInfo","newInfo","EditCompanyInfo","setCompanyInfo","dataLoading","setDataLoading","c_about","setFormValues","confirmEdit","ProductTableRows","paddingLeft","ManageProducts","processedProductsList","handleFilter","productTableRowsProps","selectCategories","tableLayout","imageModal","file","fileList","updateFileList","setProduct","onRemove","addFailPcode","newProduct","formData","editProduct","_editProduct","confirmAdd","addProduct","_addProduct","onPreview","url","reader","FileReader","readAsDataURL","originFileObj","onload","result","beforeUpload","isJpgOrPng","isLt2M","pop","newFileList","uid","startsWith","new_p_image_uri","AddEditProduct","pageState","setPageState","originalImageListLength","setOriginalImageListLength","newPage","setNewPage","sizeOptions","setSizeOptions","_getProduct","checkBlob","getProduct","p_units_sold","addUriToFileList","sizeOptionsList","danger","temp","deleteSizeOption","encType","number_of_new_images","FormData","append","URL","createObjectURL","createFormDataEdit","product_b","numberOfNewImages","originalFileLength","product_a","createFormData","removeSpaces","getValueFromEvent","listType","addSizeOption","onPriceChange","confirmAddingCategory","newCategory","categoryParentPath","c_description","categoryDescription","successModal","errorModal","addCategory","confirmDeleteCategory","categoryToDelete","delete","encodeURI","deleteCategory","routes","component","exact","tooltipVisible","setTooltipVisible","Cart","CheckoutShipping","CheckoutSecurePayment","CheckoutReviewOrder","CheckoutOrderComplete","form_add_category","form_delete_category","createPathForCategory","node","extra","resize","PrivateRoute","Component","rest","hasRole","some","role","render","FooterMenu","FooterMenuMobile","FooterMain","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initState","productReducer","findIndex","productDetailsReducer","categoryReducer","companyInfoReducer","completeOrdersReducer","newArray","incompleteOrdersReducer","tempArr","tempObj","address_init","initialState","cartReducer","action","addedItem","newTotal","newItems","price_id","allReducers","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM"],"mappings":"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","file":"static/js/main.b4d52d76.chunk.js","sourcesContent":["var domain = 'http://localhost:5000'\r\nif(process.env.NODE_ENV ==  'production')\r\n    domain = 'http://54.252.17.165'\r\n\r\nmodule.exports = domain\r\n","export const userConstants = {\r\n    ROLE_GUEST: \"ROLE_GUEST\",\r\n    ROLE_ADMIN: \"ROLE_ADMIN\",\r\n    ROLE_CUSTOMER: \"ROLE_CUSTOMER\"\r\n};\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();","import { emailNotFound } from './SharedModals';\r\nimport { userConstants } from '../_constants/user.constants'; \r\nimport { history } from '../_helpers/history';\r\n\r\nexport const getCategoryName = (id, categories) => {\r\n    const category = categories.find(category => {\r\n        return category._id === id;\r\n    });\r\n    \r\n    if(category === undefined) return \"Category Not Found\"\r\n    else return category.c_name;    \r\n}\r\n\r\n//Event handler that only allows numbers as input\r\nexport const onlyNumbers = (e, form, field, index, subfield) => {\r\n    const reg = /^[0-9]*$/;\r\n    const str = e.target.value;\r\n    let field_obj = {};\r\n\r\n    if(typeof index !== 'undefined'){\r\n        let arr = form.getFieldValue(field);\r\n        let sub_obj = arr[index];\r\n        \r\n        if (str === '' || reg.test(str)) sub_obj[subfield] = str;  \r\n        else sub_obj[subfield] = makeNumber(str);\r\n        field_obj[field] = arr;    \r\n    }\r\n\r\n    else{\r\n        if (str === '' || reg.test(str)) field_obj[field] = str;     \r\n        else field_obj[field] = makeNumber(str); \r\n    }\r\n    form.setFieldsValue(field_obj);\r\n}\r\n\r\n//Removes characters that are not numbers from a string\r\nexport const makeNumber = str => {\r\n    for(let i = 0; i < str.length; i++){\r\n        if(isNaN(str[i]) || str[i]===\" \"){\r\n            str = str.substring(0, i) + str.substring(i+1, str.length);\r\n            i--;\r\n        }\r\n    }\r\n    return str;\r\n}\r\n\r\n//filters orders by email for current and previous orders pages\r\nexport const filterEmail = (orders, c_email, setOrdersList) => {\r\n    const filteredOrders =  orders.filter(order => {\r\n        return order.c_email === c_email;\r\n    });\r\n\r\n    if(filteredOrders.length !== 0) setOrdersList(filteredOrders);\r\n    else emailNotFound();\r\n}\r\n\r\nexport const removeSpaces = (e, form, field) => {\r\n    const reg = /^[a-z0-9A-Z]+$/;\r\n    const str = e.target.value\r\n    let field_obj = {};\r\n\r\n    if (str === '' || reg.test(str))field_obj[field] = str;\r\n    else field_obj[field] = removeSpaceLogic(str);\r\n\r\n    form.setFieldsValue(field_obj);\r\n}\r\n\r\nexport const removeSpaceLogic = str => { \r\n    for(let i = 0; i < str.length; i++){\r\n        if(str[i]===\" \" || !/^[a-z0-9A-Z]+$/.test(str[i])){\r\n            str = str.substring(0, i) + str.substring(i+1, str.length);\r\n            i--;\r\n        }\r\n    }\r\n    return str;\r\n}\r\n\r\nexport const isWhiteSpace = s => {\r\n    for(let i = 0; i < s.length; i++) if(s[i] !== ' ') return false;\r\n    return true;\r\n}\r\n\r\nexport const validateEmail = email => {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n}\r\n\r\nexport const checkPasswordStrength = password => {\r\n    const re = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/\r\n    return re.test(password);\r\n}\r\n\r\nexport const _logout = updateAuth => {\r\n    localStorage.setItem('SUPERFIN_USER', JSON.stringify({roles: [userConstants.ROLE_GUEST]}));\r\n    updateAuth({roles: [userConstants.ROLE_GUEST]});\r\n    history.push('/login');\r\n}\r\n\r\n//check the SUPERFIN_USER obj in local storage meets the correct criteria\r\nexport const _checkLocalStorageObj = obj => {\r\n    const objStr = JSON.stringify({roles: [userConstants.ROLE_GUEST]});\r\n\r\n    if(objStr === JSON.stringify(obj)) return true; \r\n    else if(obj.hasOwnProperty('access_token') && obj.hasOwnProperty('expires_in') && obj.hasOwnProperty('roles') //&& obj.hasOwnProperty('email') \r\n            && obj.hasOwnProperty('token_type') && Array.isArray(obj.roles) && Object.keys(obj).length === 4) return true;\r\n    else return false;\r\n}\r\n\r\n","import { Modal } from 'antd';\r\n\r\nexport const emailNotFound = () => {\r\n    Modal.warning({\r\n        title: 'Email not found',\r\n        content: (\r\n            <div>\r\n                <p>Please check the spelling is correct</p>\r\n            </div>\r\n        ),\r\n        onOk() {},\r\n    });\r\n  }","import { useState, useContext, createContext } from \"react\"\r\nimport { userConstants } from '../../_constants/user.constants';\r\nimport { history } from '../../_helpers/history';\r\nimport { _checkLocalStorageObj } from '../../_services/SharedFunctions';\r\n\r\nconst AuthContext = createContext();\r\nconst AuthUpdateContext = createContext();\r\n\r\nexport function useAuth(){\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport function useAuthUpdate(){\r\n    return useContext(AuthUpdateContext);\r\n}\r\n\r\nconst initialAuth = () => {\r\n    try{\r\n        const user = JSON.parse(localStorage.getItem('SUPERFIN_USER'));             //protect against local storage tampering\r\n        if(user === null){\r\n            localStorage.setItem('SUPERFIN_USER', JSON.stringify({roles: [userConstants.ROLE_GUEST]}));\r\n            return {roles: [userConstants.ROLE_GUEST]};\r\n        }\r\n        else if(!_checkLocalStorageObj(user)){\r\n            localStorage.setItem('SUPERFIN_USER', JSON.stringify({roles: [userConstants.ROLE_GUEST]}));\r\n            history.push('/login');\r\n            return {roles: [userConstants.ROLE_GUEST]};\r\n        }\r\n        else return user;\r\n    }\r\n    catch{\r\n        localStorage.setItem('SUPERFIN_USER', JSON.stringify({roles: [userConstants.ROLE_GUEST]}));\r\n        history.push('/login');\r\n        return {roles: [userConstants.ROLE_GUEST]};\r\n    }\r\n}\r\n\r\n\r\nconst AuthProvider = ({children}) => {\r\n    const [authType, setAuthType] = useState(initialAuth());\r\n\r\n    const updateAuth = USER => {\r\n        setAuthType(USER);\r\n    }\r\n\r\n    return(\r\n        <AuthContext.Provider value={authType}>\r\n            <AuthUpdateContext.Provider value={updateAuth}>\r\n                {children}\r\n            </AuthUpdateContext.Provider>\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AuthProvider;","//Product Action Types\r\nexport const GET_PRODUCTS = \"GET_PRODUCTS\";\r\nexport const GET_PRODUCT = \"GET_PRODUCT\";\r\nexport const DEFAULT_ORDER = \"DEFAULT_ORDER\";\r\nexport const LOADING_PRODUCTS = \"LOADING_PRODUCTS\";\r\nexport const DELETE_PRODUCT = \"DELETE_PRODUCT\";\r\nexport const EDIT_PRODUCT = \"EDIT_PRODUCT\"\r\nexport const ADD_PRODUCT = \"ADD_PRODUCT\";\r\nexport const ERROR = \"ERROR\";\r\nexport const SET_LOADING = \"SET_LOADING\";\r\n\r\n//Category Action Types\r\nexport const GET_CATEGORIES = \"GET_CATEGORIES\";\r\nexport const GET_SUB_CATEGORIES = \"GET_SUB_CATEGORIES\";\r\nexport const ERROR_CATEGORIES = \"ERROR_CATEGORIES\";\r\nexport const LOADING_CATEGORIES = \"LOADING_CATEGORIES\";\r\nexport const EMPTY_CATEGORIES = \"EMPTY_CATEGORIES\";\r\n\r\n//Company Info Action Types\r\nexport const GET_COMPANY_INFO = \"GET_COMPANY_INFO\";\r\nexport const SET_COMPANY_INFO = \"SET_COMPANY_INFO\";\r\nexport const LOADING_COMPANY_INFO = \"LOADING_COMPANY_INFO\";\r\n\r\n//Complete Orders Action Types \r\nexport const GET_COMPLETE_ORDERS = \"GET_COMPLETE_ORDERS\";\r\nexport const LOADING_COMPLETE_ORDERS = \"LOADING_COMPLETE_ORDERS\";\r\nexport const DELETE_COMPLETE_ORDER = \"DELETE_COMPLETE_ORDER\";\r\nexport const ERROR_COMPLETE_ORDERS = \"ERROR_COMPLETE_ORDERS\";\r\nexport const ADD_COMPLETE_ORDER = \"ADD_COMPLETE_ORDER\";\r\nexport const EDIT_COMPLETE_ORDER = \"EDIT_COMPLETE_ORDER\";\r\nexport const EMPTY_COMPLETE_ORDER = \"EMPTY_COMPLETE_ORDER\";\r\n\r\n//Incomplete Order Action Types\r\nexport const GET_INCOMPLETE_ORDERS = \"GET_INCOMPLETE_ORDERS\";\r\nexport const LOADING_INCOMPLETE_ORDERS = \"LOADING_INCOMPLETE_ORDERS\";\r\nexport const DELETE_INCOMPLETE_ORDERS = \"DELETE_INCOMPLETE_ORDERS\";\r\nexport const ERROR_INCOMPLETE_ORDERS = \"ERROR_INCOMPLETE_ORDERS\";\r\nexport const EDIT_INCOMPLETE_ORDERS = \"EDIT_INCOMPLETE_ORDERS\";\r\nexport const ADD_TRACKING = \"ADD_TRACKING\";\r\nexport const ADD_INCOMPLETE_ORDER = \"ADD_INCOMPLETE_ORDER\";\r\nexport const EDIT_INCOMPLETE_ORDER = \"EDIT_INCOMPLETE_ORDER\";\r\nexport const EMPTY_INCOMPLETE_ORDER = \"EMPTY_INCOMPLETE_ORDER\";\r\n\r\n","import axios from 'axios';\r\nimport { \r\n    GET_CATEGORIES, \r\n    GET_SUB_CATEGORIES, \r\n    LOADING_CATEGORIES, \r\n    ERROR_CATEGORIES, \r\n    EMPTY_CATEGORIES \r\n} from '../_constants/actionTypes.constants';\r\n\r\nexport const getAllCategories = () => dispatch => {\r\n    dispatch(setCategoriesLoading());\r\n    \r\n    axios.get('/api/categories/all-categories')\r\n    .then(res => {\r\n        if(res.data.length === 0){\r\n            dispatch({\r\n                type: EMPTY_CATEGORIES\r\n            });\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: GET_CATEGORIES,\r\n                payload: res.data\r\n            });\r\n        }\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        dispatch({\r\n            type: ERROR_CATEGORIES\r\n        });\r\n    })\r\n}\r\n\r\nexport const getAllChildren = (category_name) => dispatch => {\r\n    dispatch(setCategoriesLoading());\r\n    if (category_name.length !== 0 && category_name !== \"\") {\r\n        axios.get('/api/categories/all-children?c_name=' + encodeURI(category_name))\r\n        .then(res => {\r\n            if(res.data.length === 0){\r\n                dispatch({\r\n                    type: EMPTY_CATEGORIES\r\n                });\r\n            }\r\n            else{\r\n                dispatch({\r\n                    type: GET_SUB_CATEGORIES,\r\n                    payload: res.data\r\n                });\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            dispatch({\r\n                type: ERROR_CATEGORIES\r\n            });\r\n        })\r\n    } else {\r\n        console.error(\"Category name must not be empty!\")\r\n    }\r\n    \r\n}\r\n\r\nexport const setCategoriesLoading = () => {\r\n    return {\r\n        type:LOADING_CATEGORIES,\r\n    }\r\n}\r\n\r\n","export default __webpack_public_path__ + \"static/media/new_logo.462ce060.jpg\";","import { Menu, Dropdown, Badge } from 'antd';\r\nimport { UserOutlined, ShoppingCartOutlined, MenuOutlined } from '@ant-design/icons';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch  } from 'react-redux';\r\nimport { useAuthUpdate, useAuth } from '../AuthContext/AuthContext';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\nimport { userConstants } from '../../_constants/user.constants';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport image from '../../_assets/Images/new_logo.jpg'\r\nimport { history } from '../../_helpers/history';\r\nimport axios from 'axios';\r\nimport { baseURL } from '../../_helpers/axiosBaseURL';\r\n\r\n\r\nconst { SubMenu } = Menu;\r\n\r\n\r\n\r\n\r\n\r\nexport default function Navbar(){\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const [userDetails, setUserDetails] = useState({});             //stores users detials to access their name\r\n\r\n    const [parentCategoires, setParentCategories] = useState([]);         //categories in local state\r\n    const [childCategories, setChildCategories] = useState([]);\r\n\r\n    const categories = useSelector(state => state.categoryState.categories);           //categories in redux-store\r\n    const emptyCategories = useSelector(state => state.categoryState.empty);\r\n\r\n    // update the number of items for Cart(itemCount) icon\r\n    const itemCount = useSelector(state => state.cartState.items.length);\r\n    // check if the order is being processed\r\n    const isLoading = useSelector(state => state.cartState.loading);\r\n\r\n    useEffect(() => {                                                      \r\n        if(!categories.length && !emptyCategories) dispatch(getAllCategories());    //for populating categories\r\n        else{   \r\n            if(!parentCategoires.length){\r\n                const parents = categories.filter(c => {\r\n                    return c.path === null;\r\n                });\r\n                setParentCategories(parents);\r\n            }\r\n            if(!childCategories.length){\r\n                const children = categories.filter(c => {\r\n                    return c.path !== null;\r\n                });\r\n                setChildCategories(children);\r\n            }\r\n        }\r\n    }, [categories.length, dispatch, categories, childCategories.length, emptyCategories, parentCategoires.length]);\r\n\r\n    useEffect(() => {   //for populating the welcome name    \r\n        if(auth.roles[0] !== userConstants.ROLE_GUEST && JSON.stringify(userDetails) === '{}'){\r\n\r\n            const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n            axios.defaults.baseURL = baseURL;\r\n\r\n            axios.get('api/user/', config)\r\n            .then(res => { setUserDetails(res.data) })\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n            });\r\n        } \r\n        else if(auth.roles[0] === userConstants.ROLE_GUEST && JSON.stringify(userDetails) !== '{}') setUserDetails({});   //very important condition\r\n    }, [auth, updateAuth, userDetails]);\r\n \r\n    const logout = () => {         \r\n        _logout(updateAuth);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    const customerMenu = (                  //menus to be conditionally rendered \r\n        <>\r\n        <Menu.Item>\r\n            <Link to=\"/products\"> Browse Products </Link>\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n            <Link to=\"/cart\"> View Cart </Link>\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n            <Link to=\"/manageOrders\"> Manage Orders </Link>\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n            <Link to=\"/editCustomer\"> Edit Profile </Link>\r\n        </Menu.Item>\r\n        </>\r\n    );\r\n\r\n\r\n    let accountSpecificMenu = <></>;\r\n    if(auth.roles[0] === userConstants.ROLE_CUSTOMER) accountSpecificMenu = customerMenu;\r\n\r\n    // Account Menu\r\n    const accountMenu = (\r\n        <Menu>\r\n            {accountSpecificMenu}\r\n            <Menu.Item onClick={logout}>Logout</Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    const accountMenuMobile = (\r\n        <SubMenu \r\n            key=\"AccountMenuMobile\" \r\n            className=\"submenu-background\"  \r\n            icon={<UserOutlined />} \r\n            title={\"Welcome, \" + userDetails.first_name}\r\n        >\r\n            {accountSpecificMenu}\r\n            <Menu.Item onClick={logout}>Logout</Menu.Item>\r\n        </SubMenu>\r\n    );\r\n  \r\n    const categoriesMenu = parentCategoires.map(p => {                  //dynamic category drop down\r\n        const sub_categories = childCategories\r\n            .filter(c => { return c.path === `,${p.c_name},`})\r\n            .map(c => {\r\n                return <Menu.Item onClick={() => {history.push(`/products/${c._id}`)}} key={c._id}>{c.c_name}</Menu.Item>\r\n            });\r\n            return (\r\n                <SubMenu key={p._id} title={<div onClick={() => {history.push(`/products/${p._id}`)}}>{p.c_name}</div>}>{sub_categories}</SubMenu>\r\n            );\r\n    })\r\n\r\n    const ourProductsDropdown = ( //Our Products dropdown\r\n        <Menu>\r\n            <Menu.Item>\r\n                <Link to=\"/\">\r\n                    <b>Shop By Category</b>\r\n                </Link>\r\n            </Menu.Item>\r\n                {categoriesMenu}\r\n            <Menu.Item>\r\n                <Link to=\"/products\">\r\n                    <b>{\"View all Products  >\"}</b>\r\n                </Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n  const ourProductsSubmenuMobile = ( //Our Products Submenu\r\n        <SubMenu key=\"OurProductsSubmenu\" className=\"submenu-background\" title=\"Our Products\">\r\n            <Menu.Item disabled>\r\n                <b>Shop By Category</b>\r\n            </Menu.Item>\r\n            {categoriesMenu}\r\n            <Menu.Item>\r\n                <Link to=\"/products\">\r\n                    <b>{\"View all Products  >\"}</b>\r\n                </Link>\r\n            </Menu.Item>\r\n        </SubMenu>\r\n  );\r\n\r\n  //Login/Welcome, User menu item that changes based on whether user is logged in or not\r\n\r\n    let login = ( \r\n        <Menu.Item key = \"Login\" icon={<UserOutlined />}>\r\n            <Link to=\"/login\"> Login/Sign up </Link>\r\n        </Menu.Item>\r\n    );\r\n    let loginMobile = login;\r\n\r\n    if(auth.roles[0] === userConstants.ROLE_CUSTOMER){\r\n        login = (\r\n            <Menu.Item key = \"Welcome\"  icon={<UserOutlined />}>\r\n                <Dropdown overlay={accountMenu}>\r\n                    <span> Welcome, {userDetails.first_name} </span>\r\n                </Dropdown>\r\n            </Menu.Item>\r\n        );\r\n        loginMobile = (<>{accountMenuMobile}</>);\r\n    }\r\n    else if(auth.roles[0] ===userConstants.ROLE_ADMIN){\r\n        login = (\r\n            <Menu.Item onClick={logout} key = \"Welcome\"  icon={<UserOutlined />}>\r\n                <span> Logout </span>\r\n            </Menu.Item>\r\n        );\r\n        loginMobile = (<>{accountMenuMobile}</>);\r\n    }\r\n\r\n    const orderDropdown = (\r\n        <Menu>\r\n            <Menu.Item>\r\n                <Link to=\"/currentOrders\">Current Orders</Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item>\r\n                <Link to=\"/order\">Add Order</Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item>\r\n                <Link to=\"/processedOrders\">Processed Orders</Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    const productsDropdown = (\r\n        <Menu>\r\n            <Menu.Item>\r\n                <Link to=\"/manageProducts\">Manage Products</Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item>\r\n                <Link to=\"/editAddProducts\">Add Product</Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    let mainMenu = (\r\n        <>\r\n            <Menu.Item key=\"Products\">\r\n                <Dropdown overlay={ourProductsDropdown}>\r\n                    <span>Our Products</span>\r\n                </Dropdown>\r\n            </Menu.Item >\r\n\r\n            <Menu.Item key=\"Delivery\">\r\n                <Link to=\"/deliveryDispatch\"> Delivery and Dispatch </Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item key=\"Blog\">\r\n                <Link to=\"/blog\"> Blog </Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item key=\"Cart\" \r\n                icon = {\r\n                    <Badge count={itemCount} showZero style={{backgroundColor: \"#EB6E00\"}} >\r\n                        <ShoppingCartOutlined />\r\n                    </Badge>          \r\n                }\r\n            >\r\n                <Link to=\"/cart\"> Cart </Link>\r\n            </Menu.Item>\r\n        </>\r\n    );\r\n\r\n    let mainMenuMobile = (\r\n        <SubMenu key=\"SubMenuMoreDetails\" icon={<MenuOutlined />} title=\"Menu\">\r\n            {ourProductsSubmenuMobile}\r\n\r\n            <Menu.Item key=\"Delivery\">\r\n                <Link to=\"/deliveryDispatch\"> Delivery and Dispatch </Link>\r\n            </Menu.Item>\r\n\r\n            <Menu.Item key=\"Blog\">\r\n                <Link to=\"/blog\"> Blog </Link>\r\n            </Menu.Item>\r\n        </SubMenu>\r\n    );\r\n\r\n    if(auth.roles[0] === userConstants.ROLE_ADMIN){\r\n        mainMenu = (\r\n            <>\r\n                <Menu.Item key=\"Orders\">\r\n                    <Dropdown overlay={orderDropdown}>\r\n                        <span>Orders</span>\r\n                    </Dropdown>\r\n                </Menu.Item>\r\n\r\n                <Menu.Item key=\"Products\">\r\n                    <Dropdown overlay={productsDropdown}>\r\n                        <span>Products</span>\r\n                    </Dropdown>\r\n                </Menu.Item>\r\n\r\n                <Menu.Item key=\"EditCustomer\">\r\n                    <Link to=\"/manageCategories\">Manage Product Categories</Link>\r\n                </Menu.Item>\r\n\r\n                <Menu.Item key=\"EditCompany\">\r\n                    <Link to=\"/editCompanyInformation\">Edit Company Information</Link>\r\n                </Menu.Item>\r\n            </>\r\n        );\r\n    }\r\n\r\n    let logoLink = '/';           //logo link for homepage navigation\r\n    if(auth.roles[0] === userConstants.ROLE_ADMIN) logoLink = '/admin';\r\n\r\n\r\n\r\n\r\n  \r\n    return (\r\n        <>\r\n            {\r\n                isLoading \r\n                ?\r\n                // don't allow the user to navigate if true\r\n                <Menu className=\"Navbar box-shadow\" mode=\"horizontal\" selectable={false}>\r\n                    <Menu.Item key=\"Logo\" id=\"Logo\" selectable=\"false\" disabled={true}>\r\n                        <img src={image} alt=\"Logo\" onClick={() => { history.push(logoLink)}}/>\r\n                    </Menu.Item>\r\n                </Menu>\r\n                :\r\n                <>\r\n                    <Menu className=\"Navbar box-shadow\" mode=\"horizontal\" selectable={false}>\r\n                        <Menu.Item key=\"Logo\" id=\"Logo\" selectable=\"false\">\r\n                            {\r\n                                auth.roles[0] === userConstants.ROLE_ADMIN\r\n                                ?\r\n                                <Link to=\"/admin\">\r\n                                    <img src={image} alt=\"Logo\" />\r\n                                </Link>\r\n                                :\r\n                                <Link to=\"/\">\r\n                                    <img src={image} alt=\"Logo\" />\r\n                                </Link>\r\n                            }\r\n                        </Menu.Item>\r\n\r\n                        {mainMenu}\r\n\r\n                        {login}\r\n                    </Menu>\r\n\r\n                    <Menu className=\"Navbar-Mobile\" mode=\"inline\" selectable={false}>\r\n                        <Menu.Item key=\"Logo\" id=\"Logo\" onClick={() => {history.push(logoLink)}}>\r\n                            {\r\n                                auth.roles[0] === userConstants.ROLE_ADMIN\r\n                                ?\r\n                                <Link to=\"/admin\">\r\n                                    <img src={image} alt=\"Logo\" />\r\n                                </Link>\r\n                                :\r\n                                <Link to=\"/\">\r\n                                    <img src={image} alt=\"Logo\" />\r\n                                </Link>\r\n                            }\r\n                        </Menu.Item>\r\n\r\n                        {mainMenuMobile}\r\n\r\n                        <Menu.Item key=\"Cart\" icon = {\r\n                            <Badge count={itemCount} showZero style={{backgroundColor: \"#EB6E00\"}} >\r\n                                <ShoppingCartOutlined />\r\n                            </Badge>          \r\n                        }>\r\n                            <Link to=\"/cart\"> Cart </Link>\r\n                        </Menu.Item>\r\n\r\n                        {loginMobile}\r\n                    </Menu>\r\n                </>\r\n            }\r\n        </>\r\n    );\r\n}\r\n","export const layout = {\r\n    labelCol: {\r\n      span: 8\r\n    },\r\n    wrapperCol: {\r\n      span: 14\r\n    }\r\n};\r\n\r\nexport const actionButtonsLayout = {\r\n    wrapperCol: {\r\n        span: 22\r\n    }\r\n};","import { Form, Input, Button } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\nimport {useState} from 'react';\r\nimport { useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\nimport axios from 'axios';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport { layout, actionButtonsLayout } from './layouts'; \r\nimport { isWhiteSpace, validateEmail } from '../../_services/SharedFunctions';\r\nimport { userConstants } from '../../_constants/user.constants';\r\n\r\n\r\nconst Login = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [form] = useForm();\r\n    const updateAuth = useAuthUpdate();\r\n\r\n\r\n    const login = (_, password) => {\r\n        const email = form.getFieldValue('email');\r\n\r\n        if(!password || isWhiteSpace(password) || !validateEmail(email)) return Promise.resolve();\r\n\r\n        setLoading(true);\r\n\r\n        const user = {\r\n            email: email.toLowerCase(),\r\n            password: password\r\n        }\r\n        \r\n        return axios.post('api/auth/sign_in', user)\r\n        .then(res => {\r\n            setLoading(false);\r\n            localStorage.setItem('SUPERFIN_USER', JSON.stringify(res.data));\r\n            updateAuth(res.data);\r\n            if(res.data.roles[0] === userConstants.ROLE_ADMIN) history.push('/admin');\r\n            else history.push('/');\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            setLoading(false);\r\n            return Promise.reject(new Error('Could not find email or password our system!'));\r\n        });\r\n    }\r\n\r\n\r\n    \r\n\r\n    return(\r\n        <div>\r\n            <div className=\"page-title-holder with-divider center-page\">\r\n                <h1>Login</h1>\r\n            </div>\r\n        \r\n            <Form\r\n                {...layout}\r\n                name=\"authentication-form\"\r\n                form={form}\r\n            >\r\n                 <Form.Item\r\n                        label=\"Email\"\r\n                        name=\"email\"\r\n                        rules={[\r\n                            {   \r\n                                type: 'email',\r\n                                required: true,\r\n                                message: 'Please input valid email!',\r\n                                whitespace: true,\r\n                                validateTrigger: \"onSubmit\"\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={100}/>\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"Password\"\r\n                        name=\"password\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input your password!',\r\n                                whitespace: true\r\n                            },\r\n                        \r\n                            {\r\n                                validator: login,\r\n                                validateTrigger: \"onSubmit\"\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input.Password maxLength={100}/>\r\n                    </Form.Item >\r\n\r\n                <Form.Item {...actionButtonsLayout}>\r\n                    <span style={{cursor: 'pointer', color: '#EB6E00', marginRight: '17px'}} onClick={() => {history.push('/emailRequest')}}>Forgot Password ?</span>\r\n                </Form.Item>\r\n\r\n                <Form.Item {...actionButtonsLayout} >\r\n                    <Button style={{marginRight: '17px'}} loading={loading} type=\"primary\" htmlType=\"submit\">Login</Button>\r\n                </Form.Item>\r\n\r\n                <Form.Item {...actionButtonsLayout}>\r\n                    <span>Don't have an account yet ? &nbsp; <Button type=\"link\" onClick={() => history.push('/signup')}>Create an Account</Button></span>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/No_Image.04e9798e.jpg\";","import altImage from \"../../_assets/Images/No_Image.jpg\"\r\nimport { Card } from 'antd';\r\n\r\nconst { Meta } = Card;\r\nconst Category = props => {\r\n    const category  = props;\r\n    const onClick = props.onClick;\r\n    const img = props.image;\r\n\r\n    return (\r\n        <Card className=\"card-shadow-hoverable\"\r\n            tabIndex={0}\r\n            cover={\r\n                <img className=\"cover-img fixed-size\" \r\n                    style={{ cursor: 'pointer' }} \r\n                    src={img}\r\n                    alt={altImage}\r\n                    onClick={() => {onClick(props.c_name)}}\r\n                />\r\n            }>\r\n            <Meta\r\n                title={\r\n                    <span\r\n                        id=\"view-product-title\"\r\n                        onClick={() => {onClick(props.c_name)}}>\r\n                        {category.c_name}\r\n                    </span>\r\n                }\r\n            />\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default Category;","import { \r\n    GET_PRODUCTS, \r\n    GET_PRODUCT, \r\n    DEFAULT_ORDER, \r\n    LOADING_PRODUCTS,\r\n    DELETE_PRODUCT, \r\n    ERROR, \r\n    EDIT_PRODUCT, \r\n    ADD_PRODUCT,\r\n    SET_LOADING,\r\n} from '../_constants/actionTypes.constants';\r\nimport axios from 'axios';\r\nimport { _logout } from '../_services/SharedFunctions';\r\nimport {baseURL} from '../_helpers/axiosBaseURL';\r\n\r\naxios.defaults.baseURL = baseURL;\r\n\r\n/*\r\nconst config = {\r\n    headers: {\r\n        'content-type': 'multipart/form-data'\r\n    }\r\n}*/\r\n\r\nexport const getAllProducts = () => dispatch  => {\r\n    dispatch(setIsLoading(true));\r\n\r\n    axios.get('api/products/all-product')\r\n    .then(res => {\r\n        dispatch({\r\n            type: GET_PRODUCTS,\r\n            payload: res.data.products\r\n        })\r\n    })\r\n    .catch(() => {\r\n        dispatch(setIsLoading(false));\r\n        dispatch({\r\n            type: ERROR\r\n        })\r\n    });\r\n};\r\n\r\nexport const getProductDetails = p_code => dispatch => {\r\n    dispatch(setLoadingProductDetails(true));\r\n    axios.post('api/products/product-by-id', {\r\n        p_code: p_code\r\n    }).then(res => {\r\n        dispatch({\r\n            type: GET_PRODUCT,\r\n            payload: res.data\r\n        })\r\n    })\r\n    .catch(() => {\r\n        dispatch(setLoadingProductDetails(false));\r\n        dispatch({\r\n            type: ERROR\r\n        })\r\n    });\r\n};\r\n\r\nexport const setLoadingProductDetails = () => {\r\n    return {type: SET_LOADING}\r\n}\r\n\r\nexport const setDefaultOrder = () => {\r\n    return {\r\n        type: DEFAULT_ORDER\r\n    }\r\n}\r\n\r\nexport const deleteProduct = (p_code, access_token, updateAuth) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n    return axios.post('api/products/delete-product', {\r\n        p_code: p_code\r\n    }, config)\r\n    .then(res => {\r\n        if(res.data.success){                            //This may need to be changed to 'success'\r\n            dispatch({\r\n                type: DELETE_PRODUCT,\r\n                payload: p_code\r\n            })\r\n        }\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        if(err.response.status === 401) _logout(updateAuth);\r\n    });\r\n}\r\n\r\nexport const editProduct = (newProduct, formData, access_token) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n    return axios.post('api/products/edit-product', formData, config)\r\n        .then(res => {\r\n            if(res.data.success){\r\n                dispatch({\r\n                    type: EDIT_PRODUCT,\r\n                    payload: newProduct\r\n                })\r\n            }\r\n            return res;\r\n        })\r\n}\r\n\r\nexport const addProduct = (formData, newProduct, access_token) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n    \r\n    return axios.post('api/products/add-product', formData, config)\r\n        .then(res => {\r\n            if(res.data.success){\r\n                dispatch({\r\n                    type: ADD_PRODUCT,\r\n                    payload: newProduct\r\n                })\r\n            }\r\n            return res;\r\n        });\r\n}\r\n\r\nexport const setIsLoading = val => {\r\n    return {\r\n        type: LOADING_PRODUCTS,\r\n        payload: val\r\n    }\r\n}\r\n","import Category from './Category';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport { getAllProducts, setDefaultOrder } from '../../_actions/productActions';\r\nimport { useState, useEffect } from \"react\";\r\nimport { Spin, Button, message, List } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport noImage from '../../_assets/Images/No_Image.jpg';\r\nimport { history } from '../../_helpers/history';\r\n\r\nconst itemsPerPage = 6;\r\n\r\nconst CategoryList = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    const loading = useSelector(state => state.categoryState.loading);\r\n    const error = useSelector(state => state.categoryState.error);\r\n    const emptyCategories = useSelector(state => state.categoryState.empty);\r\n    const productsList = useSelector(state => state.productState.products);\r\n\r\n   \r\n    const [currentCategories, setCurrentCategories] = useState([]);\r\n    const [isChild, setIsChild] = useState(false);\r\n    const [parentCategoires, setParentCategories] = useState([]);\r\n    const [childCategories, setChildCategories] = useState([]);\r\n\r\n\r\n    const underConstructionMessage = () => {\r\n        message.info({\r\n          content: 'We are still adding products to this category. Check back soon!',\r\n          style: {\r\n            marginTop: '20vh',\r\n            height: '40px'\r\n          },\r\n        });\r\n      };\r\n    \r\n    const changeCategoryType = cat => {\r\n        if(!isChild){\r\n            \r\n            const childrenOfParent = childCategories.filter(c => {\r\n                return c.path === `,${cat.c_name},`\r\n            });\r\n            if(childrenOfParent.length === 0) underConstructionMessage();\r\n            else{\r\n                setCurrentCategories(childrenOfParent);\r\n                setIsChild(true);\r\n            }\r\n        }\r\n        else{\r\n            const productFound = productsList.find(p => {return p.p_categories === cat._id});\r\n            if(productFound === undefined) underConstructionMessage();\r\n            else history.push(`/products/${cat._id}`);\r\n        } \r\n    }\r\n\r\n    const getCategoryImage = c_id => {\r\n        let id = c_id;\r\n        if(!isChild){\r\n            const cat = categories.find(c => { return c._id === id });\r\n            const child = categories.find(c => { return c.path === `,${cat.c_name},` });\r\n            if(child === undefined) return noImage;\r\n            id = child._id;\r\n        }\r\n\r\n        const product = productsList.find(p => { return p.p_categories === id });\r\n        if(product !== undefined) return product.p_image_uri[0];\r\n        else return noImage;\r\n    }\r\n\r\n    const goBack = () => {\r\n        setIsChild(false);\r\n        setCurrentCategories(parentCategoires);\r\n    }\r\n\r\n     useEffect(() => {    \r\n        if(!productsList.length) dispatch(getAllProducts());      \r\n        else dispatch(setDefaultOrder());\r\n\r\n        if(!categories.length && !emptyCategories){\r\n            dispatch(getAllCategories());\r\n        } \r\n        else if(!parentCategoires.length && !childCategories.length){\r\n            \r\n            const parents = categories.filter(c => {\r\n                return c.path === null;\r\n            });\r\n            setParentCategories(parents);\r\n            setCurrentCategories(parents);\r\n\r\n            const children = categories.filter(c => {\r\n                return c.path !== null;\r\n            });\r\n            setChildCategories(children);\r\n        }\r\n    }, [categories.length, dispatch, categories, childCategories, emptyCategories, parentCategoires.length, productsList.length]);\r\n\r\n\r\n    return (\r\n        <>\r\n            {\r\n                error \r\n                ?   <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try refreshing page</h1> \r\n                :   <></>\r\n            }\r\n            {\r\n                isChild ? <div className=\"container\"><Button onClick={goBack}>Go back</Button></div> : <></>\r\n            }\r\n            {\r\n                loading \r\n                ?   <div style={{textAlign: 'center'}}><Spin size='large'/> </div>\r\n                :   <>\r\n                        <div className=\"container\">\r\n                            <List\r\n                                grid={{\r\n                                    gutter: 6, xs: 1, sm: 2, md: 2, lg: 3, xl: 4, xxl: 5\r\n                                }}\r\n                                pagination={{\r\n                                    position: 'bottom',\r\n                                    defaultPageSize: 8,\r\n                                }}\r\n                                dataSource={currentCategories}\r\n                                renderItem={item => {\r\n                                return(\r\n                                    <List.Item>                        \r\n                                        <Category {...item} onClick={ () => changeCategoryType(item)} image={getCategoryImage(item._id.toString())}/>\r\n                                    </List.Item>\r\n                                )}}\r\n                            />\r\n                        </div>\r\n                    </>  \r\n            }  \r\n        </>\r\n    );\r\n};\r\n\r\nexport default CategoryList;\r\n","export default __webpack_public_path__ + \"static/media/Image_1.b0b95258.png\";","export default __webpack_public_path__ + \"static/media/Image_2.b47bd8c8.png\";","export default __webpack_public_path__ + \"static/media/Image_3.e8c817bf.png\";","import { Carousel, Button } from 'antd';\r\nimport image_1 from '../../_assets/Images/HomepageImages/Image_1.png';\r\nimport image_2 from '../../_assets/Images/HomepageImages/Image_2.png';\r\nimport image_3 from '../../_assets/Images/HomepageImages/Image_3.png';\r\nimport altImage from '../../_assets/Images/No_Image.jpg';\r\nimport { history } from '../../_helpers/history';\r\n\r\nexport const HomepageCarousel = () => {\r\n    return(\r\n        <div style = {{ position:'relative'}}>\r\n                <Button onClick={() => history.push('/products')} type=\"default\" className=\"homepage-carousel-button\">SHOP NOW</Button>\r\n\r\n                <Carousel autoplay>\r\n                    <div>\r\n                        <div className=\"homepage-carousel-background\">\r\n                            <u className=\"homepage-carousel-text\">Environmentally Sustainable Packaging</u>\r\n                            <img src = {image_1} className=\"homepage-carousel-image\" alt = {altImage}/>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"homepage-carousel-background\">\r\n                            <u className=\"homepage-carousel-text\">Great Customer Satisfaction</u>\r\n                            <img src = {image_2} className=\"homepage-carousel-image\" alt = {altImage}/>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"homepage-carousel-background\">\r\n                            <u className=\"homepage-carousel-text\">Customizable Products</u>\r\n                            <img src = {image_3} className=\"homepage-carousel-image\" alt = {altImage}/>\r\n                        </div>\r\n                    </div>\r\n                </Carousel>\r\n            </div>\r\n    );\r\n} ","export const orderStatusConstants = {\r\n    NEW: \"NEW\",\r\n    SHIPPED: \"SHIPPED\",\r\n    COMPLETE: \"COMPLETE\"\r\n};","import { history } from '../../_helpers/history';\r\n\r\nexport const navigateEditOrder = (po_number, status) => {\r\n    history.push(`/order/${po_number}/${status}`);\r\n    window.scrollTo(0, 0);\r\n}\r\n\r\nexport const navigateAddOrder = () => {\r\n    history.push('/order');\r\n    window.scrollTo(0, 0);\r\n}\r\n\r\nexport const navigateFullList = complete => {\r\n    let location = '/currentOrders';\r\n    if(complete) location = '/processedOrders';\r\n    \r\n    history.push(location);\r\n    window.scrollTo(0, 0);\r\n}","import {\r\n    GET_INCOMPLETE_ORDERS,\r\n    LOADING_INCOMPLETE_ORDERS, \r\n    ERROR_INCOMPLETE_ORDERS, \r\n    DELETE_INCOMPLETE_ORDERS, \r\n    ADD_TRACKING,\r\n    ADD_INCOMPLETE_ORDER,\r\n    EMPTY_INCOMPLETE_ORDER\r\n} from '../_constants/actionTypes.constants';\r\nimport axios from 'axios';\r\nimport { _logout } from '../_services/SharedFunctions';\r\n\r\nexport const getIncompleteOrders = (token, updateAuth) => dispatch => {\r\n    dispatch(setIncompleteOrdersLoading(true));\r\n\r\n    const config = { headers:{ authorization : `Bearer ${token}` }};\r\n\r\n    axios.get('api/orders/all-uncomplete', config)\r\n    .then(res => {\r\n        if(res.data.length <= 0){\r\n            dispatch({\r\n                type: EMPTY_INCOMPLETE_ORDER\r\n            });\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: GET_INCOMPLETE_ORDERS,\r\n                payload: res.data                   \r\n            });\r\n        }  \r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        if(err.response.status === 401) _logout(updateAuth);\r\n        dispatch({\r\n            type: ERROR_INCOMPLETE_ORDERS,\r\n        });\r\n    })\r\n}\r\n\r\nexport const setIncompleteOrdersLoading = val => {\r\n    return {\r\n        type: LOADING_INCOMPLETE_ORDERS,\r\n        payload: val\r\n    }\r\n}\r\n\r\nexport const deleteIncompleteOrder = (po_number, token) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${token}` }};\r\n\r\n    return axios.post('api/orders/delete-order', {po_number: po_number}, config)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            dispatch({\r\n                type: DELETE_INCOMPLETE_ORDERS,\r\n                payload: po_number\r\n            });\r\n            return res;\r\n        }\r\n        else{\r\n            console.log(res);\r\n            return res;\r\n        } \r\n    });\r\n}\r\n\r\nexport const addTracking = (trackingDetails, token) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${token}` }};\r\n\r\n    return axios.post('api/orders/add-tracking', trackingDetails, config)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            dispatch({\r\n                type: ADD_TRACKING,\r\n                payload: trackingDetails\r\n            });\r\n            return res;\r\n        }\r\n        else {\r\n            console.log(res);\r\n            return res;\r\n        }\r\n    });\r\n}\r\n\r\nexport const addIncompleteOrder = order => dispatch => {\r\n\r\n    return axios.post('/api/orders/create-order', order)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            order.po_number = res.data.po_number;\r\n            dispatch({\r\n                type: ADD_INCOMPLETE_ORDER,\r\n                payload: order\r\n            })\r\n        }\r\n        else console.log(res);\r\n        return res;\r\n    });\r\n}\r\n\r\n\r\n","import { \r\n    GET_COMPLETE_ORDERS, \r\n    LOADING_COMPLETE_ORDERS, \r\n    ERROR_COMPLETE_ORDERS, \r\n    DELETE_COMPLETE_ORDER, \r\n    ADD_COMPLETE_ORDER ,\r\n    EMPTY_COMPLETE_ORDER,\r\n} from '../_constants/actionTypes.constants';\r\nimport axios from 'axios';\r\nimport { _logout } from '../_services/SharedFunctions';\r\n\r\n\r\nexport const getCompleteOrders = (token, updateAuth) => dispatch => {\r\n    dispatch(setCompleteOrdersLoading(true));\r\n    \r\n    const config = { headers:{ authorization : `Bearer ${token}` }};\r\n\r\n    return axios.get('api/orders/all-complete', config)\r\n    .then(res => {\r\n        if(res.data.length <= 0){\r\n            dispatch({\r\n                type: EMPTY_COMPLETE_ORDER\r\n            });\r\n        }\r\n        else{\r\n            dispatch({\r\n                type: GET_COMPLETE_ORDERS,\r\n                payload: res.data\r\n            });\r\n        }\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        if(err.response.status === 401) _logout(updateAuth);\r\n        dispatch({\r\n            type: ERROR_COMPLETE_ORDERS,\r\n        });\r\n    })\r\n}\r\n\r\nexport const setCompleteOrdersLoading = val => {\r\n    return {\r\n        type: LOADING_COMPLETE_ORDERS,\r\n        payload: val\r\n    }\r\n}\r\n\r\nexport const deleteCompleteOrder = (po_number, token) => dispatch => {\r\n    const config = { headers:{ authorization : `Bearer ${token}` }};\r\n\r\n    return axios.post('api/orders/delete-order', {po_number: po_number}, config)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            dispatch({\r\n                type: DELETE_COMPLETE_ORDER,\r\n                payload: po_number\r\n            });\r\n            return res;\r\n        }\r\n        else{\r\n            console.log(res);\r\n            return res;\r\n        } \r\n    });\r\n}\r\n\r\nexport const addCompleteOrder = order => dispatch => {\r\n    return axios.post('/api/orders/create-order', order)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            order.po_number = res.data.po_number;\r\n            dispatch({\r\n                type: ADD_COMPLETE_ORDER,\r\n                payload: order\r\n            })\r\n        }\r\n        else console.log(res);\r\n        return res;\r\n        \r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        return err;\r\n    });\r\n}\r\n \r\n","import { Modal } from 'antd';\r\nimport { deleteProduct } from '../../_actions/productActions';\r\nimport { deleteIncompleteOrder } from '../../_actions/incompleteOrderActions'; \r\nimport { deleteCompleteOrder } from '../../_actions/completeOrderActions'; \r\nimport { orderStatusConstants } from '../../_constants/orderStatus.constants';\r\nimport { _logout } from '../../_services/SharedFunctions'; \r\n//All shared modals\r\n\r\nexport const deleteConfirm = (p_code, dispatch, access_token, updateAuth) => {\r\n    Modal.confirm({\r\n        title: `Deleting product: ${p_code}`,\r\n        content: 'Are you sure you wish to delete this product?',\r\n        okText: 'Delete',\r\n        okType: 'danger',\r\n        onOk() {\r\n            dispatch(deleteProduct(p_code, access_token, updateAuth));\r\n        }\r\n    });\r\n}\r\n\r\nconst deleteOrderSuccess = po_number => { \r\n    Modal.info({\r\n        title: 'Success',\r\n        content: `Deleted order: ${po_number}`,\r\n        okText: 'Ok',\r\n    });\r\n}\r\n\r\nconst deleteOrderFail = po_number => {\r\n    Modal.info({\r\n        title: 'Error',\r\n        content: `Failed to delete product: ${po_number}. Please reload the page and try again or contact support.`,\r\n        okText: 'Ok',\r\n    });\r\n}\r\n\r\nexport const deleteOrderConfirm = (po_number, status, access_token, updateAuth, dispatch) => {\r\n    Modal.confirm({\r\n        title: `Deleting order: ${po_number}`,\r\n        content: 'Are you sure you wish to delete this order?',\r\n        okText: 'Delete',\r\n        okType: 'danger',\r\n        onOk() {\r\n            if(status===orderStatusConstants.COMPLETE){\r\n                return dispatch(deleteCompleteOrder(po_number, access_token, updateAuth))\r\n                .then(res => {\r\n                    if(res.data.success) deleteOrderSuccess(po_number);\r\n                    else deleteOrderFail(po_number);\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else deleteOrderFail(po_number);\r\n                });\r\n            }\r\n            else{\r\n                return dispatch(deleteIncompleteOrder(po_number, access_token, updateAuth))\r\n                .then(res => {\r\n                    if(res.data.success) deleteOrderSuccess(po_number);\r\n                    else deleteOrderFail(po_number);\r\n                })\r\n                .catch((err) => {\r\n                    console.log();\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else deleteOrderFail(po_number);\r\n                });\r\n            } \r\n        }\r\n    });\r\n} \r\n\r\n","import { Modal } from 'antd';\r\nimport { addTracking } from '../../_actions/incompleteOrderActions';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\nconst sumbitTrackingFailed = po_number => {\r\n    Modal.info({\r\n        title: `Error`,\r\n        content: `Order: ${po_number} tracking information could not be submitted. Please try reloading the page or contact support.`,\r\n        okText: 'Ok',\r\n    });\r\n}\r\n\r\nconst sumbitTrackingSuccess = po_number => {\r\n    Modal.info({\r\n        title: `Success`,\r\n        content: `Order: ${po_number} tracking information was submitted`,\r\n        okText: 'Ok',\r\n    });\r\n}\r\n\r\nexport const confirmSubmitTracking = (tracking, dispatch, token, updateAuth) => {\r\n\r\n    Modal.confirm({\r\n        title: `Are you sure you want to submit the following details for order: ${tracking.po_number}`,\r\n        content: `Tracking Number: ${tracking.tracking_number}, Carrier: ${tracking.carrier}?`,\r\n        okText: 'Submit',\r\n        onOk() {\r\n            return dispatch(addTracking(tracking, token, updateAuth))\r\n            .then(res => {\r\n                if(res.data.success) sumbitTrackingSuccess(tracking.po_number);\r\n                else sumbitTrackingFailed(tracking.po_number);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else sumbitTrackingFailed(tracking.po_number);\r\n            });\r\n        }\r\n    });\r\n}","import React from \"react\";\r\nimport { orderStatusConstants } from '../../_constants/orderStatus.constants';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { Button, Input, Form, Card } from 'antd';\r\nimport { navigateEditOrder } from './Functions';\r\nimport { deleteOrderConfirm } from '../../SharedComponents/Modals/Modals';\r\nimport { confirmSubmitTracking } from './Modals';\r\nimport { useForm } from \"antd/lib/form/Form\";\r\n\r\nconst { Meta } = Card;\r\n\r\nconst HomepageAdminOrder = props => {\r\n    const order = props.order;\r\n    const dispatch = props.dispatch;\r\n    const access_token = props.access_token;\r\n    const updateAuth = props.updateAuth;\r\n\r\n    const [form] = useForm();\r\n\r\n    const date = new Date(order.issued_date);\r\n    const dateString = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  \r\n    const onFinishOrder = () => {\r\n        form.validateFields()\r\n        .then(values => {\r\n            values.po_number = order.po_number;\r\n            confirmSubmitTracking(values, dispatch, access_token, updateAuth);\r\n        });  \r\n    }\r\n\r\n    const onFinishFailedOrder = err => {\r\n        console.log(err);\r\n    }\r\n\r\n    let trackingNumberDiv =  <>\r\n                                <Form\r\n                                form={form}\r\n                                name=\"submit-tracking-form\"\r\n                                onFinish={onFinishOrder}\r\n                                onFinishFailed={onFinishFailedOrder}\r\n                                >\r\n                                    <div className=\"Homepage-Admin-Order-Text\"><b>Enter Tracking Number</b></div>\r\n\r\n                                    <div className=\"Homepage-Admin-Order-Text\">\r\n                                        <Form.Item\r\n                                            name=\"tracking_number\"\r\n                                            rules={[\r\n                                              {\r\n                                                required: true,\r\n                                                message: 'Please input the tracking number',\r\n                                                whitespace: true,\r\n                                              }\r\n                                            ]}\r\n                                        >\r\n                                            <Input maxLength='40' placeholder=\"Enter tracking number here\"/>\r\n                                        </Form.Item> \r\n                                    </div>\r\n\r\n                                    <div className=\"Homepage-Admin-Order-Text\"><b>Enter Carrier</b></div>\r\n\r\n                                    <div className=\"Homepage-Admin-Order-Text\">\r\n                                        <Form.Item\r\n                                             name=\"carrier\"\r\n                                             rules={[\r\n                                               {\r\n                                                 required: true,\r\n                                                 message: 'Please input the carrier name',\r\n                                                 whitespace: true\r\n                                               }\r\n                                             ]}\r\n                                        >\r\n                                            <Input maxLength='40' placeholder=\"Enter carrier name here\"/>\r\n                                        </Form.Item>   \r\n                                    </div>\r\n                                    \r\n                                    <div className=\"Homepage-Admin-Order-Text\"> \r\n                                        <Form.Item>\r\n                                            <Button  type=\"primary\" htmlType=\"submit\">Submit</Button>\r\n                                        </Form.Item>\r\n                                    </div>\r\n                                </Form>\r\n                            </>\r\n\r\n\r\n    //if the order is complete it will contain the tracking number \r\n    if(order.status === orderStatusConstants.COMPLETE || order.status === orderStatusConstants.SHIPPED){\r\n        trackingNumberDiv = <>\r\n                                <div>\r\n                                    <div className=\"Homepage-Admin-Order-Text\">Tracking Number: {order.tracking_number}</div>    \r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"Homepage-Admin-Order-Text\">Carrier: {order.carrier}</div>    \r\n                                </div>\r\n                            </>\r\n    }\r\n\r\n\r\n\r\n\r\n    \r\n    return (\r\n        <Card className=\"card-shadow-hoverable\"\r\n            tabIndex={0}\r\n            actions={[\r\n                <DeleteOutlined onClick={() => { deleteOrderConfirm(order.po_number, order.status, access_token, updateAuth, dispatch) }} style={{color: 'red'}}/>,\r\n                <EditOutlined onClick={() => { navigateEditOrder(order.po_number, order.status)}}/>\r\n            ]}\r\n            title={<b>Order Number: {order.po_number}</b>}>\r\n            <Meta\r\n                description={<>\r\n                    <p><b>Status: </b>{order.status}</p>\r\n                    <p><b>CustomerID: </b>{order.c_email}</p>\r\n                    <p><b>Date Issued: </b>{ dateString }</p>\r\n                    {trackingNumberDiv}\r\n                </>}\r\n            />\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default HomepageAdminOrder;","import HomepageAdminOrder from './HomepageAdminOrder';\r\nimport { Spin, List } from 'antd';\r\n\r\nconst HomepageAdminOrderList = props => {\r\n    const orders = props.orders;\r\n    const loading = props.loadingOrders;\r\n    const error = props.errorLoadingOrders;\r\n    const dispatch = props.dispatch;\r\n    const access_token = props.access_token;\r\n    const updateAuth = props.updateAuth;\r\n\r\n\r\n\r\n    let renderableOrders = [];\r\n    if(orders.length !== 0){\r\n        renderableOrders = orders.map(o => {\r\n            return {\r\n                order: o,\r\n                dispatch: dispatch,\r\n                updateAuth: updateAuth,\r\n                access_token: access_token\r\n            }\r\n        }); \r\n    }\r\n    \r\n    return (\r\n      <>\r\n        {loading ? <div style = {{textAlign: 'center'}}> <Spin size=\"large\"/> </div> : <></>}\r\n        \r\n        {error ? <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try refreshing page</h1> : <>\r\n                <List\r\n                    grid={{\r\n                        gutter: 6, xs: 1, sm: 2, md: 2, lg: 3, xl: 4, xxl: 5\r\n                    }}\r\n                    pagination={{\r\n                        position: 'bottom',\r\n                        defaultPageSize: 8\r\n                    }}\r\n                    dataSource={renderableOrders}\r\n                    renderItem={orderProps => {\r\n                    return(\r\n                        <List.Item>                        \r\n                            <HomepageAdminOrder {...orderProps}/>\r\n                        </List.Item>\r\n                    )}}\r\n                />\r\n            </>}\r\n      </>\r\n  );\r\n};\r\n\r\nexport default HomepageAdminOrderList;","import React from \"react\";\r\nimport altImage from \"../../_assets/Images/No_Image.jpg\"\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { deleteConfirm } from '../../SharedComponents/Modals/Modals';\r\nimport { history } from '../../_helpers/history';\r\nimport { Card } from 'antd';\r\n\r\nconst { Meta } = Card;\r\n\r\nconst Product = props => {\r\n    const dispatch = props.dispatch;\r\n    const product = props.product;\r\n    const categoryName = props.categoryName;\r\n\r\n\r\n    return (\r\n        <Card className=\"card-shadow-hoverable\"\r\n            tabIndex={0}\r\n            cover={\r\n                <img className=\"cover-img fixed-size\" \r\n                    style={{ cursor: 'pointer' }} \r\n                    alt={altImage}\r\n                    src={(product.p_image_uri[0] === null || product.p_image_uri[0] === undefined || (product.p_image_uri[0] !== null && product.p_image_uri[0] !== undefined && product.p_image_uri[0].length === 0)) ? altImage : product.p_image_uri[0]}\r\n                    onClick={() => { history.push(`/editAddProducts/${product.p_code}`)}}\r\n                />\r\n            }\r\n            actions={[\r\n                <DeleteOutlined onClick={() => {deleteConfirm(product.p_code, dispatch, props.access_token, props.updateAuth)}} style={{color: 'red'}}/>,\r\n                <EditOutlined onClick={() => { history.push(`/editAddProducts/${product.p_code}`)}}/>\r\n            ]}\r\n            >\r\n            <Meta\r\n                title={\r\n                    <span\r\n                        id=\"view-product-title\"\r\n                        onClick={() => { history.push(`/editAddProducts/${product.p_code}`)}}>\r\n                        {product.p_name}\r\n                    </span>\r\n                }\r\n                description={<>\r\n                    <p><b>Product Code: </b>{product.p_code}</p>\r\n                    <p><b>Unit Price: </b>${product.p_price}</p>\r\n                    <p><b>Category: </b>{ categoryName }</p>\r\n                </>}\r\n            />\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default Product;","import ProductAdmin from './ProductAdmin';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\n\r\nimport { useSelector  } from 'react-redux';\r\nimport { useEffect } from 'react'; \r\nimport { Spin, List } from 'antd';\r\nimport { getCategoryName } from '../../_services/SharedFunctions';\r\n\r\nconst ProductList = props => {\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    const dispatch = props.dispatch;\r\n    \r\n    useEffect(() => {             \r\n        if(!categories.length) dispatch(getAllCategories());\r\n    }, [categories.length, dispatch]);\r\n\r\n    let renderableProducts;\r\n    \r\n    \r\n    if(!props.productsList.length) renderableProducts = [];\r\n    else{\r\n        renderableProducts = props.productsList.map(p => {\r\n            return {\r\n                product: p,\r\n                dispatch: props.dispatch,\r\n                categoryName: getCategoryName(p.p_categories, categories),\r\n                updateAuth: props.updateAuth,\r\n                access_token: props.access_token\r\n            }\r\n        });\r\n    }\r\n    \r\n    return (\r\n        <>  \r\n            {props.errorLoading ? <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try refreshing page</h1> : <></>}\r\n            {props.loading ? <div style={{textAlign: 'center'}}><Spin size=\"large\"/></div> : <>\r\n                <List\r\n                    grid={{\r\n                        gutter: 6, xs: 1, sm: 2, md: 2, lg: 3, xl: 4, xxl: 5\r\n                    }}\r\n                    pagination={{\r\n                        position: 'bottom',\r\n                        defaultPageSize: 8\r\n                    }}\r\n                    dataSource={renderableProducts}\r\n                    renderItem={productProps => {\r\n                    return(\r\n                        <List.Item>                        \r\n                            <ProductAdmin {...productProps}/>\r\n                        </List.Item>\r\n                    )}}\r\n                />\r\n            </>}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProductList;","import HomepageAdminOrderList from './HomepageAdminOrderList';\r\nimport ProductListAdmin from './ProductListAdmin';\r\nimport { getAllProducts, setDefaultOrder } from '../../_actions/productActions';\r\nimport { getCompleteOrders } from '../../_actions/completeOrderActions';\r\nimport { getIncompleteOrders } from '../../_actions/incompleteOrderActions'; \r\nimport { history } from '../../_helpers/history';\r\nimport { navigateAddOrder, navigateFullList } from './Functions';\r\nimport { useAuthUpdate, useAuth } from '../../SharedComponents/AuthContext/AuthContext';\r\nimport { Button, Radio } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useState , useEffect } from 'react';\r\n\r\nconst HomepageAdmin = () => {\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const [radioState, setRadioState] = useState(false);            //false is 'Current Orders'\r\n\r\n    const productsList = useSelector(state => state.productState.products);\r\n    const errorLoading = useSelector(state => state.productState.error);\r\n    const loading = useSelector(state => state.productState.isLoading);\r\n\r\n    const completeOrders = useSelector(state => state.completeOrdersState.completeOrders);\r\n    const errorLoadingCompleteOrders = useSelector(state => state.completeOrdersState.error);\r\n    const loadingCompleteOrders = useSelector(state => state.completeOrdersState.loading);\r\n    const emptyCompleteOrders = useSelector(state => state.completeOrdersState.empty);\r\n\r\n    const incompleteOrders = useSelector(state => state.incompleteOrdersState.incompleteOrders);\r\n    const errorLoadingIncompleteOrders = useSelector(state => state.incompleteOrdersState.error);\r\n    const loadingIncompleteOrders = useSelector(state => state.incompleteOrdersState.loading);\r\n    const emptyIncomplateOrders = useSelector(state => state.incompleteOrdersState.empty);\r\n\r\n\r\n\r\n    const productListProps = {\r\n        dispatch: dispatch,\r\n        productsList: productsList,\r\n        errorLoading: errorLoading,\r\n        loading:loading,\r\n        updateAuth: updateAuth,\r\n        access_token: auth.access_token\r\n    }\r\n\r\n    let orders = [];\r\n    let errorLoadingOrders = false;\r\n    let loadingOrders = false;\r\n\r\n    if(radioState){\r\n        orders = completeOrders\r\n        errorLoadingOrders = errorLoadingCompleteOrders;\r\n        loadingOrders = loadingCompleteOrders;\r\n    }\r\n    else{\r\n        orders = incompleteOrders;\r\n        errorLoadingOrders = errorLoadingIncompleteOrders;\r\n        loadingOrders = loadingIncompleteOrders;\r\n    }\r\n\r\n    const ordersListProps = {\r\n        dispatch: dispatch,\r\n        orders: orders,\r\n        errorLoadingOrders: errorLoadingOrders,\r\n        loadingOrders: loadingOrders,\r\n        updateAuth: updateAuth,\r\n        access_token: auth.access_token\r\n    }\r\n\r\n\r\n\r\n\r\n    useEffect(() => {                                                           //checks if the store is empty. If so, do an API request. If data is already there, set it to default ordering\r\n        if(!productsList.length) dispatch(getAllProducts());      \r\n        else dispatch(setDefaultOrder());\r\n\r\n        if(!completeOrders.length && radioState && !emptyCompleteOrders) dispatch(getCompleteOrders(auth.access_token, updateAuth));\r\n\r\n        if(!incompleteOrders.length && !radioState && !emptyIncomplateOrders) dispatch(getIncompleteOrders(auth.access_token, updateAuth));\r\n\r\n    }, [productsList.length, completeOrders.length, incompleteOrders.length, radioState, dispatch, auth.access_token, updateAuth]);\r\n    \r\n    const radioToggle = () => {\r\n        radioState ? setRadioState(false) : setRadioState(true);\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Admin Panel</h2>\r\n            </div>\r\n            <div className=\"container\">\r\n                <div className=\"page-title-holder with-divider\">\r\n                    <h3>Products List</h3>\r\n                </div>\r\n                <div className=\"div-box\">\r\n                    <span>Total Products: {productsList.length}</span>&ensp;\r\n                    <Button type=\"dashed\" onClick = {() => {history.push('/editAddProducts')}}>Add Product</Button>&ensp;\r\n                    <Button type=\"primary\" onClick={() => { history.push('manageProducts');}}>View Full List</Button>\r\n                </div>\r\n                <ProductListAdmin {...productListProps}/>\r\n            </div>\r\n            <div className=\"container\">\r\n                <div className=\"page-title-holder with-divider\">\r\n                    <h3>Orders List</h3>\r\n                </div>\r\n                <div className=\"div-box\">\r\n                    <Radio checked = {!radioState}  onChange={radioToggle}> Show Current Orders </Radio>&emsp;\r\n                    <Radio checked = {radioState} onChange = {radioToggle}> Show Previous Orders </Radio>&emsp;\r\n                    <Button type=\"dashed\" onClick = {navigateAddOrder}>Add Order</Button>&emsp;\r\n                    <Button type=\"primary\" onClick={() => {navigateFullList(radioState)}}>View Full List</Button>\r\n                </div>\r\n                <HomepageAdminOrderList {...ordersListProps}/>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default HomepageAdmin;","export const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 }\r\n};\r\n\r\nexport const tailLayout = {\r\n    wrapperCol: { span: 24 },\r\n};","import { Modal } from 'antd';\r\n\r\nexport const editSuccessModal = () => {\r\n    Modal.success({\r\n        title: \"Success!\",\r\n        content: 'You edited your details successfully!',\r\n        onOk(){window.location.reload() }\r\n    });\r\n}\r\n\r\nexport const editFailModal = () => {\r\n    Modal.error({\r\n        title: \"Something went wrong!\",\r\n        content: \"An error has occured. Please try to make your edits again, or contact support.\",\r\n        onOk(){window.location.reload() }\r\n    });\r\n}\r\n\r\nexport const editConfirmModal = submit => {\r\n    Modal.confirm({\r\n        title: \"Please confirm!\",\r\n        content: \"Are you sure you want to make these changes?\",\r\n        onOk(){return submit()}\r\n    });\r\n}\r\n\r\nexport const changePasswordConfirmModal = submit => {\r\n    Modal.confirm({\r\n        title: \"Please confirm\",\r\n        content: \"Are you sure you want to change your password?\",\r\n        onOk(){ return submit()}\r\n    });\r\n}\r\n\r\nexport const changePasswordSuccess = () => {\r\n    Modal.success({\r\n        title: \"Success!\",\r\n        content: 'You changed your password successfully!'\r\n    });\r\n}\r\n","import { layout, tailLayout } from './FormLayout';\r\nimport { onlyNumbers, _logout, checkPasswordStrength, isWhiteSpace } from '../../_services/SharedFunctions';\r\nimport { Input, Form, Button, Spin } from 'antd';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth, useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\nimport { editSuccessModal, editFailModal, editConfirmModal, changePasswordConfirmModal, changePasswordSuccess } from './Modals';\r\nimport axios from 'axios';\r\n\r\nconst EditCustomer = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [userInfo, setUserInfo] = useState(null);\r\n\r\n    const [form] = useForm();\r\n    const [form2] = useForm();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    useEffect(() => {\r\n        if(userInfo === null){\r\n            setLoading(true);\r\n            const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n\r\n            axios.get('api/user/', config)\r\n            .then(res => { \r\n                setLoading(false);\r\n\r\n                delete res.data.email;      //dont need the email for this page\r\n                setUserInfo(res.data);\r\n\r\n                form.setFieldsValue({ \r\n                    first_name: res.data.first_name,\r\n                    last_name: res.data.last_name,\r\n                    mobile: res.data.mobile\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else{\r\n                    setLoading(false);\r\n                    setError(true);\r\n                }\r\n            })\r\n        }\r\n    }, [auth.access_token, form, updateAuth, userInfo]);\r\n\r\n    const submitEdit = v => {\r\n        if(JSON.stringify(v) === JSON.stringify(userInfo)) return;\r\n\r\n        const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n\r\n        const submit = () => {\r\n            return axios.post('api/user/edit-customer', v, config)\r\n            .then(() => editSuccessModal())\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else editFailModal();\r\n            })\r\n        }\r\n        editConfirmModal(submit);\r\n    }\r\n\r\n    const submitNewPassword = v => {\r\n        const submit = () => {\r\n            const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n\r\n            return axios.post('api/user/change-password', {\r\n                new_password: v.new_password, \r\n                verify_password: v.verify_password\r\n            }, config)\r\n\r\n            .then(() => changePasswordSuccess())\r\n            .catch(err => {\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else if(err.response.status === 400){\r\n                    form2.setFields([{\r\n                            name: 'verify_password',\r\n                            errors: ['Cannot use old password!'],\r\n                    }]);\r\n                }\r\n                else if(err.response.status === 403){\r\n                    form2.setFields([{\r\n                            name: 'verify_password',\r\n                            errors: ['Password incorrect!'],\r\n                        }]);\r\n                }\r\n                else editFailModal();\r\n            });\r\n        }\r\n        changePasswordConfirmModal(submit);\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Edit Customer Details</h2>\r\n            </div>\r\n\r\n            <div className=\"container flex-horizontal-box-container\">\r\n            {\r\n                loading\r\n                ?\r\n                <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\" style={{textAlign: 'center'}}>\r\n                    <Spin size='large'/>\r\n                </div>\r\n                :\r\n                error\r\n                ?\r\n                <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try refreshing page</h1>\r\n                :<>\r\n                    <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-6 div-box box-shadow\">\r\n                        <h3>Customer Information</h3>\r\n                        <Form  {...layout} form={form} onFinish={submitEdit}>\r\n                            <Form.Item\r\n                                label=\"First Name\"\r\n                                name=\"first_name\"\r\n                                rules={[\r\n                                    {\r\n                                        whitespace: true,\r\n                                        required: true, \r\n                                        message: 'Please input your first name!' \r\n                                    }\r\n                                ]}\r\n                            >\r\n                                <Input maxLength={50}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                label=\"Last Name\"\r\n                                name=\"last_name\"\r\n                                rules={[\r\n                                    {\r\n                                        whitespace: true,\r\n                                        required: true, \r\n                                        message: 'Please input your last name!' \r\n                                    }\r\n                                ]}\r\n                            >\r\n                                <Input maxLength={50}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                label=\"Phone\"\r\n                                name=\"mobile\"\r\n                                validateTrigger={['onBlur']}\r\n                                rules={[\r\n                                    {\r\n                                        validator: async (_, phone) => {\r\n                                            if(phone !== undefined && phone !== \"\" && phone.length < 10){\r\n                                                return Promise.reject(new Error('Phone number must be valid!'));\r\n                                            }\r\n                                        },\r\n                                    },\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please input a valid phone number!',\r\n                                        whitespace: true\r\n                                    }\r\n                                ]}\r\n                            >\r\n                                <Input maxLength={10} onChange={e => {onlyNumbers(e, form, 'mobile')}}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item {...tailLayout}>\r\n                                <Button style={{float:'right'}} type=\"primary\" htmlType=\"submit\">Edit</Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                    </div>\r\n\r\n            \r\n                    <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-6 div-box box-shadow\">\r\n                        <h3>Change password</h3>\r\n                        <Form  {...layout} onFinish={submitNewPassword} form={form2}>\r\n                            <Form.Item\r\n                                label=\"Old Password\"\r\n                                name=\"verify_password\"\r\n                                rules={[\r\n                                    {\r\n                                        whitespace: true,\r\n                                        required: true, \r\n                                        message: 'Please input your old password!' \r\n                                    }\r\n                                ]}\r\n                            >\r\n                                <Input.Password maxLength={30}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                label=\"New Password\"\r\n                                name=\"new_password\"\r\n                                validateTrigger={['onBlur']}\r\n                                rules={[\r\n                                    {\r\n                                        whitespace: true,\r\n                                        required: true, \r\n                                        message: 'Please input your new password!' \r\n                                    },\r\n                                    {\r\n                                        validator: async (_, new_password) => {\r\n                                            if(!checkPasswordStrength(new_password) && new_password !== undefined && !isWhiteSpace(new_password)){\r\n                                                return Promise.reject(new Error('Password not strong enough!'));\r\n                                            }\r\n                                        },\r\n                                    },\r\n                                ]}\r\n                            >\r\n                                <Input.Password maxLength={30}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                label=\"Confirm password\"\r\n                                name=\"password_confirm\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please confirm your password!',\r\n                                        whitespace: true\r\n                                    },\r\n                                    ({ getFieldValue }) => ({\r\n                                        validator(_, value) {\r\n                                            if(getFieldValue('new_password') === value || value === undefined) return Promise.resolve();\r\n                                            if(isWhiteSpace(value)) return Promise.resolve();\r\n                                            return Promise.reject(new Error('The two passwords that you entered do not match!'));\r\n                                        },\r\n                                        validateTrigger: 'onSubmit'\r\n                                    })\r\n                                ]}\r\n                            >\r\n                                <Input.Password maxLength={30}/>\r\n                            </Form.Item>\r\n\r\n                            <Form.Item {...tailLayout}>\r\n                                <Button style={{float: 'right'}} type=\"primary\" htmlType=\"submit\">Edit</Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                    </div>\r\n                </>\r\n            }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default EditCustomer;","/*\r\n  Author: Trang Nguyen\r\n  Notes: This file contains utility functions,\r\n    such as the function to round a number to two decimal points\r\n    and format it as a price (e.g. A$100.00)\r\n*/\r\n\r\n// function to format a prices\r\nexport const formatNumber = ( amount ) => {\r\n    if(!amount) amount = 0.0\r\n\r\n    // round to two decimal points\r\n    amount = Math.round((amount + Number.EPSILON) * 100) / 100;\r\n\r\n    const numberFormat = new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'AUD',\r\n      currencyDisplay: 'symbol',\r\n    });\r\n\r\n    return numberFormat.format(amount);\r\n  };","import { Card } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\nimport { formatNumber } from '../../_helpers/utils';\r\nimport placeholderImg from '../../_assets/Images/No_Image.jpg'\r\nconst { Meta } = Card;\r\n\r\nconst Product = props => {\r\n    const productDetails = props.productDetails;\r\n    var descriptionWithPrice = null;\r\n\r\n    if (productDetails.p_description === null ||\r\n            (productDetails.p_description !== null &&\r\n            productDetails.p_description.trim().length === 0 &&\r\n            productDetails.p_description.length === 0)) {\r\n\r\n        descriptionWithPrice = <>\r\n            <span>\r\n                <strong>{formatNumber(productDetails.p_price)}</strong>\r\n            </span>\r\n            <p>&zwnj;</p>\r\n        </>;\r\n\r\n    } else {\r\n        descriptionWithPrice = <>\r\n            <span>\r\n                <strong>{formatNumber(productDetails.p_price)}</strong>\r\n            </span>\r\n            <p>{productDetails.p_description}</p>\r\n        </>;\r\n    }\r\n    \r\n    return (\r\n        <Card className=\"card-shadow-hoverable\"\r\n            tabIndex={0}\r\n            cover={\r\n                <img className=\"cover-img fixed-size\" \r\n                    style={{ cursor: 'pointer' }} \r\n                    alt={(productDetails.p_name === null || (productDetails.p_name !== null && productDetails.p_name.length === 0)) ? \"image for paper bag\" : productDetails.p_name}\r\n                    src={(productDetails.p_image_uri[0] === null || (productDetails.p_image_uri[0] !== null && productDetails.p_image_uri[0].length === 0)) ? placeholderImg : productDetails.p_image_uri[0]}\r\n                    onClick={() => { \r\n                        history.push(`/productDetails?p_code=${productDetails.p_code}&price_id=${productDetails.p_price_id}`) \r\n                    }}\r\n                />\r\n            }>\r\n            <Meta\r\n                title={\r\n                    <span\r\n                        id=\"view-product-title\"\r\n                        onClick={() => {\r\n                            history.push(`productDetails?p_code=${productDetails.p_code}`)\r\n                        }}>\r\n                        {productDetails.p_name}\r\n                    </span>\r\n                }\r\n                description={descriptionWithPrice}\r\n            />\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default Product;\r\n","import Product from './Product';\r\nimport { List } from 'antd';\r\n\r\nconst ProductsList = props => {\r\n    const productDetails = props.productDetails;\r\n\r\n    return (\r\n        <>\r\n            <List className=\"container\"\r\n                grid={{\r\n                    gutter: 6, xs: 1, sm: 2, md: 2, lg: 3, xl: 4, xxl: 5\r\n                }}\r\n                pagination={{\r\n                    showSizeChanger: true,\r\n                    position: 'bottom',\r\n                }}\r\n                dataSource={Object.values(productDetails)}\r\n                renderItem={item => {\r\n                  return(\r\n                    <List.Item>                        \r\n                        <Product key={item} productDetails={item} />\r\n                    </List.Item>\r\n                )}}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProductsList;\r\n","const addSubCategories = (parents, categoriesList) => {\r\n    if (categoriesList == null) {\r\n        console.error(\"Sorry, categories list is null!\")\r\n    } else {\r\n        parents.forEach(parent => {\r\n            parent.title = parent.c_name;\r\n            parent.key = parent._id;\r\n            parent.value = parent._id;\r\n            parent.children = [];\r\n            var childrenList = null;\r\n            childrenList = categoriesList.filter(category => category.path.includes(parent.c_name)); // Filter the children out of the list\r\n            childrenList.forEach(child => {\r\n                categoriesList.splice(categoriesList.indexOf(child), 1); // Remove the children from the categories list\r\n                parent.children.push(child);\r\n            });\r\n            addSubCategories(parent.children, parent.children);\r\n        });\r\n    }\r\n}\r\n\r\nexport const getCategoriesHierarchy = (categories, insideAllCategories) => {\r\n    var copyOfCategories = categories.map(x => x);\r\n    const rootParents = copyOfCategories.filter(category => category.path == null);\r\n    rootParents.forEach(parent => { copyOfCategories.splice(copyOfCategories.indexOf(parent), 1); });\r\n    addSubCategories(rootParents, copyOfCategories);\r\n    return (insideAllCategories ? ([{\r\n        title: 'All Categories',\r\n        value: 'allCategories',\r\n        children: rootParents\r\n    }]) : rootParents);\r\n}","import { Spin, Select, TreeSelect} from 'antd';\r\nimport { SortDescendingOutlined, SortAscendingOutlined, FallOutlined, RiseOutlined } from '@ant-design/icons';\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport ProductsList from './ProductsList';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport { getAllProducts } from '../../_actions/productActions';\r\nimport { getCategoriesHierarchy } from '../../SharedComponents/Categories/CategoriesFunctions';\r\nimport { useParams } from 'react-router-dom';\r\nconst { Option } = Select;\r\n// const { TreeNode } = TreeSelect;\r\n\r\nconst Products = () => {\r\n    const dispatch = useDispatch();\r\n    const { category } = useParams();\r\n\r\n    \r\n\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    const loadingCategory = useSelector(state => state.categoryState.loading);\r\n    const errorCategory = useSelector(state => state.categoryState.error);\r\n    const products = useSelector(state => state.productState.products);\r\n    const loadingProduct = useSelector(state => state.productState.loading);\r\n    const errorProduct = useSelector(state => state.productState.error);\r\n\r\n    const [filteredAndSorted, setFilterAndSorted] = useState(products);\r\n    const [filter, setFilter] = useState(\"allCategories\");\r\n    const [sorted, setSorted] = useState(\"priceAsc\");\r\n\r\n\r\n    const loading = (loadingCategory || loadingProduct) ? true : false; // If either are loading, set loading to true, if not, set to false\r\n    const error = (errorCategory || errorProduct) ? true : false; // If either are errorneous, set error to true, if not, set to false\r\n\r\n    // function to generate the logic for sorting according to user input\r\n    const sortProduct = (product, productToCompare, sortValue) => {\r\n        switch (sortValue) {\r\n            case \"priceAsc\":\r\n                return (product.p_price < productToCompare.p_price ? -1 : 1);\r\n            case \"priceDesc\":\r\n                return (product.p_price < productToCompare.p_price ? 1 : -1);\r\n            case \"alphaDesc\":\r\n                return (product.p_name.toLowerCase() < productToCompare.p_name.toLowerCase() ? 1 : -1);\r\n            case \"alphaAsc\":\r\n                return (product.p_name.toLowerCase() < productToCompare.p_name.toLowerCase() ? -1 : 1);\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    const filterAndSortProduct = () => {\r\n        const parent = categories.find(c => {return c._id === filter});\r\n\r\n        const filterSortChildren = () => {\r\n            const filteredSortedProducts = products\r\n                .filter(e => { \r\n                    return (filter === \"allCategories\") ? true : e.p_categories === filter; \r\n                })\r\n                .sort((a, b) => { \r\n                    return sortProduct(a, b, sorted); \r\n                });\r\n            setFilterAndSorted(filteredSortedProducts);\r\n        }\r\n\r\n        if(parent !== undefined){\r\n            if(parent.path === null){\r\n                const children = categories.filter(c => {return c.path === `,${parent.c_name},`});\r\n\r\n                const prods = products\r\n                .filter(p => {\r\n                    if(children.find(c => { return c._id === p.p_categories; }) === undefined) return false;\r\n                    return true;\r\n                })\r\n                .sort((a, b) => { \r\n                    return sortProduct(a, b, sorted); \r\n                });\r\n                setFilterAndSorted(prods);\r\n            }\r\n            else filterSortChildren();\r\n        }\r\n        else filterSortChildren();   \r\n    };\r\n\r\n    // For preloading data\r\n    useEffect(() => {\r\n        // if (!categories) \r\n            dispatch(getAllCategories());\r\n        // if (!products) \r\n            dispatch(getAllProducts());\r\n        if(category !== undefined){\r\n            setFilter(category); \r\n            filterAndSortProduct()\r\n        }\r\n\r\n    }, [category]);\r\n\r\n    // filter and sort product if product list changes\r\n    useEffect(() => {\r\n        filterAndSortProduct();\r\n    }, [products, filter, sorted]);\r\n\r\n    return (\r\n      <>\r\n        <div className=\"page-title-holder fill\">\r\n            <h2>Our product range</h2>\r\n        </div>\r\n            { error ? <div class=\"container\"><h1 style={{ textAlign: 'center', color: 'red' }}>Could not load data, please try refreshing page!</h1></div> :\r\n                (loading ? <div style={{textAlign: 'center'}}><Spin size=\"large\"></Spin></div> : <>\r\n                    <div className=\"container flex-horizontal-box-container\">\r\n                        <TreeSelect \r\n                            className=\"box-item-xs-12 box-item-sm-6 box-item-md-4 box-item-lg-4 box-item-xl-3\" \r\n                            treeData={getCategoriesHierarchy(categories, true)} \r\n                            placeholder=\"Filter Category\" \r\n                            defaultValue=\"allCategories\" \r\n                            treeDefaultExpandAll \r\n                            onChange={e => {\r\n                           \r\n                                \r\n                         \r\n                                setFilter(e); \r\n                                filterAndSortProduct()\r\n                            }}\r\n                        />\r\n\r\n                        <Select \r\n                            className=\"box-item-xs-12 box-item-sm-6 box-item-md-4 box-item-lg-4 box-item-xl-3\" \r\n                            defaultValue=\"priceAsc\" \r\n                            onSelect={e => {\r\n                                setSorted(e);\r\n                                filterAndSortProduct()\r\n                            }}\r\n                        >\r\n                            <Option value=\"noSort\" disabled><SortAscendingOutlined />Sort By</Option>\r\n                            <Option value=\"alphaAsc\"><SortAscendingOutlined />Sort By: Alphabetically Ascending</Option>\r\n                            <Option value=\"alphaDesc\"><SortDescendingOutlined />Sort By: Alphabetically Descending</Option>\r\n                            <Option value=\"priceAsc\"><RiseOutlined />Sort By: Price Ascending</Option>\r\n                            <Option value=\"priceDesc\"><FallOutlined />Sort By: Price Descending</Option>\r\n                        </Select>\r\n                    </div>\r\n                    <ProductsList key={filteredAndSorted} productDetails={filteredAndSorted} />\r\n                </>)}\r\n      </>\r\n    );\r\n\r\n}\r\n\r\nexport default Products;","import { Carousel } from 'antd';\r\nimport placeholderImg from '../../_assets/Images/No_Image.jpg';\r\n\r\nconst ProductImagesCarousel = props => {\r\n    const productDetails = props.productDetails;\r\n    \r\n    const contentCarousel = () => {\r\n        var returnVal = [];\r\n        if (productDetails && productDetails.p_image_uri && productDetails.p_image_uri.length > 0){\r\n            productDetails.p_image_uri.forEach(uri => {\r\n                returnVal.push(<div>\r\n                    <img src={uri} alt={productDetails.p_code}/>\r\n                </div>)\r\n            });\r\n        } else {\r\n            returnVal.push(\r\n                <div>\r\n                    <img src={placeholderImg} \r\n                        alt={`Product Number: ${productDetails.p_code}`} \r\n                    />\r\n                </div>\r\n            )\r\n        }\r\n        return returnVal;\r\n    }\r\n    return (\r\n        <div className=\"product-details-images box-shadow div-box\">\r\n            <Carousel dotPosition=\"bottom\">\r\n                {contentCarousel()}\r\n            </Carousel>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductImagesCarousel;\r\n","export const ADD_TO_CART = 'ADD_TO_CART';\r\nexport const CLEAR_CART = 'CLEAR_CART';\r\nexport const REMOVE_ITEMS = 'REMOVE_ITEMS';\r\nexport const INCREASE_QUANTITY = 'INCREASE_QUANTITY';\r\nexport const DECREASE_QUANTITY = 'DECREASE_QUANTITY';\r\nexport const SET_SHIPPING_INFO = 'SET_SHIPPING_INFO';\r\nexport const SET_LOADING = 'SET_LOADING';\r\nexport const SET_ERROR = 'SET_ERROR';\r\nexport const LOAD_STRIPE = 'LOAD_STRIPE';\r\nexport const UPDATE_ITEM_INFO = 'UPDATE_ITEM_INFO';","import { \r\n  ADD_TO_CART, SET_LOADING, SET_ERROR, LOAD_STRIPE,\r\n  SET_SHIPPING_INFO, INCREASE_QUANTITY, DECREASE_QUANTITY,\r\n  CLEAR_CART, REMOVE_ITEMS, UPDATE_ITEM_INFO,\r\n} \r\n  from '../_constants/cart.constants'\r\n\r\n// add item to cart action\r\nexport const addToCart = (product, quantity, special_requirements, p_size) => {\r\n  return {\r\n    type: ADD_TO_CART,\r\n    product,\r\n    quantity,\r\n    special_requirements,\r\n    p_size,\r\n  }\r\n}\r\n\r\nexport const setShipping  = (address, email) => {\r\n  return {\r\n    type: SET_SHIPPING_INFO,\r\n    address,\r\n    email,\r\n  }\r\n}\r\n\r\nexport const increaseQuantity = (index) => {\r\n  return {\r\n    type: INCREASE_QUANTITY,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const decreaseQuantity = (index) => {\r\n  return {\r\n    type: DECREASE_QUANTITY,\r\n    index,\r\n  }\r\n}\r\n\r\nexport const removeItems = (invalid_pcodes) => {\r\n  return {\r\n    type: REMOVE_ITEMS,\r\n    invalid_pcodes,\r\n  }\r\n}\r\n\r\nexport const clearCart = () => {\r\n  return {\r\n    type: CLEAR_CART,\r\n  }\r\n}\r\n\r\nexport const updateItemInfo = (items = []) => {\r\n  return {\r\n    type: UPDATE_ITEM_INFO,\r\n    items,\r\n  }\r\n}\r\n\r\nexport const setLoading  = (loading) => {\r\n  return {\r\n    type: SET_LOADING,\r\n    loading,\r\n  }\r\n}\r\n\r\nexport const setError  = (error) => {\r\n  return {\r\n    type: SET_ERROR,\r\n    error,\r\n  }\r\n}\r\n\r\nexport const loadStripeAction = (stripe) => {\r\n  return {\r\n    type: LOAD_STRIPE,\r\n    stripe: stripe,\r\n  }\r\n}","import { Select, Input, Button } from 'antd';\r\nimport { ShoppingOutlined } from '@ant-design/icons';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport React, {useEffect, useState} from 'react';\r\nimport {addToCart} from '../../_actions/cartActions'\r\nimport { formatNumber } from '../../_helpers/utils';\r\n\r\n// quantity can be upto 10\r\nconst quantityOptions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\n\r\nconst ProductMainTitle = props => {\r\n    const { Option } = Select;\r\n    const { TextArea } = Input;\r\n    const productDetails = props.productDetails;\r\n    \r\n    // line items' variables\r\n    const [quantity, setQuantity] = useState((!productDetails) ? 0 : 1);\r\n    const [specialRequirements, setSpecialRequirements] = useState(\"\");\r\n    const [productSize, setProductSize] = useState(\r\n        (!productDetails) ? \"Not Available\" : productDetails.p_size[0]\r\n    );\r\n\r\n    // form event callbacks\r\n    const onQuantityChange = (value) => {\r\n        setQuantity(value);\r\n    }\r\n\r\n    const onRequirementChange = e => {\r\n        setSpecialRequirements(e.target.value);\r\n    }\r\n\r\n    const onSizeChange = (value) => {\r\n        setProductSize(value);\r\n    }\r\n\r\n    const addToCart = (product, quantity, specialRequirements, productSize) => {\r\n        // update cart state\r\n        props.addToCart(product, quantity, specialRequirements, productSize);\r\n    }\r\n\r\n    // dynamic component generators\r\n    const selectionGenerator = (options, onChangeCallback, setDefault) => (\r\n        (!options) ?\r\n        <Select value=\"Not Available\"\r\n            id=\"sizeSelectionComponent\"\r\n            disabled\r\n        >\r\n            <Option value=\"Not Available\">Not Available</Option>\r\n        </Select> :\r\n        <>\r\n            <Select defaultValue={options[0]}\r\n                id=\"sizeSelectionComponent\"\r\n                onChange={onChangeCallback}\r\n            >\r\n                {\r\n                    options.map(element => {\r\n                        return <Option value={element}>{element}</Option>;\r\n                    })\r\n                }\r\n            </Select>\r\n        </>\r\n    );\r\n\r\n    useEffect(() => {\r\n        // get only user input values\r\n        const items = props.items.map(i => {\r\n            return {\r\n                item_code: i.item_code,\r\n                p_size: i.p_size,\r\n                quantity: i.quantity,\r\n                special_requirements: i.special_requirements,\r\n            }\r\n        });\r\n\r\n        // store cart state to local storage\r\n        localStorage.setItem(\"items\", JSON.stringify(items));\r\n\r\n    }, [props.total, props.items]);\r\n\r\n    return (\r\n        <div className=\"product-details-main-title\">\r\n            <h3 id=\"product-name\">{productDetails && productDetails.p_name}</h3>\r\n            <div id=\"product-price\">\r\n                <strong>Price: {formatNumber(productDetails.p_price)} </strong>\r\n                <br/>\r\n                <strong>Unit per Item: {productDetails.p_unit} </strong>\r\n            </div>\r\n            <div id=\"quantity-selection\">\r\n                <label htmlFor=\"quantitySelectionComponent\">Quantity: </label>\r\n                {\r\n                    selectionGenerator(\r\n                        ((!productDetails.p_code)? null : quantityOptions),\r\n                        onQuantityChange\r\n                    )\r\n                }\r\n            </div>\r\n            <div id=\"size-selection\">\r\n                <label htmlFor=\"sizeSelectionComponent\">Size: </label>\r\n                {\r\n                    selectionGenerator(productDetails.p_size, onSizeChange)\r\n                }\r\n            </div>\r\n            <div id=\"special-requirements\">\r\n                <label htmlFor=\"specialRequirementsField\">Special Requirements:</label>\r\n                <TextArea\r\n                    id=\"specialRequirementsField\"\r\n                    placeholder=\"Please specify any special requirement\r\n                    (e.g: Red Bag with a Rooster Icon on the front).\r\n                    (Max length: 100)\"\r\n                    maxLength={100}\r\n                    rows={3}\r\n                    showCount\r\n                    onChange={onRequirementChange}\r\n                />\r\n            </div>\r\n            <br/>\r\n            <Button type=\"primary\" icon={<ShoppingOutlined />} size=\"large\"\r\n                onClick={()=>\r\n                    {\r\n                        addToCart(productDetails, quantity, specialRequirements, productSize)\r\n                    }}\r\n            >\r\n                Add to Cart\r\n            </Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n      items: state.cartState.items,\r\n      total: state.cartState.total,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n    return{\r\n      addToCart:\r\n        (product, quantity, specialRequirements, productSize) => {\r\n            dispatch(addToCart(product, quantity, specialRequirements, productSize))\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductMainTitle);\r\n","import { Button } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\n\r\nconst ProductDescription = props => {\r\n    const productDetails = props.productDetails;\r\n\r\n    return (\r\n        <div className=\"product-details-description\">\r\n            <h4>Description</h4>\r\n            <p id=\"description-content\">\r\n                {productDetails && productDetails.p_description ?\r\n                    productDetails.p_description :\r\n                    <em>Sorry, no description is available for this product!</em>}\r\n            </p>\r\n            <span id=\"product-code\">\r\n                <em>Product Code: {productDetails && productDetails.p_code}</em>\r\n            </span>\r\n            <span id=\"enquire-span\">\r\n                <Button type=\"primary\"\r\n                    onClick={() => { history.push('ContactUs') }}>\r\n                    Inquire\r\n                </Button> Click here for more information on how to send us your product enquiry.\r\n            </span>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductDescription;\r\n","import { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getProductDetails } from '../../_actions/productActions';\r\nimport ProductImagesCarousel from './ProductImagesCarousel';\r\nimport ProductMainTitle from './ProductMainTitle';\r\nimport ProductDescription from './ProductDescription';\r\nimport { Spin, Divider } from 'antd';\r\n\r\nconst ProductDetails = props => {\r\n    // current product detail state\r\n    const dispatch = useDispatch();\r\n\r\n    const productDetails = useSelector(state => state.productDetailsState.product);\r\n    const isLoading = useSelector(state => state.productDetailsState.isLoading);\r\n    const error = useSelector(state => state.productDetailsState.error);\r\n    \r\n    // Function for retrieving product code from URL params\r\n    const getProductCode = () => {\r\n        // get the query string (e.g. ?p_code=123&price_id=)\r\n        const queryString = window.location.search;\r\n        // get param values\r\n        const urlParams = new URLSearchParams(queryString);\r\n        const p_code = urlParams.get('p_code');\r\n\r\n        // check if p_code is defined and is not an empty string\r\n        if (p_code && p_code !== \"\") {\r\n            // setProductCode(p_code);\r\n            return p_code;\r\n        }else{\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    // Init productCode based on URI's param\r\n    const [productCode, setProductCode] = useState(getProductCode());\r\n\r\n    // Retrieving the details of the p_code\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0); // scroll to top on page load\r\n        dispatch(getProductDetails(productCode));\r\n    }, []);\r\n    \r\n    return (<>\r\n        { (isLoading) ?\r\n          <>\r\n            <br/>\r\n            <div align=\"center\">\r\n                <Spin size='large'/> <br/>\r\n                Loading data... Please wait!\r\n            </div>\r\n          </> :\r\n          ((!productDetails || productDetails.success === false)  ? \r\n            <h4 style={{color: \"red\", textAlign:\"center\"}} > \r\n                <br/>\r\n                Could not load data. <br/>\r\n                {\r\n                    !productDetails?\r\n                        \"Please refresh the page!\" : productDetails.message\r\n                }\r\n            </h4> : \r\n            <>\r\n                <div className=\"container with-top-padding flex-horizontal-box-container\">\r\n                    <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-6 box-item-lg-6 box-item-xl-6\">\r\n                        <ProductImagesCarousel key={productDetails}\r\n                            productDetails={productDetails}/>\r\n                    </div>\r\n                    <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-6 box-item-lg-6 box-item-xl-6\">\r\n                        <ProductMainTitle key={productDetails}\r\n                            productDetails={productDetails} />\r\n                    </div>\r\n                    <Divider/>\r\n                    <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n                        <ProductDescription key={productDetails}\r\n                            productDetails={productDetails}/>\r\n                    </div>\r\n                </div>\r\n            </>)\r\n        }\r\n    </>);\r\n};\r\n\r\nexport default ProductDetails;","import axios from 'axios';\r\nimport { \r\n    GET_COMPANY_INFO, \r\n    SET_COMPANY_INFO, \r\n    LOADING_COMPANY_INFO \r\n} from '../_constants/actionTypes.constants';\r\n\r\nexport const getCompanyInfo = () => dispatch => {\r\n    dispatch({\r\n        type: LOADING_COMPANY_INFO\r\n    });\r\n    \r\n    return axios.get('/api/aboutus/')\r\n        .then(res => {\r\n            dispatch({\r\n                type: GET_COMPANY_INFO,\r\n                payload: res.data\r\n            });\r\n\r\n            dispatch({\r\n                type: LOADING_COMPANY_INFO\r\n            });\r\n\r\n            return res;\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n\r\n            dispatch({\r\n                type: LOADING_COMPANY_INFO\r\n            });\r\n\r\n            return err;\r\n        });\r\n}\r\n\r\nexport const setCompanyInfo = newInfo => dispatch => {\r\n    return axios.post('/api/aboutus/edit-info', newInfo)\r\n        .then(res => {\r\n            if(res.data.success){\r\n                dispatch({\r\n                    type: SET_COMPANY_INFO,\r\n                    payload: newInfo\r\n                });\r\n                return res;\r\n            }\r\n            else{\r\n                console.log(res);\r\n                return res;\r\n            } \r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        });\r\n}","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getCompanyInfo } from '../../_actions/companyInfoActions';\r\n\r\nconst DeliveryDispatch = () =>{\r\n\r\n    const companyInfo = useSelector(state => state.companyInfoState.companyInfo);\r\n    const dispatch = useDispatch();\r\n    \r\n    useEffect(() => {\r\n        if(Object.keys(companyInfo).length === 0 && companyInfo.constructor === Object){\r\n            dispatch(getCompanyInfo());\r\n        }\r\n    }, [dispatch, companyInfo]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Delivery and Dispatch</h2>\r\n            </div>\r\n            <div className=\"container\">\r\n                <p style={{textAlign: 'center'}}>{companyInfo.c_delivery}</p>\r\n            </div>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default DeliveryDispatch;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {Button, Input,Typography} from 'antd';\r\nimport {PhoneFilled,EnvironmentFilled, MailFilled} from '@ant-design/icons';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getCompanyInfo } from '../../_actions/companyInfoActions';\r\n\r\nconst { Title } = Typography;\r\n\r\n\r\n\r\nconst ContactUs = () =>{\r\n\r\n  const companyInfo = useSelector(state => state.companyInfoState.companyInfo);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n      if(Object.keys(companyInfo).length === 0 && companyInfo.constructor === Object){\r\n          dispatch(getCompanyInfo());\r\n      }\r\n  }, [dispatch, companyInfo]);\r\n\r\n  console.log(companyInfo);\r\n  return (\r\n\t\t<>\r\n\t\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t\t<h2>We'd love to hear from you</h2>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<Title level={3}>You can contact us via:</Title>\r\n\t\t\t\t<Title level={3}><PhoneFilled />{`: ${companyInfo.c_number}`}</Title>\r\n\t\t\t\t<Title level={3}><MailFilled />{`: ${companyInfo.c_email}`}</Title>\r\n\t\t\t\t<Title level={3}><EnvironmentFilled />{`: ${companyInfo.c_address}`}</Title>\r\n\t\t\t</div>\r\n\t\t</>\r\n  );\r\n}\r\nexport default ContactUs\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { useEffect } from 'react';\r\nimport { getCompanyInfo } from '../../_actions/companyInfoActions';\r\n\r\nconst TermsConditions = () =>{\r\n    const companyInfo = useSelector(state => state.companyInfoState.companyInfo);\r\n    const dispatch = useDispatch();\r\n    console.log(companyInfo);\r\n    \r\n    useEffect(() => {\r\n        if(Object.keys(companyInfo).length === 0 && companyInfo.constructor === Object){\r\n            dispatch(getCompanyInfo());\r\n        }\r\n    }, [dispatch, companyInfo]);\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t\t<h2>Terms {\"&\"} Conditions</h2>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<p style={{textAlign: 'center'}}>{`${companyInfo.c_TandC}`}</p>\r\n\t\t\t</div>\r\n\t\t</>\r\n    )\r\n}\r\n\r\nexport default TermsConditions\r\n","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getCompanyInfo } from '../../_actions/companyInfoActions';\r\n\r\nconst Blog = () => {\r\n\r\n    const companyInfo = useSelector(state => state.companyInfoState.companyInfo);\r\n    const dispatch = useDispatch();\r\n    \r\n    useEffect(() => {\r\n        if(Object.keys(companyInfo).length === 0 && companyInfo.constructor === Object){\r\n            dispatch(getCompanyInfo());\r\n        }\r\n    }, [dispatch, companyInfo]);\r\n\r\n    return(<>\r\n        <div className=\"page-title-holder fill\">\r\n            <h2>Company Blog</h2>\r\n        </div>\r\n        <div className=\"container\">\r\n            <p style={{textAlign: 'center'}}>{companyInfo.c_blog}</p>\r\n        </div>\r\n    </>)\r\n}\r\n\r\nexport default Blog;","import '../../_assets/CSS/pages/EmailRequest/EmailRequest.css';\r\nimport { Form, Input, Button, Modal } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport axios from 'axios';\r\nimport { validateEmail } from '../../_services/SharedFunctions';\r\nimport { useState } from 'react';\r\n\r\nconst { info } = Modal;\r\n\r\n\r\n\r\n\r\n\r\n//Layout stuff\r\nconst layout = {\r\n    labelCol: {\r\n      span: 8,\r\n    },\r\n    wrapperCol: {\r\n      span: 7,\r\n    },\r\n};\r\n\r\nconst tailLayout = {\r\n    wrapperCol: {\r\n      offset: 8,\r\n      span: 16,\r\n    },\r\n};\r\n\r\n\r\n\r\n\r\n\r\nconst showEmailSent = (email) => {\r\n    info({\r\n        title: 'Email Sent!',\r\n        content: (\r\n            <span>\r\n                A link has been sent to {`${email}`}. Please click this link to reset your password. \r\n                If you cannot find the email, check your spam folder or contact support.\r\n            </span>\r\n        ),\r\n        onOk() {\r\n            history.push('/login');\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst EmailRequest = () => {\r\n    const [form] = useForm();\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n\r\n\r\n\r\n    const sendRequest = () => {\r\n        const email = form.getFieldValue('email').toLowerCase();\r\n        \r\n        if(!validateEmail(email))  return Promise.reject(new Error('Not a valid email!'));\r\n\r\n        setLoading(true);\r\n\r\n        return axios.post('api/user/forgot-password', {email: email})\r\n        .then(() => {\r\n            setLoading(false);\r\n            showEmailSent(email);\r\n        })\r\n        .catch(err => {\r\n            setLoading(false);\r\n            console.log(err);\r\n            return Promise.reject(new Error('Could not find email in our system!'));\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    \r\n    return (\r\n        <div>\r\n            <div style = {{height: \"5px\"}}/>\r\n\r\n            <div className=\"emailrequest-text-wrapper\">\r\n                <h1 className=\"emailrequest-text\">Login</h1>\r\n            </div>\r\n\r\n            <div id=\"emailrequest-devider-1\"/>\r\n\r\n            <div className=\"emailrequest-text-wrapper\">\r\n                <div className=\"emailrequest-text\" style={{fontSize: \"17px\"}}>\r\n                    Enter your email and we will send a reset password link to your registered email address\r\n                </div>\r\n            </div>\r\n           \r\n            <div style = {{height: \"25px\"}}/>\r\n\r\n            <Form\r\n                form={form}\r\n                {...layout}\r\n                name=\"Email-Request-Form\"\r\n            >\r\n                <Form.Item\r\n                    label=\"Email\"\r\n                    name=\"email\"\r\n                    rules={[\r\n                        {\r\n                            validator: sendRequest,\r\n                            validateTrigger: \"onSubmit\"\r\n                        }\r\n                    ]}\r\n                >\r\n                    <Input />\r\n                </Form.Item>\r\n                \r\n                <Form.Item {...tailLayout}>\r\n                    <Button loading={loading} type=\"primary\" htmlType=\"submit\"> Submit </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EmailRequest;","import { Form, Input, Button, Modal, Tooltip} from 'antd';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { checkPasswordStrength } from '../../_services/SharedFunctions';\r\nimport { history } from '../../_helpers/history';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\n//Layout stuff//\r\nconst layout = {\r\n    labelCol: {\r\n      span: 8\r\n    },\r\n    wrapperCol: {\r\n      span: 14\r\n    }\r\n};\r\n\r\nconst actionButtonsLayout = {\r\n    wrapperCol: {\r\n        span: 22\r\n    }\r\n};\r\n\r\nconst successReset = () => {\r\n    Modal.success({\r\n        title: 'Password reset!',\r\n        content: 'Confirmation has been sent to your email address. You can now use this password to log into your account.',\r\n        onOk() {\r\n            history.push('/login');\r\n        }\r\n    });\r\n}\r\n\r\nconst somethingWentWrong = () => {\r\n    Modal.error({\r\n        title: 'Something went wrong!',\r\n        content: 'Please try try sending your forgotten password request again or contact support',\r\n        onOk() {\r\n            history.push('/emailRequest');\r\n        }\r\n    });\r\n}\r\n\r\nconst ReenterPassword = () => {\r\n    const {token, email} = useParams();\r\n    const [form] = useForm();\r\n    const [toolTipVisible, setToolTipVisible] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    if(token === undefined || email === undefined) somethingWentWrong();\r\n\r\n    console.log(\"token\", token);\r\n    console.log(email, email);\r\n\r\n    const submitNewPassword = (_, confirmPassword) => {\r\n        const new_password = form.getFieldValue('password');\r\n\r\n        if(!confirmPassword) return Promise.resolve();\r\n        if(new_password !== confirmPassword ) return Promise.reject(new Error('Passwords do not match'));\r\n        if(!checkPasswordStrength(confirmPassword)){\r\n            setToolTipVisible(true);\r\n            return Promise.reject(new Error('Password not strong enough'));\r\n        } \r\n\r\n        const body = {\r\n            new_password: new_password,\r\n            email: email,\r\n            token: token\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        return axios.post('/api/user/reset-password-email', body)\r\n        .then(() => {\r\n            setLoading(false);\r\n            successReset();\r\n        })\r\n        .catch(err => {\r\n            setLoading(false);\r\n            console.log(err);\r\n            if(err.response.status === 400) return Promise.reject(new Error('Cannot use previous password!'));\r\n            else somethingWentWrong();\r\n        });\r\n    }\r\n\r\n  \r\n    return (\r\n        <div>\r\n            <div className=\"page-title-holder with-divider center-page\">\r\n                <h1>Re-enter Password</h1>\r\n            </div>\r\n\r\n            <Form\r\n                {...layout}\r\n                name=\"authentication-form\"\r\n                form={form}\r\n            >\r\n                <Tooltip \r\n                    visible={toolTipVisible} \r\n                    title=\"Password must contain at least 8 characters, a special charater, a number, and an upper case letter\"\r\n                >\r\n                    <Form.Item\r\n                        label=\"New Password\"\r\n                        name=\"password\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input your new password!',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input.Password maxLength={50} onFocus={() => {setToolTipVisible(false)}}/> \r\n                    </Form.Item>\r\n                </Tooltip>\r\n\r\n                <Form.Item\r\n                    label=\"Confirm Password\"\r\n                    name=\"confirmPassword\"\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Please confirm your password!',\r\n                        },\r\n                        {\r\n                            validator: submitNewPassword,\r\n                            validateTrigger: \"onSubmit\"\r\n                        }\r\n                    ]}\r\n                >\r\n                    <Input.Password maxLength={50}/>   \r\n                </Form.Item >\r\n                \r\n                \r\n                <Form.Item {...actionButtonsLayout}>\r\n                    <Button loading={loading} type=\"primary\" htmlType=\"submit\">Reset</Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ReenterPassword;","import React, { useContext, useEffect, useState } from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { Button, Input } from 'antd';\r\nimport {PlusOutlined, MinusOutlined, RestOutlined } from '@ant-design/icons';\r\nimport { formatNumber } from '../../_helpers/utils';\r\nimport { decreaseQuantity, increaseQuantity } from '../../_actions/cartActions'\r\nimport placeholderImg from '../../_assets/Images/No_Image.jpg';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst CartItem = (props) => {\r\n  // getting the props values\r\n  const editable = props.editable;\r\n  const product = props.product;\r\n  const index = props.index;\r\n\r\n  const [quantityState, setQuantityState] = useState(product.quantity);\r\n\r\n  const increase = () => {\r\n    // update the quantity displayed\r\n    setQuantityState(quantityState + 1);\r\n\r\n    // update site's state\r\n    props.increase(index);\r\n  }\r\n\r\n  const decrease = () => {\r\n    // update the displayed quantity\r\n    setQuantityState(quantityState - 1);\r\n\r\n    // update the site's state\r\n    props.decrease(index);\r\n    \r\n  }\r\n\r\n  return (\r\n    <tr>\r\n        <td>\r\n          <img alt={(!product.item_code) ? \"image of paper bag\" : product.item_code + \"\\'s image\"}\r\n            src= {(!product.p_image_uri) ? placeholderImg : product.p_image_uri} \r\n            height=\"160px\" width=\"120px\" \r\n            style={{objectFit:'scale-down'}}\r\n          />\r\n          <br/>\r\n          <span>\r\n            <em>{product.p_name}</em>\r\n          </span>\r\n        </td>\r\n        <td>{formatNumber(product.unit_price)}</td>\r\n        <td>{product.p_size}</td>\r\n        <td>\r\n            { \r\n              editable &&\r\n                <Button \r\n                  onClick={() => increase()}\r\n                  icon={<PlusOutlined />} \r\n                  type=\"primary\"\r\n                />\r\n            }\r\n            <br/>\r\n            {quantityState}\r\n            <br/>\r\n            {\r\n              editable &&\r\n                <Button \r\n                  onClick={() => decrease()}\r\n                  icon={<MinusOutlined />} \r\n                  type=\"secondary\"\r\n                />\r\n            }\r\n        </td>\r\n        <td>\r\n          <TextArea \r\n            placeholder={\"No Special Requirements\"}\r\n            rows={4} maxLength={100}\r\n            autoSize={{ minRows: 4, maxRows: 4 }}\r\n            disabled={true}\r\n            value={\r\n              (!product.special_requirements) ? \"\" : product.special_requirements}\r\n          >\r\n          </TextArea>\r\n        </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n  return{\r\n    increase: (index) => {dispatch(increaseQuantity(index))},\r\n    decrease: (index) => {dispatch(decreaseQuantity(index))},\r\n  }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(CartItem);\r\n","/*\r\n  - Author: Trang Nguyen\r\n  - A list of Cart Items that will be validated and updated on render.\r\n*/\r\n\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport { connect, useSelector } from 'react-redux';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport { Modal, Spin } from 'antd';\r\nimport axios from 'axios';\r\nimport CartItem from './CartItem';\r\nimport { removeItems, updateItemInfo, setLoading, setError } from '../../_actions/cartActions';\r\n\r\nconst CartProducts = (props) => {\r\n    const editable = props.editable\r\n\r\n    // up-to-date product codes\r\n    const [validPCodes, setValidPCodes] = useState(\r\n      // init pCodes with all product codes in cart\r\n      props.line_items.map(li => li.item_code)\r\n    );\r\n    // products that are in cart but no longer available (deleted)\r\n    const [invalidProducts, setInvalidProducts] = useState([]);\r\n    // product info pulled from database using product codes in cart\r\n    const [productInfo, setProductInfo] = useState([]);\r\n\r\n    // component states\r\n    const [isLoading, setLoadingState] = useState(true);\r\n    // state if the invalid products have been removed from cart\r\n    const [invalidRemoved, setInvalidRemoved] = useState(false);\r\n\r\n    console.log({items: props.line_items})\r\n    console.log({valid: validPCodes})\r\n    console.log({invalid: invalidProducts})\r\n    console.log({res: productInfo})\r\n\r\n    function filterInavlidProducts() {\r\n      if(validPCodes \r\n          && validPCodes.length !== props.line_items.length)\r\n      {\r\n        let invalid1 = props.line_items\r\n          .filter((li) => {\r\n            return !validPCodes.includes(li.item_code);\r\n          })\r\n          .map(li => {return {item_code: li.item_code, p_size: li.p_size}});\r\n        \r\n        // add to invalid array\r\n        setInvalidProducts(invalid1);\r\n\r\n        // find products that have correct p_code but incorrect p_size\r\n        let invalid2 = [];\r\n        productInfo.forEach(p => {\r\n          props.line_items\r\n            .filter(li => {\r\n              return (li.item_code === p.p_code && !p.p_size.includes(li.p_size))\r\n            })\r\n            .forEach(li => {\r\n              invalid2 = [...invalid2, {item_code: li.item_code, p_size: li.p_size}];\r\n            });\r\n        }); \r\n\r\n        // add to invalid array\r\n        invalid2.forEach(element => {\r\n          setInvalidProducts([...invalidProducts, element]);\r\n        });\r\n        \r\n      }\r\n    }\r\n\r\n    useEffect(() => {\r\n      // update cart items' info\r\n      axios\r\n        .post('/api/products/validate-products', {\r\n          p_codes: props.line_items.map(li => li.item_code)\r\n        })\r\n        .then(res => {\r\n          // update information in cart\r\n          props.updateItemInfo(res.data.valid_pcodes);\r\n          setProductInfo(res.data.valid_pcodes);\r\n\r\n          if(res.data.valid_pcodes){\r\n            setValidPCodes(res.data.valid_pcodes.map(p => p.p_code));\r\n            \r\n          }else{\r\n            setValidPCodes([]);\r\n          }\r\n          console.log({res: res})\r\n          setLoadingState(false);\r\n\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          setLoadingState(false);\r\n        })\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n\r\n      filterInavlidProducts();\r\n\r\n    }, [validPCodes]);\r\n\r\n    useEffect(() => {\r\n      // update information in cart\r\n      props.updateItemInfo(productInfo);\r\n\r\n      // get only user input values\r\n      const items = props.line_items.map(i => {\r\n          return {\r\n              item_code: i.item_code,\r\n              p_size: i.p_size,\r\n              quantity: i.quantity,\r\n              special_requirements: i.special_requirements,\r\n          }\r\n      });\r\n\r\n      // store cart state to local storage\r\n      localStorage.setItem(\"items\", JSON.stringify(items));\r\n\r\n    }, [props.line_items, props.total])\r\n   \r\n    const itemList = () => {\r\n      var items = [];\r\n      if(props.line_items){\r\n        for(var i = 0; i < props.line_items.length; i++){\r\n          items.push(\r\n            <>\r\n              <CartItem \r\n                key={props.line_items[i]}\r\n                product={props.line_items[i]}\r\n                editable={editable}\r\n                index={i}\r\n              />\r\n            </>\r\n          )\r\n        }\r\n      }\r\n      \r\n      return items;\r\n    }\r\n\r\n    // on confirming, remove invalid products in cart\r\n    const removeItems = (invalidProds) => {\r\n      // remove invalid products\r\n      console.log(\"OK\");\r\n      props.removeItems(invalidProds);\r\n      setInvalidRemoved(true);\r\n      \r\n    };\r\n\r\n    // popup for when an invalid product exists in cart\r\n    const infoModal = (invalidProds, validProds) => {\r\n      Modal.info({\r\n        title: 'Unavailable Products exist in Cart',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: (\r\n          <div>\r\n            <p>\r\n              The following products in your Cart are outdated or no longer available: \r\n            </p>\r\n            <ul>\r\n              {\r\n                invalidProds.map((prod, index) => (\r\n                  <li key={`${prod.item_code} ${index}`} >\r\n                    {`Product Code: ${prod.item_code} (Product Size: ${prod.p_size})`}\r\n                  </li>\r\n                ))\r\n              }\r\n            </ul>\r\n            <p>Please remove them from your Cart!</p>\r\n          </div>\r\n          \r\n        ),\r\n        okText: 'Remove Items',\r\n        onOk () { removeItems(invalidProds) }\r\n      });\r\n    }\r\n\r\n    return (<>\r\n        {\r\n          isLoading ?\r\n            <tr>\r\n              <td colSpan={5}>\r\n                <h3 style={{textAlign: 'center'}}>\r\n                  Fetching your Cart Items. . .\r\n                  <br/>\r\n                  Thank you for your patience!<br/><Spin size='large'/>\r\n                </h3>\r\n              </td>\r\n            </tr>\r\n          :\r\n          (        \r\n            !invalidRemoved ?\r\n              (\r\n                (invalidProducts.length > 0) ? \r\n                 infoModal(invalidProducts, validPCodes) : itemList()\r\n              ) : \r\n              itemList()\r\n          )\r\n        }\r\n        </>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n  return{\r\n    line_items: state.cartState.items,\r\n    total: state.cartState.total,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n  return{\r\n    removeItems: (invalid_pcodes) => {dispatch(removeItems(invalid_pcodes))},\r\n    updateItemInfo: (items) => {dispatch(updateItemInfo(items))},\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CartProducts);\r\n","export default __webpack_public_path__ + \"static/media/visa.562a774f.png\";","export default __webpack_public_path__ + \"static/media/mastercard.e84e92d4.jpg\";","/*\r\n    - Author: Trang Nguyen\r\n    - All child components of the Cart Page will be rendered here.\r\n*/\r\n\r\nimport React, { useContext, useEffect } from 'react';\r\nimport {connect} from 'react-redux';\r\nimport CartProducts from './CartProducts';\r\nimport { formatNumber } from '../../_helpers/utils';\r\nimport { Button } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport visa from \"../../_assets/Images/visa.png\"\r\nimport mastercard from \"../../_assets/Images/mastercard.jpg\"\r\nimport alipay from \"../../_assets/Images/Alipay.png\"\r\nimport { clearCart } from '../../_actions/cartActions';\r\n\r\nconst Cart = (props) =>{\r\n    const itemCount = props.cartItems.length;\r\n    const subTotal = props.total;\r\n    const GST = subTotal / 11;\r\n    const freightCharge = subTotal * 0.1;\r\n    const grandTotal = subTotal + freightCharge;\r\n\r\n    const clearCart = () => {\r\n        props.clearCart();\r\n    }\r\n\r\n    // useEffect(() => {\r\n    //     // get only user input values\r\n    //     const items = props.cartItems.map(i => {\r\n    //         return {\r\n    //             item_code: i.item_code,\r\n    //             p_size: i.p_size,\r\n    //             quantity: i.quantity,\r\n    //             special_requirements: i.special_requirements,\r\n    //         }\r\n    //     });\r\n\r\n    //     // store cart state to local storage\r\n    //     localStorage.setItem(\"items\", JSON.stringify(items));\r\n\r\n    // }, [props.cartItems, props.total])\r\n  \r\n    return(<>\r\n        <div className=\"page-title-holder fill\">\r\n            <h2>Shopping Cart</h2>\r\n        </div>\r\n        <div className=\"container flex-horizontal-box-container\" id=\"cart-content-page\">\r\n            <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-8 box-item-xl-9 box-shadow table-container\">\r\n                <table className=\"center-content\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Product</th>\r\n                            <th>Unit Price</th>\r\n                            <th>Size</th>\r\n                            <th>Quantity</th>\r\n                            <th>Special Requirements</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                          itemCount > 0 ? \r\n                            <CartProducts key={props.cartItems} editable={true} /> \r\n                            : \r\n                            <tr>\r\n                                <td colSpan={5}>\r\n                                    <h3 style={{textAlign: 'center'}}>\r\n                                        Your cart is empty! :(\r\n                                    </h3>\r\n                                </td>\r\n                            </tr> \r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-4 box-item-xl-3 box-shadow\">\r\n                <h4>Order Summary</h4>\r\n                <table>\r\n                    <tbody>\r\n                        <tr className=\"non-hover\">\r\n                            <td><strong>Total items:</strong></td>\r\n                            <td>{itemCount}</td>\r\n                        </tr>\r\n                        <tr className=\"non-hover\">\r\n                            <td><strong>Subtotal (incl. GST):</strong></td>\r\n                            <td>{formatNumber(subTotal)}</td>\r\n                        </tr>\r\n                        <tr className=\"non-hover\">\r\n                            <td><strong>GST:</strong></td>\r\n                            <td>{formatNumber(GST)}</td>\r\n                        </tr>\r\n                        <tr className=\"non-hover\">\r\n                            <td><strong>Freight charge:</strong></td>\r\n                            <td>{formatNumber(freightCharge)}</td>\r\n                        </tr>\r\n                        <tr className=\"non-hover\">\r\n                            <td><strong>Grand total:</strong></td>\r\n                            <td>{formatNumber(grandTotal)}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <Button \r\n                    type=\"secondary\" \r\n                    disabled={itemCount < 1} onClick={clearCart}>\r\n                        Clear Cart\r\n                </Button>\r\n\r\n                &emsp;\r\n\r\n                <Button type=\"primary\" disabled={itemCount < 1}>\r\n                    <Link to=\"/CheckoutShipping\">Checkout</Link>\r\n                </Button>\r\n                <div id=\"cart-content-page-accept-payment\">\r\n                    <strong><em>We accept the following: </em></strong>\r\n                    <img src={visa} alt=\"Visa\"/>\r\n                    <img src={mastercard} alt=\"Mastercard\"/>\r\n                    <img src={alipay} alt=\"Alipay\"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </>);\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        cartItems: state.cartState.items,\r\n        total: state.cartState.total,\r\n    }\r\n  }\r\n  \r\n  const mapDispatchToProps= (dispatch)=>{\r\n    return{\r\n      clearCart: () => {dispatch(clearCart())},\r\n    }\r\n  }\r\n  \r\n  \r\n  export default connect(mapStateToProps,mapDispatchToProps)(Cart);\r\n","export default \"data:image/png;base64,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\"","import React from 'react';\r\nimport { Form, Input, Button, Steps, Select, InputNumber } from 'antd';\r\nimport { CaretLeftOutlined } from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { history } from '../../_helpers/history';\r\nimport { setShipping } from '../../_actions/cartActions';\r\n\r\nconst { Option } = Select;\r\nconst { Step } = Steps;\r\n\r\nconst CheckoutShipping = (props) =>{\r\n  const [form] = Form.useForm();\r\n  const address = props.address;\r\n  const email = props.email;\r\n\r\n  const onFinish = (values) => {\r\n    const addressPayload = {\r\n      po_attention_to: values.fullname,\r\n      po_address_line1: values.address_line1,\r\n      po_address_line2: values.address_line2,\r\n      po_suburb: values.suburb,\r\n      po_state: values.state,\r\n      po_postcode: values.postcode,\r\n    };\r\n\r\n    const emailPayload = values.email;\r\n    console.log(addressPayload)\r\n    // update cart state\r\n    props.setShipping(addressPayload, emailPayload);\r\n\r\n    // store input address to local storage\r\n    localStorage.setItem(\"address\", JSON.stringify(addressPayload));\r\n    localStorage.setItem(\"email\", JSON.stringify(emailPayload));\r\n\r\n    // redirect to review order page\r\n    history.push('/checkoutReviewOrder');\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };      \r\n\r\n  return(\r\n    <>\r\n\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t<h2>Checkout</h2>\r\n\t\t</div>\r\n\t\t<div className=\"container flex-horizontal-box-container\">\r\n\t\t\t<Steps current={0} direction=\"vertical\" size=\"small\"\r\n\t\t\tclassName=\"box-item-xs-12 box-item-sm-12 box-item-md-3 box-item-lg-2 box-item-xl-2\">\r\n\t\t\t\t<Step title=\"Shipping Address\"/>\r\n\t\t\t\t<Step title=\"Review Order\"/>\r\n\t\t\t\t<Step title=\"Secure Payment\" />\r\n\t\t\t\t<Step title=\"Order Complete\"/>\r\n\t\t\t</Steps>\r\n\t\t\t<Form\r\n\t\t\t\tlayout={'vertical'}\r\n\t\t\t\tform={form}\r\n\t\t\t\tonFinish={onFinish}\r\n\t\t\t\tonFinishFailed={onFinishFailed}\r\n\t\t\t\trequiredMark={false}\r\n\t\t\t\tclassName=\"box-item-xs-12 box-item-sm-12 box-item-md-9 box-item-lg-10 box-item-xl-10 div-box box-shadow flex-horizontal-box-container\"\r\n\t\t\t\tinitialValues={{\r\n\t\t\t\t\tfullname: address.po_attention_to,\r\n\t\t\t\t\taddress_line1: address.po_address_line1,\r\n\t\t\t\t\taddress_line2: address.po_address_line2,\r\n\t\t\t\t\tsuburb: address.po_suburb,\r\n\t\t\t\t\tstate: address.po_state,\r\n\t\t\t\t\tpostcode: address.po_postcode,\r\n\t\t\t\t\temail: email,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-1 box-item-sm-1 box-item-md-1 box-item-lg-1 box-item-xl-1\">\r\n\t\t\t\t\t<Button type=\"secondary\"><Link to=\"/Cart\"><CaretLeftOutlined />Return to cart</Link></Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\"\r\n\t\t\t\t\tlabel=\"Full Name\"\r\n\t\t\t\t\tname=\"fullname\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"Please enter your full name!\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\"\r\n\t\t\t\t\tlabel=\"Email Address\" \r\n\t\t\t\t\tname=\"email\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: 'Please enter your email!'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-6 box-item-xl-6\"\r\n\t\t\t\t\tlabel=\"Address Line 1\" name=\"address_line1\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true, \r\n\t\t\t\t\t\tmessage: \"Please enter your address line 1\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-6 box-item-xl-6\"\r\n\t\t\t\t\tlabel=\"Address Line 2\"\r\n\t\t\t\t\tname=\"address_line2\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-4 box-item-xl-4\"\r\n\t\t\t\t\tlabel=\"Suburb\" \r\n\t\t\t\t\tname=\"suburb\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: 'Please enter your suburb'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-4 box-item-xl-4\"\r\n\t\t\t\t\tlabel=\"State\" \r\n\t\t\t\t\tname=\"state\"\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: 'Please select a state!'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<Select>\r\n\t\t\t\t\t\t<Option value=\"NSW\">NSW</Option>\r\n\t\t\t\t\t\t<Option value=\"VIC\">VIC</Option>\r\n\t\t\t\t\t\t<Option value=\"ACT\">ACT</Option>\r\n\t\t\t\t\t\t<Option value=\"NT\">NT</Option>\r\n\t\t\t\t\t\t<Option value=\"QLD\">QLD</Option>\r\n\t\t\t\t\t\t<Option value=\"SA\">SA</Option>\r\n\t\t\t\t\t\t<Option value=\"TAS\">TAS</Option>\r\n\t\t\t\t\t\t<Option value=\"WA\">WA</Option>\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-4 box-item-xl-4\"\r\n\t\t\t\t\tlabel=\"Postcode\" \r\n\t\t\t\t\tname=\"postcode\"  \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tmessage: \"Please enter your postcode\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<InputNumber min={200} max={9729} />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t<Button style={{float:'right'}} type=\"primary\" htmlType=\"submit\">Continue</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n  return{\r\n    address: state.cartState.address,\r\n    email: state.cartState.c_email,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n  return{\r\n    setShipping: (address, email) => {dispatch(setShipping(address, email))}\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutShipping);","import { Form,  Button, Steps } from 'antd';\r\nimport React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { CaretLeftOutlined } from '@ant-design/icons';\r\nimport { loadStripeAction, setLoading, setError } from '../../_actions/cartActions';\r\nimport axios from 'axios';\r\n\r\nconst { Step } = Steps;\r\n\r\nconst fetchCheckoutSession = async ({ line_items }) => {\r\n  return fetch('api/stripe/create-checkout-session', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      line_items\r\n    }),\r\n  }).then((res) => res.json());\r\n};\r\n\r\nconst CheckoutSecurePayment = (props) =>{\r\n  const [form] = Form.useForm();\r\n\r\n  // fetch stripe config on page load\r\n  useEffect(() => {\r\n    async function fetchConfig() {\r\n      // Fetch config from our backend.\r\n      const { publicKey, currency } = \r\n        await fetch('api/stripe/config')\r\n        .then((res) => res.json());\r\n      \r\n      // Make sure to call `loadStripe` outside of a components render to avoid\r\n      // recreating the `Stripe` object on every render.\r\n      props.loadStripeAction(await loadStripe(publicKey));\r\n    }\r\n    fetchConfig();\r\n  }, []);\r\n\r\n\r\n  const paymentOnClick = async (event) => {\r\n    // Call your backend to create the Checkout session.\r\n    props.setLoading(true);\r\n    const { sessionId } = await fetchCheckoutSession({\r\n      line_items: props.line_items\r\n    });\r\n\r\n    if(sessionId){\r\n      // When the customer clicks on the button, redirect them to Checkout.\r\n      const { error } = await props.stripe.redirectToCheckout({\r\n        sessionId,\r\n      });\r\n    \r\n      // If `redirectToCheckout` fails due to a browser or network\r\n      // error, display the localized error message to your customer\r\n      // using `error.message`.\r\n      if (error) {\r\n        props.setError(error);\r\n        props.setLoading(false);\r\n      }\r\n\r\n      props.setLoading(false);\r\n    }else{\r\n      props.setError(sessionId);\r\n      props.setLoading(false);\r\n    }\r\n  };\r\n\r\n  return(\r\n    <>\r\n\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t<h2>Checkout</h2>\r\n\t\t</div>\r\n\r\n\t\t<div className=\"container flex-horizontal-box-container\">\r\n\t\t\t<Steps current={2} direction=\"vertical\" size=\"small\"\r\n\t\t\tclassName=\"box-item-xs-12 box-item-sm-12 box-item-md-3 box-item-lg-2 box-item-xl-2\">\r\n\t\t\t\t<Step title=\"Shipping Address\"/>\r\n\t\t\t\t<Step title=\"Review Order\"/>\r\n\t\t\t\t<Step title=\"Secure Payment\" />\r\n\t\t\t\t<Step title=\"Order Complete\"/>\r\n\t\t\t</Steps>\r\n\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-9 box-item-lg-10 box-item-xl-10 div-box box-shadow\">\r\n\t\t\t\t<Button type=\"secondary\"><Link to=\"/checkoutReviewOrder\"><CaretLeftOutlined />Back to Review Order</Link></Button>\r\n\t\t\t\t<h4>Secure Payment</h4>\r\n\t\t\t\t<p>You are about to be redirected to our payment gateway to perform the transaction.</p>\r\n\t\t\t\t<Form layout={'vertical'} form={form} name=\"basic\" requiredMark={false} className=\"flex-horizontal-box-container\">\r\n\t\t\t\t\t<Form.Item className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t<Button style={{float: 'right'}} type=\"primary\"  htmlType=\"submit\" onClick={paymentOnClick}>Continue to Payment Gateway</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    </>\r\n  );\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state)=>{\r\n  return{\r\n      line_items: state.cartState.items,\r\n      stripe: state.cartState.stripe,\r\n      isLoading: state.cartState.loading,\r\n      error: state.cartState.error,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n  return{\r\n     loadStripeAction: (stripe) => {dispatch(loadStripeAction(stripe))},\r\n     setLoading: (loading) => {dispatch(setLoading(loading))},\r\n     setError: (error) => {dispatch(setError(error))},\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CheckoutSecurePayment);","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Button, Steps, Divider, Spin } from 'antd';\r\nimport { CaretLeftOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport CartProducts from '../Cart/CartProducts';\r\nimport { formatNumber } from '../../_helpers/utils';\r\nimport { updateItemInfo } from '../../_actions/cartActions';\r\n\r\nconst { Step } = Steps;\r\n\r\n\r\nconst CheckoutReviewOrder = (props) =>{\r\n  const total = props.total;\r\n  const itemCount = props.cartItems.length;\r\n  const address = props.address;\r\n  const email = props.email;\r\n\r\n\r\n  return(\r\n\t\t<>\r\n\t\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t\t<h2>Checkout</h2>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"container flex-horizontal-box-container\">\r\n\t\t\t\t<Steps current={1} direction=\"vertical\" size=\"small\"\r\n\t\t\t\tclassName=\"box-item-xs-12 box-item-sm-12 box-item-md-3 box-item-lg-2 box-item-xl-2\">\r\n\t\t\t\t\t<Step title=\"Shipping Address\"/>\r\n\t\t\t\t\t<Step title=\"Review Order\"/>\r\n\t\t\t\t\t<Step title=\"Secure Payment\" />\r\n\t\t\t\t\t<Step title=\"Order Complete\"/>\r\n\t\t\t\t</Steps>\r\n\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-9 box-item-lg-10 box-item-xl-10 div-box box-shadow flex-horizontal-box-container\">\r\n\t\t\t\t\t<div className=\"box-item-xs-1 box-item-sm-1 box-item-md-1 box-item-lg-1 box-item-xl-1\">\r\n\t\t\t\t\t\t<Button type=\"secondary\">\r\n\t\t\t\t\t\t\t<Link to=\"/checkoutShipping\"><CaretLeftOutlined />Back to Shipping Address</Link>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t<h4>Shipping Information</h4>\r\n\t\t\t\t\t\t{ address ? <>\r\n\t\t\t\t\t\t\t\t<p><strong>Recipient's Name:&ensp;</strong>{address.po_attention_to}</p>\r\n\t\t\t\t\t\t\t\t<p><strong>Recipient's Address:&ensp;</strong>{ address.po_address_line2 ? <>{address.po_address_line2}/</>: <></>}{address.po_address_line1}, {address.po_suburb}, {address.po_state} {address.po_postcode}</p>\r\n\t\t\t\t\t\t\t\t<p><strong>Recipient's Email:&ensp;</strong>{email}</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<h5>Shipping Address not available.<br/>Please go back to the previous step!</h5>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Divider/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t<h4>Order Summary ({itemCount} items)</h4>\r\n\t\t\t\t\t\t<div className=\"table-container\">\r\n\t\t\t\t\t\t\t<table className=\"center-content\">\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>Product</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Unit Price</th> \r\n\t\t\t\t\t\t\t\t\t\t<th>Size</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Quantity</th> \r\n\t\t\t\t\t\t\t\t\t\t<th>Special Requirements</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t{ itemCount === 0 ? \r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<td colSpan={5}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 style={{textAlign: 'center'}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tYour cart is empty! :(\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr> :\r\n\t\t\t\t\t\t\t\t\t\t<CartProducts key={itemCount} editable={false} />}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Divider/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t<table className=\"right-content\">\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Subtotal:&ensp;</strong>{formatNumber(total)}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>GST:&ensp;</strong>{formatNumber(total*0.01)}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Freight Charge:&ensp;</strong>{formatNumber(total*0.05)}</td></tr>\r\n\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Total:&ensp;</strong>{formatNumber(total*1.06)}</td></tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t<Button type=\"primary\" style={{float:'right'}}>\r\n\t\t\t\t\t\t\t<Link to=\"/checkoutSecurePayment\">Go to payment</Link>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t</>\r\n    );\t\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n  return{\r\n      cartItems: state.cartState.items,\r\n      total: state.cartState.total,\r\n      address: state.cartState.address,\r\n      email: state.cartState.c_email,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n\treturn{\r\n\t  updateItemInfo: (items) => {dispatch(updateItemInfo(items))},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CheckoutReviewOrder);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom'; \r\nimport { connect } from 'react-redux';\r\nimport { Divider, Steps, Spin } from 'antd';\r\nimport { CheckCircleFilled, CloseCircleFilled } from '@ant-design/icons';\r\nimport { formatNumber } from '../../_helpers/utils';\r\nimport CartProducts from '../Cart/CartProducts';\r\nimport { clearCart, setError, setLoading, updateItemInfo } from '../../_actions/cartActions';\r\nimport axios from 'axios';\r\n\r\nconst { Step } = Steps;\r\n\r\n\r\nconst CheckoutOrderComplete = (props) =>{\r\n\r\n  // order fields\r\n  const [total, setTotal] = useState(0);\r\n  const items = props.items;\r\n  const address = JSON.parse(localStorage.getItem(\"address\"));\r\n  const c_email = JSON.parse(localStorage.getItem(\"email\"));\r\n\r\n  // component states\r\n  const [isLoading, setLoadingState] = useState(true);\r\n\r\n  function fetchItemInfo(){\r\n\taxios\r\n        .post('/api/products/validate-products', {\r\n          p_codes: props.items.map(li => li.item_code)\r\n        })\r\n        .then(res => {\r\n          // update information in cart\r\n          props.updateItemInfo(res.data.valid_pcodes);\r\n\r\n\t\t  return res;\r\n        })\r\n        .catch(err => {\r\n\t\t  props.setError(err)\r\n          setLoadingState(false);\r\n        })\r\n  }\r\n\r\n  function fetchCreatOrder(){\r\n\taxios\r\n      .post('/api/orders/create-order', {\r\n        c_email,\r\n        status: \"NEW\",\r\n        items,\r\n        address,\r\n      })\r\n      .then(res => {\r\n        // set loading state to false when done\r\n        setLoadingState(false);\r\n        return res;\r\n      })\r\n      .catch(err => props.setError(err))   \r\n  }\r\n\r\n  useEffect(() => {\r\n\t// load product info\r\n\tfetchItemInfo();\r\n\r\n    // create an order on rendering\r\n    fetchCreatOrder();\r\n\r\n\t// clean up before component unmount\r\n\treturn () => {\r\n\t\tlocalStorage.clear();\r\n\t\tprops.clearCart()\r\n\t} \r\n\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    props.setLoading(isLoading);      \r\n  }, [isLoading])\r\n\r\n  return(<>\r\n\t\t<div className=\"page-title-holder fill\">\r\n\t\t\t<h2>Checkout</h2>\r\n\t\t</div>\r\n\t\t<div className=\"container flex-horizontal-box-container\">\r\n\t\t\t<Steps current={3} direction=\"vertical\" size=\"small\"\r\n\t\t\tclassName=\"box-item-xs-12 box-item-sm-12 box-item-md-3 box-item-lg-2 box-item-xl-2\">\r\n\t\t\t\t<Step title=\"Shipping Address\"/>\r\n\t\t\t\t<Step title=\"Review Order\"/>\r\n\t\t\t\t<Step title=\"Secure Payment\" />\r\n\t\t\t\t<Step title=\"Order Complete\"/>\r\n\t\t\t</Steps>\r\n\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-9 box-item-lg-10 box-item-xl-10 div-box box-shadow flex-horizontal-box-container\">\r\n\t\t\t\t{ isLoading ? \r\n\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\" align=\"center\">\r\n\t\t\t\t\t\t<p><Spin size='large'/></p>\r\n\t\t\t\t\t\t<p>We are processing your order.</p>\r\n\t\t\t\t\t\t<p>Please wait abd <strong>do not close this tab</strong> until your order is processed!</p>\r\n\t\t\t\t\t</div> :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t!items ?\r\n\t\t\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\" align=\"center\">\r\n\t\t\t\t\t\t\t\t<p><CloseCircleFilled style={{ fontSize: '400%', color: 'red'}} /></p>\r\n\t\t\t\t\t\t\t\t<h2>Page Not Found</h2>\r\n\t\t\t\t\t\t\t\t<p>The page you're looking for is unavailable.</p>\r\n\t\t\t\t\t\t\t\t<p>Please click <Link to=\"/\" >here</Link> to continue shopping.</p>\r\n\t\t\t\t\t\t\t</div> :\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\" align=\"center\">\r\n\t\t\t\t\t\t\t\t\t<h3>Order Placed</h3>\r\n\t\t\t\t\t\t\t\t\t<CheckCircleFilled style={{ fontSize: '400%', color: 'green'}} />\r\n\t\t\t\t\t\t\t\t\t<h4><em>Your order has been received and will be processed soon.</em></h4>\r\n\t\t\t\t\t\t\t\t\t<h4>Thank you for choosing us!</h4>\r\n\t\t\t\t\t\t\t\t\t<Divider/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t\t\t\t<h4>Shipping Information</h4>\r\n\t\t\t\t\t\t\t\t\t{ address ? <>\r\n\t\t\t\t\t\t\t\t\t\t\t<p><strong>Recipient's Name:&ensp;</strong>{address.po_attention_to}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p><strong>Recipient's Address:&ensp;</strong>{ address.po_address_line2 ? <>{address.po_address_line2}/</>: <></>}{address.po_address_line1}, {address.po_suburb}, {address.po_state} {address.po_postcode}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p><strong>Recipient's Email:&ensp;</strong>{c_email}</p>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t<h5>Shipping Address not available.<br/>Please go back to the previous step!</h5>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t<Divider/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t\t\t\t<h4>Order Summary</h4>\r\n\t\t\t\t\t\t\t\t\t<div className=\"table-container\">\r\n\t\t\t\t\t\t\t\t\t\t<table className=\"center-content\">\r\n\t\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Product</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Unit Price</th> \r\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Size</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Quantity</th> \r\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Special Requirements</th>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t<CartProducts key={items} editable={false} />\r\n\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<Divider/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-12\">\r\n\t\t\t\t\t\t\t\t\t<table className=\"right-content\">\r\n\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Subtotal:&ensp;</strong>{formatNumber(total)}</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>GST:&ensp;</strong>{formatNumber(total*0.01)}</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Freight Charge:&ensp;</strong>{formatNumber(total*0.05)}</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"non-hover\"><td><strong>Total:&ensp;</strong>{formatNumber(total*1.06)}</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n  </>)\r\n};\r\n\r\nconst mapStateToProps = (state)=>{\r\n\treturn{\r\n\t  items: state.cartState.items,\r\n\t  total: state.cartState.total,\r\n\t}\r\n}\r\n  \r\n\r\nconst mapDispatchToProps= (dispatch)=>{\r\n  return{\r\n    setLoading: (isLoading) => {dispatch(setLoading(isLoading))},\r\n    setError: (err) => {dispatch(setError(err))},\r\n    clearCart: () => {dispatch(clearCart())},\r\n\tupdateItemInfo: (items) => {dispatch(updateItemInfo(items))},\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutOrderComplete);\r\n","/*\r\n  Author: Trang Nguyen, Thinh Thai\r\n  Note: The user will be redirected to this page\r\n    after they cancel a payment\r\n*/\r\n\r\nimport { Link } from 'react-router-dom'; \r\nimport React, { useEffect } from 'react';\r\nimport { CloseCircleFilled } from '@ant-design/icons';\r\nimport { Row } from 'antd';\r\n\r\nconst PaymentCancelled = () =>{\r\n  // clean up when component mounts\r\n  useEffect(() => {\r\n    localStorage.removeItem('address');\r\n    localStorage.removeItem('email');\r\n  }, [])\r\n\r\n    return (\r\n      <>\r\n        <div className=\"page-title-holder fill\">\r\n          <h2>Payment canceled</h2>\r\n        </div>\r\n        <div style={{textAlign: \"center\"}} >\r\n          <br/>\r\n          <Row justify=\"space-around\" align=\"middle\" >\r\n            <p>\r\n              <CloseCircleFilled style={{ fontSize: '400%', color: '#EB6E00'}} />\r\n            </p>\r\n          </Row>\r\n          \r\n          <Row justify=\"space-around\" align=\"middle\" >\r\n            <p>Your have cancelled the payment.</p>\r\n          </Row>\r\n          <Row justify=\"space-around\" align=\"middle\" >\r\n            <p>Please click <Link to=\"/\" >here</Link> to continue shopping.</p>\r\n          </Row>\r\n        </div>\r\n      </>\r\n    )\r\n}\r\n\r\nexport default PaymentCancelled\r\n","import { Button, Descriptions } from 'antd';\r\n\r\nconst OrderView = props => {\r\n    \r\n    if(props.order === null) return <></>\r\n\r\n    const date = new Date(props.order.issued_date);\r\n\r\n    const itemRow = props.order.items.map((item, index) => {\r\n        return (\r\n            <tr key={index}>\r\n                <td>{item.item_code}</td>\r\n                <td>{item.quantity}</td>\r\n                <td><textarea id=\"manage-order-details-panel-special-spec\" disabled>{item.special_requirements}</textarea></td>   \r\n            </tr>\r\n        ); \r\n    })\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container box-shadow\" id=\"manage-order-details-panel\">\r\n                <Button onClick={() => {\r\n                    props.setCurrentOrder(null);\r\n                    props.setPage(0);\r\n                }}>Back to Orders</Button>\r\n                <Descriptions title={<h3>Order Details</h3>}>\r\n                    <Descriptions.Item label=\"Purchase Order Number\">{props.order.po_number}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Customer Email\">{props.order.c_email}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Issue Date\">{`${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Status\">{props.order.status}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Carrier\">{props.order.carrier}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Tracking Number\">{props.order.tracking_number}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Address Line 1\">{props.order.address.po_address_line1}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Address Line 2\">{props.order.address.po_address_line2}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Attention To\">{props.order.address.po_attention_to}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Suburb\">{props.order.address.po_suburb}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"State\">{props.order.address.po_state}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Post Code\">{props.order.address.po_postal_code}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Country\">{props.order.address.po_country}</Descriptions.Item>\r\n                </Descriptions>\r\n                <div className=\"table-container\">\r\n                    <table className=\"center-content\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Item Code</th> \r\n                                <th>Quantity</th>\r\n                                <th>Special Requirements</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {itemRow}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default OrderView;","import { useEffect, useState } from \"react\";\r\nimport { Select, Button, Pagination, Spin } from 'antd';\r\nimport axios from 'axios';\r\nimport { filterOrders, sortOrders } from './Functions';\r\nimport { orderStatusConstants } from '../../_constants/orderStatus.constants';\r\nimport OrderView from './OrderView';\r\nimport { useAuth, useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\nconst {OptGroup, Option} = Select;\r\nconst itemsPerPage = 10;\r\n\r\nconst ManageOrdersCustomer = () => {\r\n    const auth = useAuth();\r\n    const updateAuth = useAuthUpdate();\r\n\r\n    const [orders, setOrders] = useState([]);\r\n    const [ordersOriginal, setOrdersOriginal] = useState([]);\r\n    const [currentOrder, setCurrentOrder] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [noOrders, setNoOrders] = useState(false);\r\n    const [page, setPage] = useState(0);\r\n\r\n\r\n    const maxNumberOfPages = (Math.ceil(orders.length/itemsPerPage) - 1);\r\n    let row = <></>;\r\n    let renderableProducts = []\r\n\r\n\r\n    const onPageChange = p => { setPage(p - 1) };\r\n\r\n    useEffect(() => {\r\n        if(!orders.length){\r\n            setLoading(true);\r\n            const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n            \r\n            axios.get('api/orders/orders-for-user', config)\r\n            .then(res => {\r\n                if(res.data.hasOwnProperty('success')){\r\n                    console.log(res);\r\n                    setNoOrders(true);\r\n                    setLoading(false);\r\n                } \r\n                else{\r\n                    const sortedOrders = res.data.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n                    setOrders(sortedOrders);\r\n                    setOrdersOriginal(sortedOrders);\r\n                    if(sortedOrders.length <= 0) setNoOrders(true);\r\n                    setLoading(false);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else{\r\n                    setError(true);\r\n                    setLoading(false);\r\n                }\r\n            });\r\n        }\r\n    }, [orders.length, auth.access_token, updateAuth])\r\n\r\n\r\n    if(orders.length !== 0){\r\n        renderableProducts = orders.slice( page * itemsPerPage, \r\n            ((page + 1) * itemsPerPage) > orders.length ? orders.length : ((page + 1) * itemsPerPage));\r\n        \r\n        row = renderableProducts.map(o => {\r\n            const date = new Date(o.issued_date);\r\n            const dateString = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\r\n\r\n            return (\r\n                <tr key = {o._id}>\r\n                    <td>{o.po_number}</td>\r\n                    <td><strong>{o.status}</strong></td>\r\n                    <td>{dateString}</td>\r\n                    <td><strong>{(o.tracking_number === null || (o.tracking_number !== null && o.tracking_number.length === 0)) ? <em>Not Available</em> : o.tracking_number}</strong></td>\r\n                    <td>{(o.carrier === null || (o.carrier !== null && o.carrier.length === 0)) ? <em>Not Available</em> : o.carrier}</td>\r\n                    <td>\r\n                        <Button type=\"secondary\" onClick={() => {setCurrentOrder(o);}}> View Order Details </Button>\r\n                    </td>\r\n                </tr>\r\n            );\r\n        });\r\n    }\r\n   \r\n    return (\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Manage Orders</h2>\r\n            </div>\r\n            {\r\n                currentOrder === null ?\r\n                <>\r\n                    <div className=\"container flex-horizontal-box-container\">\r\n                        <Select className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\" placeholder=\"Filter By\" onSelect={ v => {\r\n                            filterOrders(v, ordersOriginal, setOrders);\r\n                            setPage(0);\r\n                        }}>\r\n                                <Option value={orderStatusConstants.NEW}>New</Option>\r\n                                <Option value={orderStatusConstants.SHIPPED}>Shipped</Option>\r\n                                <Option value={orderStatusConstants.COMPLETE}>Complete</Option>\r\n                        </Select>\r\n                        <Select className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\" placeholder=\"Order By\" onSelect={ v => {\r\n                            sortOrders(v, orders, setOrders);\r\n                            setPage(0);\r\n                        }}>\r\n                            <OptGroup label=\"Data Issued\">\r\n                                <Option value=\"d_decending\">Latest</Option>\r\n                                <Option value=\"d_ascending\">Earliest</Option>\r\n                            </OptGroup>\r\n                        </Select>\r\n                        <Button className=\"box-item-xs-3 box-item-sm-4 box-item-md-3 box-item-lg-2 box-item-xl-2\" type=\"secondary\" onClick={() => {\r\n                            setOrders(ordersOriginal);\r\n                        }}>Reset Filters</Button>\r\n                    </div>\r\n\r\n                    <div className=\"container table-container\">\r\n                        {\r\n                            loading \r\n                            ? <div style = {{textAlign: 'center'}}><Spin size='large'/></div> \r\n                            : error\r\n                            ? <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try refreshing page</h1>\r\n                            : noOrders\r\n                            ? <h1 style = {{textAlign: 'center', color: 'green'}}>You have no current order history</h1>\r\n                            :\r\n                            <table className=\"box-shadow center-content\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>PO Number</th>\r\n                                        <th>Status</th> \r\n                                        <th>Date Issued</th>\r\n                                        <th>Tracking Number</th> \r\n                                        <th>Carrier</th>\r\n                                        <th>Actions</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {row}\r\n                                </tbody>\r\n                            </table>\r\n                        }\r\n                    </div>\r\n                    <Pagination current={page + 1} defaultCurrent={1} total={(maxNumberOfPages + 1) * 10} onChange={onPageChange} className=\"text-center\"/>\r\n                </>\r\n                :   <OrderView order={currentOrder} setCurrentOrder={setCurrentOrder} setPage={setPage}/>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ManageOrdersCustomer;","export const sortOrders = (value, orders, setOrders) => {\r\n    if(value === \"d_decending\"){\r\n        const sortedOrders = orders.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n        setOrders([...sortedOrders]);\r\n    }\r\n    else{\r\n        const sortedOrders = orders.sort((a,b) => { return new Date(a.issued_date) - new Date(b.issued_date)});\r\n        setOrders([...sortedOrders]);\r\n    }\r\n}\r\n\r\nexport const filterOrders = (status, orders, setOrders) => {\r\n    const filteredOrders = orders.filter(order => {\r\n        return order.status === status\r\n    });\r\n    setOrders(filteredOrders);\r\n}   ","import { orderStatusConstants } from '../../../_constants/orderStatus.constants';\r\n\r\nexport const setUndefinedValues = order => {\r\n    const newOrder = order;\r\n    if(newOrder.items){\r\n        for(let i = 0; i < newOrder.items.lenth; i++){\r\n            if(newOrder.items[i].special_requirements === undefined) newOrder.items[i].special_requirements = \"\";\r\n        }\r\n    }\r\n    else newOrder.items = [];\r\n\r\n    if(newOrder.tracking_number === undefined) newOrder.tracking_number = \"\";\r\n    if(newOrder.carrier === undefined) newOrder.carrier = \"\";\r\n\r\n    return newOrder;\r\n}\r\n\r\nexport const createAddress = values => {\r\n    let address = {};\r\n    address.po_address_line1 = values.po_address_line1;\r\n    address.po_address_line2 = values.po_address_line2;\r\n    address.po_attention_to = values.po_attention_to;\r\n    address.po_country = values.po_country;\r\n    address.po_postcode = values.po_postcode;\r\n    address.po_state = values.po_state;\r\n    address.po_suburb = values.po_suburb;\r\n    return address;\r\n}\r\n\r\nexport const createOrderAdd = (values, address) => {\r\n    let order = {};\r\n    order.c_email = values.c_email;\r\n    order.carrier = \"dsfsd\";\r\n    order.items = [...values.items];\r\n    order.status = orderStatusConstants.NEW;\r\n    order.tracking_number = \"sdfsdf\";\r\n    order.address = address;\r\n    return order;\r\n}\r\n\r\nexport const createOrderEdit = (values, address, orderOriginal) => {\r\n    let order = {};\r\n    order.po_number = values.po_number;\r\n    order.c_email = values.c_email;\r\n    order.carrier = values.carrier;\r\n    order.items = [...values.items];\r\n    order.status = values.status;\r\n    order.tracking_number = values.tracking_number;\r\n    order.address = address;\r\n    order.issued_date = orderOriginal.issued_date;\r\n    return order;\r\n}","//States which the page can be in\r\nconst MODE = {\r\n    EDIT:\"EDIT\",\r\n    VIEW:\"VIEW\",\r\n    ADD:\"ADD\"\r\n};\r\n\r\nexport default MODE;","import { Form, Input } from 'antd';\r\nimport { onlyNumbers } from '../../../../_services/SharedFunctions';\r\n\r\nconst NewItemForm = (props) => {\r\n    return(\r\n        <Form form={props.form} layout=\"vertical\" style={{fontWeight: \"bold\"}}>\r\n            <Form.Item \r\n                name='item_code' \r\n                label=\"Product Code\"\r\n                rules={[\r\n                    {\r\n                        whitespace: true,\r\n                        required: true,\r\n                        validateTrigger: 'onSubmit',\r\n                        message: 'Please input a product code',\r\n                    }\r\n                ]}\r\n            >\r\n                <Input maxLength={100}/>\r\n            </Form.Item>\r\n\r\n            <Form.Item \r\n                name='quantity' \r\n                label=\"Quantity\"\r\n                rules={[\r\n                    {\r\n                        required: true,\r\n                        validateTrigger: 'onSubmit',\r\n                        message: 'Please input a required quantity',\r\n                    },\r\n                    {\r\n                        validateTrigger: 'onSubmit',\r\n                        validator: async (_, value) => {\r\n                            if (Number(value) === 0){\r\n                                return Promise.reject(new Error(\"Cannot have value of 0\"));\r\n                            } \r\n                        }\r\n                    }\r\n                ]}  \r\n            >\r\n                <Input maxLength={4} onChange={e => onlyNumbers(e, props.form, \"quantity\",)} style={{width: \"50px\"}} />\r\n            </Form.Item>\r\n\r\n            <Form.Item \r\n                name='p_size' \r\n                label=\"Size\"\r\n                rules={[\r\n                    {\r\n                        whitespace: true,\r\n                        required: true,\r\n                        validateTrigger: 'onSubmit',\r\n                        message: 'Please input a product size',\r\n                    }\r\n                ]}\r\n            >\r\n                <Input maxLength={50} style={{width: \"100px\"}}/>\r\n            </Form.Item>\r\n\r\n            <Form.Item maxLength={200} name='special_requirements' label=\"Special Requirements\">\r\n                <Input/>\r\n            </Form.Item>\r\n        </Form>\r\n    );\r\n}\r\n\r\nexport default NewItemForm;","import { ExclamationCircleOutlined} from '@ant-design/icons';\r\nimport NewItemForm from '../Forms/NewItemForm/NewItemForm';\r\nimport { orderStatusConstants } from '../../../_constants/orderStatus.constants';\r\nimport { Modal } from 'antd';\r\nimport MODE from './PageConstants';\r\nimport { addIncompleteOrder } from '../../../_actions/incompleteOrderActions';\r\nimport { history } from '../../../_helpers/history';\r\nimport axios from 'axios';\r\nimport { \r\n    DELETE_INCOMPLETE_ORDERS, \r\n    ADD_INCOMPLETE_ORDER, \r\n    ADD_COMPLETE_ORDER, \r\n    DELETE_COMPLETE_ORDER, \r\n    EDIT_COMPLETE_ORDER, \r\n    EDIT_INCOMPLETE_ORDER \r\n} from '../../../_constants/actionTypes.constants';\r\nimport { _logout } from '../../../_services/SharedFunctions';\r\n\r\n\r\n\r\n\r\n//Appears when confirming a delete on a PO item\r\nexport const showDeleteConfirm = (index, deleteOrderItem) => {\r\n    Modal.confirm({\r\n        title: 'Warning!',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: 'Are you sure you want to delete this item from this order?',\r\n        okText: 'Delete',\r\n        cancelText: 'No',\r\n\r\n        onOk() { deleteOrderItem(index) }\r\n    });\r\n}\r\n\r\n//Appears when confirming a delete on a PO item\r\nexport const showUndo = (form, orderOriginal, setOrder, mode) => {\r\n\r\n    Modal.confirm({\r\n        title: 'Warning!',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: 'Are you sure you want to undo changes',\r\n        okText: 'Yes',\r\n        cancelText: 'No',\r\n\r\n        onOk() { \r\n            if(mode === MODE.ADD){\r\n                form.resetFields();\r\n                setOrder(orderOriginal); \r\n            } \r\n            else{\r\n                form.setFieldsValue(orderOriginal);\r\n                form.setFieldsValue(orderOriginal.address);\r\n                setOrder(orderOriginal); \r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n//Appears if user tries to submit order with no items\r\nexport const showNoItemsPresent = setNewItemFormVisible => {\r\n    Modal.confirm({\r\n        title: 'Error!',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: 'You must have at least one item in an order',\r\n        okText: 'Add Item',\r\n        cancelText: 'Back',\r\n\r\n        onOk() { setNewItemFormVisible(true) }\r\n    });\r\n}\r\n\r\n//Appears when email can't be found in PO form part 1\r\nexport const emailDoesNotExist = () => {\r\n    Modal.info({\r\n        title: 'Email does not exist',\r\n        content: <p>You can create a termporary customer by entering new details</p>\r\n    });\r\n}\r\n\r\n//Modal/form for adding new items to the PO\r\nexport const AddItemModal = props => {\r\n    //adds an item after validating and updates the state\r\n    const addItem = () => {\r\n        props.form.validateFields()\r\n            .then(new_item => {\r\n\r\n               // new_item.item_name = getItemName(new_item.item_code);\r\n                const new_items = [...props.order.items];\r\n                new_items.unshift(new_item);\r\n\r\n                const new_order = {...props.order};\r\n                new_order.items = new_items;\r\n\r\n                props.setOrder(new_order);\r\n                props.setNewItemFormVisible(false);\r\n                props.form.resetFields();\r\n            })\r\n            .catch((errorInfo) => {\r\n                console.log(errorInfo);\r\n            })\r\n    }\r\n\r\n    //resets the fields of the addItem form\r\n    const cancelAddItem = () => {\r\n        props.form.resetFields();\r\n        props.setNewItemFormVisible(false);\r\n    }\r\n\r\n    return(\r\n        <Modal title=\"Add Item\" visible={props.visible} onOk={addItem} onCancel={cancelAddItem}>\r\n            <NewItemForm form={props.form} />\r\n        </Modal>\r\n    );\r\n}   \r\n\r\nexport const _addIncompleteOrder = (order, dispatch) => {\r\n    Modal.confirm({\r\n        title: 'Add Order?',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: 'Are you sure you want to add this order?',\r\n        okText: 'Yes',\r\n        cancelText: 'No',\r\n\r\n        onOk() { \r\n            if(dispatch !== undefined){\r\n                return dispatch(addIncompleteOrder(order))\r\n                .then(res => {\r\n                    if(res.data.success) addSuccess();\r\n                    else addFail();\r\n                })\r\n                .catch(() => {\r\n                    addFail();\r\n                })\r\n            }\r\n            else{\r\n                axios.post('/api/orders/create-order', order)\r\n                .then(res => {\r\n                    if(res.data.success) addSuccess();\r\n                    else{\r\n                        console.log(res);\r\n                        addFail();\r\n                    } \r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    addFail();\r\n                });\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nconst addSuccess = () => {\r\n    Modal.info({\r\n        title: \"Add Successful\",\r\n        content: 'Successfully added order',\r\n        okText: \"Ok\",\r\n        onOk(){ history.push('/admin') }\r\n    });\r\n}\r\n\r\n\r\nconst addFail = () => {\r\n    Modal.info({\r\n        title: \"ERROR\",\r\n        content: 'There was a problem adding this order. Please try again or contact support.',\r\n        okText: \"Ok\",\r\n        onOk(){ \r\n            history.push('/order');\r\n            window.location.reload();\r\n        }\r\n    });\r\n}\r\n\r\nexport const _editOrder = (order, dispatch, prev, curr, completeLength, incompleteLength, setOrder, setOrderOriginal, setMode, access_token, updateAuth) => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n\r\n    Modal.confirm({\r\n        title: 'Edit Order?',\r\n        icon: <ExclamationCircleOutlined />,\r\n        content: 'Are you sure you want to edit this order?',\r\n        okText: 'Yes',\r\n        cancelText: 'No',\r\n        onOk() { \r\n            return axios.post('/api/orders/edit-order', order, config)\r\n            .then(res => {\r\n                if(res.data.success){\r\n                    if((prev === orderStatusConstants.NEW || prev === orderStatusConstants.SHIPPED) && curr === orderStatusConstants.COMPLETE){\r\n                        //then remove from current order list... add to complete order list\r\n                        if(incompleteLength > 0){\r\n                            //remove\r\n                            dispatch({\r\n                                type: DELETE_INCOMPLETE_ORDERS,\r\n                                payload: order.po_number\r\n                            });\r\n                        }\r\n                        if(completeLength > 0){\r\n                            //add\r\n                            dispatch({\r\n                                type: ADD_COMPLETE_ORDER,\r\n                                payload: order\r\n                            });\r\n                        }\r\n                    }\r\n                    else if(prev === orderStatusConstants.COMPLETE && (curr === orderStatusConstants.SHIPPED || curr === orderStatusConstants.NEW)){\r\n                        //remove from complete order list and add to current order list\r\n                        if(incompleteLength > 0){\r\n                            //add to current list\r\n                            dispatch({\r\n                                type: ADD_INCOMPLETE_ORDER,\r\n                                payload: order\r\n                            });\r\n                        }\r\n                        if(completeLength > 0){\r\n                            dispatch({\r\n                                type: DELETE_COMPLETE_ORDER,\r\n                                payload: order.po_number\r\n                            });\r\n                        }\r\n                    }\r\n                    else if((curr === orderStatusConstants.SHIPPED || curr === orderStatusConstants.NEW) \r\n                    && (prev === orderStatusConstants.SHIPPED || prev === orderStatusConstants.NEW)){\r\n                        //need to replace in current order\r\n                        if(incompleteLength > 0){\r\n                            dispatch({\r\n                                type: EDIT_INCOMPLETE_ORDER,\r\n                                payload: order\r\n                            });\r\n                        }\r\n                    }\r\n                    else{\r\n                        //need to replace in complete orders\r\n                        if(completeLength > 0){\r\n                            dispatch({\r\n                                type: EDIT_COMPLETE_ORDER,\r\n                                payload: order\r\n                            });\r\n                        }\r\n                    }\r\n                    setOrder(order);\r\n                    setOrderOriginal(order);\r\n                    setMode(MODE.VIEW);\r\n                    editSuccess(order);\r\n                }\r\n                else{\r\n                    console.log(res);\r\n                    editFail();\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n                else editFail();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nconst editSuccess = order => {\r\n    Modal.info({\r\n        title: \"Edit Successful\",\r\n        content: 'Successfully edited order',\r\n        okText: \"Ok\",\r\n        onOk(){\r\n            history.push(`/order/${order.po_number}/${order.status}`);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nconst editFail = () => {\r\n    Modal.info({\r\n        title: \"ERROR\",\r\n        content: 'There was a problem editing this order. Please try again or contact support.',\r\n        okText: \"Ok\",\r\n        onOk(){ \r\n            history.push('/order');\r\n            window.location.reload();\r\n        }\r\n    });\r\n}","import MODE from '../../Helpers/PageConstants';\r\nimport { Form, Input } from 'antd';\r\nimport { DeleteOutlined } from '@ant-design/icons';\r\nimport { onlyNumbers } from '../../../../_services/SharedFunctions';\r\nimport { showDeleteConfirm } from '../../Helpers/Modals';\r\n\r\nconst POForm2 = props => {\r\n    /*const initialValues_form1 = {\r\n        po_number: props.orderOriginal.po_number,\r\n        c_email:  props.orderOriginal.c_email,\r\n        issued_date:  props.orderOriginal.issued_date,\r\n        status:  props.orderOriginal.status,\r\n        tracking_number:  props.orderOriginal.tracking_number,\r\n        carrier:  props.orderOriginal.carrier,\r\n        items: props.orderOriginal.items,\r\n        po_attention_to: props.orderOriginal.po_attention_to,\r\n        po_address_line1: props.orderOriginal.po_address_line1,\r\n        po_address_line2: props.orderOriginal.po_address_line2,\r\n        po_suburb: props.orderOriginal.po_suburb,\r\n        po_state: props.orderOriginal.po_state,\r\n        po_postcode: props.orderOriginal.po_postcode,\r\n        po_country: props.orderOriginal.po_country,\r\n        mobile_number: props.orderOriginal.mobile_number\r\n    }*/\r\n\r\n\r\n\r\n\r\n\r\n    //updates the order state when changes are made\r\n    const updateOrder = () => {\r\n        if(JSON.stringify(props.order.items) !== JSON.stringify(props.form.getFieldValue('items'))){\r\n            const temp_order = {...props.order};\r\n            temp_order.items = props.form.getFieldValue('items');\r\n            props.setOrder(temp_order);\r\n        }\r\n    }\r\n\r\n    //deletes specific order items\r\n    const deleteOrderItem = index => {\r\n        const new_items = [...props.order.items];\r\n        new_items.splice(index, 1);\r\n\r\n        const new_order = {...props.order};\r\n        new_order.items = new_items;\r\n        \r\n        props.setOrder(new_order);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    //Dynamic production of item forms\r\n    const itemRow = props.order.items.map((item, index) => {\r\n        return (\r\n            <tr key = {index} className=\"view-order-table-row\">\r\n                <td>\r\n                    {item.item_code}\r\n                    <Form.Item hidden name={['items', index, 'item_code']} ><Input /></Form.Item>\r\n                </td>\r\n\r\n                <td>\r\n                    {props.mode===MODE.EDIT || props.mode===MODE.ADD\r\n                        ?   <Form.Item \r\n                                name={['items', index, 'quantity']}\r\n                                rules={[\r\n                                    {\r\n                                        validateTrigger: 'onSubmit',\r\n                                        validator: async (_, value) => {\r\n                                            if (Number(value) === 0){\r\n                                                return Promise.reject(new Error(\"Please enter a value greater than 0\"));\r\n                                            } \r\n                                        }\r\n                                    }\r\n                                ]}  \r\n                            >\r\n                                <Input maxLength={4} onChange={e => onlyNumbers(e, props.form, \"items\", index, 'quantity')} style={{width: \"50px\"}} />\r\n                            </Form.Item>\r\n                        :   item.quantity                    \r\n                    } \r\n                </td>\r\n\r\n                <td>\r\n                    {props.mode===MODE.EDIT || props.mode===MODE.ADD\r\n                        ?   <Form.Item name ={['items', index, 'special_requirements']}>\r\n                                <Input.TextArea maxLength={500} style={{width: \"500px\"}} />\r\n                            </Form.Item>\r\n                        :   item.special_requirements\r\n                    } \r\n                </td>\r\n                <td>\r\n                    {props.mode===MODE.EDIT || props.mode===MODE.ADD\r\n                        ?   <Form.Item \r\n                                name ={['items', index, 'p_size']}\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: \"Please input a size\"\r\n                                    }\r\n                                ]}\r\n                            >\r\n                                <Input maxLength={50} style={{width: \"100px\"}} />\r\n                            </Form.Item>\r\n                        :   item.p_size\r\n                    } \r\n                </td>\r\n                {props.mode===MODE.EDIT || props.mode===MODE.ADD\r\n                    ?   <td onClick={() => showDeleteConfirm(index, deleteOrderItem)}><DeleteOutlined className=\"view-order-icon\"/></td> \r\n                    :   <></>\r\n                }     \r\n            </tr>\r\n        ); \r\n    })\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n        <Form onBlur={updateOrder} form={props.form}>\r\n            <table id=\"view-order-table-wrapper\" className=\"center-content\">\r\n                <tbody>\r\n                    <tr style = {{border: \"solid black 1px\"}}>\r\n                        <th><span style={{color: 'red'}}>*</span>Item Code</th> \r\n                        <th><span style={{color: 'red'}}>*</span>Quantity</th>\r\n                        <th>Special Requirements</th>\r\n                        <th><span style={{color: 'red'}}>*</span>Size</th>\r\n                        {props.mode===MODE.EDIT || props.mode===MODE.ADD \r\n                            ?   <th onClick = {() => {props.onClick(true)}} className=\"view-order-icon\" style ={{fontSize: \"30px\"}}>+</th>\r\n                            : <></>\r\n                        }\r\n                    </tr>\r\n                    \r\n                   {itemRow}  \r\n                </tbody>\r\n            </table>\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport default POForm2;","import MODE from '../../Helpers/PageConstants';\r\nimport { Form, Input, Select } from 'antd';\r\nimport { onlyNumbers } from '../../../../_services/SharedFunctions';\r\nimport { orderStatusConstants } from '../../../../_constants/orderStatus.constants';\r\n\r\n\r\n\r\n\r\nconst POForm1 = props => {\r\n    const date = new Date(props.orderOriginal.issued_date);\r\n    const date_S = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n\r\n\r\n\r\n\r\n    //These update functions update the order state when edits are made\r\n    const updateOrderText = e => {\r\n        const field = e.target.id;\r\n        if(props.order[field] !== e.target.value){\r\n            const temp_order = {...props.order};\r\n            temp_order[field] = e.target.value;\r\n            props.setOrder(temp_order); \r\n        }      \r\n    }\r\n\r\n    const updateOrderSelect = value => {\r\n        const temp_order = {...props.order};\r\n        temp_order.status = value;\r\n        props.setOrder(temp_order); \r\n    }\r\n    \r\n\r\n\r\n\r\n    //First section of the form if in edit mode\r\n    const section_1_a = (\r\n        <>\r\n            <div className=\"view-order-field-header\">Purchase Order Number</div>\r\n            <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.po_number}</div>\r\n            <Form.Item hidden name=\"po_number\"><Input/></Form.Item>\r\n\r\n            <div className=\"view-order-field-header\">Issued Date</div>\r\n            <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{date_S}</div>\r\n\r\n            <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Customer Email</div>\r\n            <Form.Item \r\n                name=\"c_email\"\r\n                rules={[\r\n                    {\r\n                        required: true,\r\n                        type: 'email',\r\n                        validateTrigger: 'onSubmit',\r\n                        message: 'Please enter a valid email'\r\n                    }\r\n                ]}\r\n            >\r\n                <Input \r\n                    onBlur={updateOrderText}\r\n                    maxLength={100} \r\n                    style={{width: \"500px\"}}\r\n                />  \r\n            </Form.Item>\r\n            \r\n            <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Status</div>\r\n                <Form.Item\r\n                    name=\"status\" \r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            validateTrigger: 'onSubmit',\r\n                            message: 'Please select order status',\r\n                        }\r\n                    ]}\r\n                >\r\n                    <Select onChange={updateOrderSelect} style={{width: \"500px\", textAlign: \"left\"}}>\r\n                        <Select.Option value=\"NEW\">New</Select.Option>                         \r\n                        <Select.Option value=\"SHIPPED\">Shipped</Select.Option>\r\n                        <Select.Option value=\"COMPLETE\">Complete</Select.Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                \r\n                <div className=\"view-order-field-header\">Carrier</div>\r\n                <Form.Item \r\n                    name=\"carrier\"\r\n                    rules={[\r\n                        {\r\n                            whitespace: true,\r\n                            validateTrigger: 'onSubmit',\r\n                            message: 'Cannot contain white spaces',\r\n                        },\r\n                        {\r\n                            validator: async (_, value) => {\r\n                                if (props.order.status !== orderStatusConstants.NEW && (value === undefined || value === \"\")){\r\n                                    return Promise.reject(new Error('Only New orders can have empty carrier fields'));\r\n                                } \r\n                            }\r\n                        },\r\n                        {\r\n                            validator: async (_, value) => {\r\n                                if (props.order.status === orderStatusConstants.NEW && (value !== undefined && value !== \"\")){\r\n                                    return Promise.reject(new Error('Set status to \"Shipped\" or \"Complete\" if you wish to add carrier values'));\r\n                                } \r\n                            }\r\n                        }\r\n                ]}>\r\n                    <Input onBlur={updateOrderText} maxLength={100} style={{width: \"500px\"}}/>\r\n                    </Form.Item>  \r\n\r\n                <div className=\"view-order-field-header\">Tracking Number</div>\r\n                <Form.Item \r\n                    name=\"tracking_number\"\r\n                    rules={[\r\n                        {\r\n                            whitespace: true,\r\n                            validateTrigger: 'onSubmit',\r\n                            message: 'Cannot contain white spaces',\r\n                        },\r\n                        {\r\n                            validator: async (_, value) => {\r\n                                if (props.order.status !== orderStatusConstants.NEW && (value === undefined || value === \"\")){\r\n                                    return Promise.reject(new Error('Only New orders can have empty tracking number fields'));\r\n                                } \r\n                            }\r\n                        },\r\n                        {\r\n                            validator: async (_, value) => {\r\n                                if (props.order.status === orderStatusConstants.NEW && (value !== undefined && value !== \"\")){\r\n                                    return Promise.reject(new Error('Set status to \"Shipped\" or \"Complete\" if you wish to add tracking values'));\r\n                                } \r\n                            }\r\n                        }\r\n                ]}>\r\n                    <Input onBlur={updateOrderText} maxLength={100} style={{width: \"500px\"}}/>\r\n            </Form.Item>\r\n        </>\r\n    );\r\n    \r\n    //First section of the form if in add mode\r\n    const section_1_b = (\r\n        <>\r\n            <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Customer Email</div>\r\n            <Form.Item \r\n                name=\"c_email\"\r\n                rules={[\r\n                    {\r\n                        required: true,\r\n                        type: 'email',\r\n                        validateTrigger: 'onSubmit',\r\n                        message: 'Please enter a valid email'\r\n                    }\r\n                ]}\r\n            >\r\n                <Input \r\n                    onBlur={updateOrderText}\r\n                    maxLength={100} \r\n                    style={{width: \"500px\"}}\r\n                />  \r\n            </Form.Item>\r\n        </>\r\n    );\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n        <>\r\n            <div className=\"view-order-column\">\r\n                <Form form = {props.form} >\r\n                    {props.mode === MODE.EDIT   ?   section_1_a   :   <></>}\r\n                    {props.mode === MODE.ADD    ?   section_1_b   :   <></>}\r\n\r\n                    \r\n                        \r\n                </Form>\r\n            </div>\r\n\r\n            <div className=\"view-order-column\">\r\n                <Form onBlur={updateOrderText} form={props.form} >\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Address Line 1</div>\r\n                    <Form.Item \r\n                        name=\"po_address_line1\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input an address',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={200} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Address Line 2</div>\r\n                    <Form.Item \r\n                        name=\"po_address_line2\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input an address',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={200} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Attention to</div>\r\n                    <Form.Item \r\n                        name=\"po_attention_to\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input Attention to',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={200} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Suburb</div>\r\n                    <Form.Item \r\n                        name=\"po_suburb\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input a suburb',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={100} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>State</div>\r\n                    <Form.Item \r\n                        name=\"po_state\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input a state',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={100} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Post Code</div>\r\n                    <Form.Item \r\n                        name=\"po_postcode\"\r\n                        rules={[\r\n                            {\r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input a postal code',\r\n                            }\r\n                        ]}\r\n                    >                                                   \r\n                        <Input onChange={e => onlyNumbers(e, props.form, \"po_postcode\",)} maxLength={100} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n\r\n                    <div className=\"view-order-field-header\"><span style={{color: 'red'}}>*</span>Country</div>\r\n                    <Form.Item \r\n                        name=\"po_country\"\r\n                        rules={[\r\n                            {   \r\n                                whitespace: true,\r\n                                required: true,\r\n                                validateTrigger: 'onSubmit',\r\n                                message: 'Please input a country',\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input maxLength={100} style={{width: \"500px\"}} />\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default POForm1;","const POForm1View = props => {\r\n    const date = new Date(props.order.issued_date);\r\n    return (\r\n        <>  \r\n            <div className=\"view-order-column\">\r\n                <div className=\"view-order-field-header\">Purchase Order Number</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.po_number}</div>\r\n\r\n                <div className=\"view-order-field-header\">Customer Email</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.c_email}</div>\r\n\r\n                <div className=\"view-order-field-header\">Issue Date</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{`${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`}</div>\r\n\r\n                <div className=\"view-order-field-header\">Status</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.status}</div>\r\n\r\n                <div className=\"view-order-field-header\">Carrier</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.carrier}</div>\r\n\r\n                <div className=\"view-order-field-header\">Tracking Number</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.tracking_number}</div>\r\n            </div>\r\n                <div className=\"view-order-column\">\r\n\r\n                <div className=\"view-order-field-header\">Address Line 1</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_address_line1}</div>\r\n\r\n                <div className=\"view-order-field-header\">Address Line 2</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_address_line2}</div>\r\n\r\n                <div className=\"view-order-field-header\">Attention To</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_attention_to}</div>\r\n\r\n                <div className=\"view-order-field-header\">Suburb</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_suburb}</div>\r\n\r\n                <div className=\"view-order-field-header\">State</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_state}</div>\r\n\r\n                <div className=\"view-order-field-header\">Post Code</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_postcode}</div>\r\n\r\n                <div className=\"view-order-field-header\">Country</div>\r\n                <div className=\"view-order-field-header\" style={{paddingBottom: \"20px\", fontWeight: \"normal\"}}>{props.order.address.po_country}</div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default POForm1View;","import '../../_assets/CSS/pages/Order/Order.css';\r\nimport { Form, Button } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { setUndefinedValues } from './Helpers/Functions';\r\nimport { useState, useEffect } from 'react';\r\nimport { orderStatusConstants } from '../../_constants/orderStatus.constants';\r\nimport { useAuth, useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\nimport MODE from './Helpers/PageConstants';\r\nimport { showNoItemsPresent, AddItemModal, showUndo} from './Helpers/Modals';\r\nimport POForm2 from './Forms/POForm/POForm2';\r\nimport POForm1 from './Forms/POForm/POForm1';\r\nimport POForm1View from './Forms/POForm/POForm1View';\r\nimport axios from 'axios';\r\nimport { _addIncompleteOrder, _editOrder } from './Helpers/Modals';\r\nimport { createAddress, createOrderAdd, createOrderEdit } from './Helpers/Functions';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Order = () => {\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n    const { po_number, status } = useParams();\r\n    const incompleteOrders = useSelector(state => state.incompleteOrdersState.incompleteOrders);\r\n    const compeletOrders = useSelector(state => state.completeOrdersState.completeOrders);\r\n    const empty = useSelector(state => state.incompleteOrdersState.empty);\r\n    const [order, setOrder] = useState({items: []});\r\n    const [orderOriginal, setOrderOriginal] = useState(order);\r\n    const [mode, setMode] = useState(MODE.ADD);\r\n    const [newItemFormVisible, setNewItemFormVisible] = useState(false);\r\n    const [form_1] = Form.useForm();\r\n    const [form_2] = Form.useForm();\r\n\r\n\r\n    //for refreshing the item list\r\n    useEffect(() => {     \r\n        form_1.setFieldsValue({items: [...order.items]}); \r\n    });\r\n\r\n    useEffect(() => {\r\n        const config = { headers:{ authorization : `Bearer ${auth.access_token}` }};\r\n\r\n        if(status === orderStatusConstants.COMPLETE){\r\n            if(!incompleteOrders.length){\r\n                axios.post('/api/orders/single-order', { po_number: po_number }, config)\r\n                .then(res => {\r\n                    if(res.data.success !== false){\r\n                        let order = setUndefinedValues(res.data);\r\n                        setOrder(order);\r\n                        setOrderOriginal(order);\r\n                        setMode(MODE.VIEW);\r\n                    }\r\n                    else console.log(res);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                });\r\n            }\r\n            else{\r\n                let order = compeletOrders.find(o => {\r\n                    return o.po_number === po_number;\r\n                });\r\n                if(order !== undefined){\r\n                    order = setUndefinedValues(order);\r\n                    setOrder(order);\r\n                    setOrderOriginal(order);\r\n                    setMode(MODE.VIEW);\r\n                }\r\n            }\r\n        }\r\n        else if(status === orderStatusConstants.NEW || status === orderStatusConstants.SHIPPED){\r\n\r\n            if(!incompleteOrders.length){\r\n                axios.post('/api/orders/single-order', { po_number: po_number }, config)\r\n                .then(res => {\r\n                    if(res.data.success !== false){\r\n                        let order = setUndefinedValues(res.data);\r\n                        setOrder(order);\r\n                        setOrderOriginal(order);\r\n                        setMode(MODE.VIEW);\r\n                    }\r\n                    else console.log(res);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                });\r\n            }\r\n            else{\r\n                let order = incompleteOrders.find(o => {\r\n                    return o.po_number === po_number;\r\n                });\r\n       \r\n                if(order !== undefined){\r\n                    order = setUndefinedValues(order);\r\n                    setOrder(order);\r\n                    setOrderOriginal(order);\r\n                    setMode(MODE.VIEW);\r\n                }\r\n            }\r\n        }\r\n        \r\n    }, [compeletOrders, form_1, incompleteOrders, po_number, status, auth.access_token, updateAuth]);\r\n\r\n    \r\n    \r\n\r\n    //validates all of the form fields\r\n    const handleSubmit = () => {                  \r\n        if(order.items.length > 0){\r\n            form_1.validateFields()\r\n            .then(values => {\r\n                confirmSubmit(values);\r\n            })\r\n            .catch(errorInfo => {\r\n                console.log(errorInfo);\r\n            });\r\n        }\r\n        else showNoItemsPresent(setNewItemFormVisible);\r\n    }\r\n\r\n    //after validating fields, this function submits the forms\r\n    const confirmSubmit = values => {\r\n        const editedOrder = JSON.stringify(order) !== JSON.stringify(orderOriginal);\r\n        let address = createAddress(values);\r\n\r\n        if(mode===MODE.ADD){\r\n            let order = createOrderAdd(values, address);\r\n            console.log(order);\r\n            if(incompleteOrders.length > 0 || empty){\r\n                order.issued_date = new Date();\r\n                _addIncompleteOrder(order, dispatch);\r\n            }\r\n            else _addIncompleteOrder(order);\r\n        }\r\n        else if(mode===MODE.EDIT){\r\n            if(editedOrder){\r\n                let order = createOrderEdit(values, address, orderOriginal);\r\n                const prev = orderOriginal.status;\r\n                const curr = values.status;\r\n                _editOrder(order, dispatch, prev, curr, compeletOrders.length, incompleteOrders.length, setOrder, setOrderOriginal, setMode, auth.access_token, updateAuth);\r\n            }\r\n        }\r\n    }\r\n\r\n    //toggles the edit view\r\n    const toggleView = () => {\r\n        if(mode===MODE.VIEW){\r\n            setMode(MODE.EDIT);\r\n            form_1.setFieldsValue(order);\r\n            form_1.setFieldsValue(order.address);\r\n        } \r\n        else setMode(MODE.VIEW);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    //props for child components \r\n    const addItemModal_props = {\r\n        order: order,\r\n        setOrder: setOrder,\r\n        visible: newItemFormVisible,\r\n        setNewItemFormVisible: setNewItemFormVisible,\r\n        form: form_2\r\n    }\r\n\r\n    const form_1_props = {\r\n        order: order,\r\n        orderOriginal: orderOriginal,\r\n        mode: mode,\r\n        form: form_1,\r\n        setOrder: setOrder\r\n    }\r\n\r\n    const form_2_props = {\r\n        order: order,\r\n        orderOriginal: orderOriginal,\r\n        mode: mode,\r\n        form: form_1,\r\n        onClick: setNewItemFormVisible,\r\n        setOrder: setOrder\r\n    }\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n    //button for toggling edit mode\r\n    const toggleButton = (\r\n        <div style={{ margin: \"30px\", textAlign: \"center\"}}>\r\n            <Button onClick={toggleView} style={{width: \"500px\", fontWeight: \"bold\"}}>Toggle 'Edit' Mode</Button>\r\n        </div>\r\n    );\r\n    \r\n    //submit and undo buttons\r\n    const submitUndoButtons = (\r\n        <div style={{textAlign: \"center\"}}>\r\n            <div>  \r\n                <Button type=\"primary\" onClick={() => {\r\n                    if(JSON.stringify(order) !== JSON.stringify(orderOriginal)) handleSubmit();\r\n                }} style={{width: \"500px\", fontWeight: \"bold\"}}>Submit Details</Button>\r\n            </div>\r\n            \r\n            <div style={{ paddingTop: \"30px\", paddingBottom: \"30px\"}}>\r\n                <Button onClick={() => { \r\n                    if(JSON.stringify(order) !== JSON.stringify(orderOriginal)) showUndo(form_1, orderOriginal, setOrder, mode);\r\n                }} style={{width: \"500px\", fontWeight: \"bold\"}}>Undo Changes</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n    \r\n\r\n\r\n\r\n\r\n    //HTML Main\r\n    return (\r\n        <div>\r\n            {mode===MODE.EDIT || mode===MODE.VIEW   ?   toggleButton    :   <></>}\r\n\r\n            <h1 className=\"view-order-text\">Order Details</h1>\r\n\r\n            <div>\r\n                <div id=\"view-order-row\">\r\n                    {\r\n                        mode===MODE.EDIT || mode===MODE.ADD\r\n                        ? <><POForm1 {...form_1_props}/> {submitUndoButtons}</>\r\n                        : <POForm1View order={order}/>\r\n                    }\r\n                </div>\r\n\r\n                <h1 className=\"view-order-text\">Ordered Products</h1>\r\n\r\n                <div style = {{height: \"400px\", display: \"table\"}}>\r\n                   <POForm2 {...form_2_props}/>\r\n                </div>\r\n            </div>\r\n\r\n            <AddItemModal {...addItemModal_props} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Order;\r\n\r\n\r\n","import { history } from '../../_helpers/history';\r\nimport { Input, Button, Form } from 'antd';\r\nimport { CheckCircleOutlined } from '@ant-design/icons';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport { orderStatusConstants } from '../../_constants/orderStatus.constants';\r\nimport { addTracking } from '../../_actions/incompleteOrderActions';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\nconst OrderRow = props => {\r\n    const o = props.order;\r\n    const dispatch = props.dispatch;\r\n    const access_token = props.access_token;\r\n    const updateAuth = props.updateAuth;\r\n\r\n    const [form_1] = useForm();\r\n    const [form_2] = useForm();\r\n\r\n    const date = new Date(o.issued_date);\r\n    const dateString = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\r\n\r\n    const onFinish = () => {\r\n        const promise_1 = form_1.validateFields();\r\n        const promise_2 = form_2.validateFields();\r\n\r\n        Promise.all([promise_1, promise_2])\r\n        .then(values => {\r\n            const trackingDetails = { \r\n                tracking_number: values[0].tracking_number,\r\n                carrier: values[1].carrier,\r\n                po_number: o.po_number\r\n            }\r\n            dispatch(addTracking(trackingDetails, access_token, updateAuth))\r\n            .then(res => {\r\n                console.log(res)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                if(err.response.status === 401) _logout(updateAuth);\r\n            });\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <tr key = {o.po_number}>\r\n                <td>{o.po_number}</td>\r\n                <td>{o.c_email}</td>\r\n                <td>{o.status}</td>\r\n                <td>{dateString}</td>\r\n                {\r\n                    o.status === orderStatusConstants.NEW\r\n                    ?\r\n                    <>\r\n                        <td>\r\n                            <Form form = {form_1}>\r\n                                <Form.Item\r\n                                    name=\"tracking_number\"\r\n                                    rules={[\r\n                                        { required: true, \r\n                                            message: 'Invalid Input', \r\n                                            whitespace: true, \r\n                                            validateTrigger: 'onSubmit',\r\n                                            max: 100,\r\n                                        }\r\n                                    ]}>\r\n                                        <Input id={o.po_number} placeholder=\"Input Tracking Number\"/>\r\n                                </Form.Item>\r\n                            </Form>\r\n                        </td>\r\n\r\n                        <td>\r\n                            <Form form = {form_2}>\r\n                                    <Form.Item\r\n                                        name=\"carrier\"\r\n                                        rules={[\r\n                                            { required: true, \r\n                                                message: 'Invalid Input', \r\n                                                whitespace: true, \r\n                                                validateTrigger: 'onSubmit',\r\n                                                max: 100,\r\n                                            }\r\n                                        ]}>\r\n                                        <Input id={o.po_number} placeholder=\"Input Carrier of choice\"/>\r\n                                    </Form.Item>\r\n                            </Form>\r\n                        </td>\r\n\r\n                        <td>\r\n                            <Button type=\"primary\" onClick={onFinish}>Send</Button>\r\n                        </td>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <td><strong>{(o.tracking_number === null || (o.tracking_number !== null && o.tracking_number.length === 0)) ? <em>Not Available</em> : o.tracking_number}</strong></td>\r\n                        <td>{(o.carrier === null || (o.carrier !== null && o.carrier.length === 0)) ? <em>Not Available</em> : o.carrier}</td>\r\n                        <td>Details Sent <CheckCircleOutlined style = {{color: \"green\"}}/></td>\r\n                    </>\r\n                }\r\n                <td><Button type=\"secondary\" onClick={() => { history.push(`/order/${o.po_number}/${o.status}`); }}> View </Button></td>\r\n             </tr>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default  OrderRow;","import { Select, Pagination, Input, Button, Spin } from 'antd';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getIncompleteOrders } from '../../_actions/incompleteOrderActions';\r\nimport { handleOrder } from './Functions';\r\nimport { filterEmail } from '../../_services/SharedFunctions';\r\nimport OrderRow from './OrderRow';\r\nimport { useAuthUpdate, useAuth } from '../../SharedComponents/AuthContext/AuthContext';\r\n\r\nconst itemsPerPage = 10;\r\nconst { Option, OptGroup } = Select;\r\n\r\nconst CurrentOrders = () => {\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const orders = useSelector(state => state.incompleteOrdersState.incompleteOrders);\r\n    const error = useSelector(state => state.incompleteOrdersState.error);\r\n    const loading = useSelector(state => state.incompleteOrdersState.loading);\r\n    const empty = useSelector(state => state.incompleteOrdersState.empty);\r\n    const [ordersList, setOrdersList] = useState([]);             \r\n    const [page, setPage] = useState(0);\r\n    const maxNumberOfPages = (Math.ceil(ordersList.length/itemsPerPage) - 1);\r\n    let renderableProducts = [];\r\n    let row = <></>\r\n\r\n    useEffect(() => {\r\n        if(!orders.length && !empty) dispatch(getIncompleteOrders(auth.access_token, updateAuth));\r\n        else setOrdersList(orders);      \r\n    }, [orders.length, orders, dispatch, auth.access_token, updateAuth]);\r\n    \r\n    const onChange = p => { setPage(p - 1) };\r\n\r\n    if(orders.length !== 0){\r\n        renderableProducts = ordersList.slice( page * itemsPerPage, \r\n            ((page + 1) * itemsPerPage) > ordersList.length ? ordersList.length : ((page + 1) * itemsPerPage));\r\n        \r\n        row = renderableProducts.map((o) => {\r\n            const orderProps = {\r\n                order: o,\r\n                dispatch: dispatch,\r\n                access_token: auth.access_token,\r\n                updateAuth: updateAuth\r\n            }\r\n        \r\n            return (\r\n               <OrderRow key={o.po_number} {...orderProps}/>\r\n            );\r\n        });\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Current Orders</h2>\r\n            </div>\r\n            <div className=\"container flex-horizontal-box-container\">\r\n                <Select placeholder=\"Order By\" className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\" onChange={v => {\r\n                    handleOrder(v, ordersList, setOrdersList);\r\n                }}>\r\n                    <OptGroup label=\"Data Issued\">\r\n                        <Option value=\"d_decending\">Latest</Option>\r\n                        <Option value=\"d_ascending\">Earliest</Option>\r\n                    </OptGroup>\r\n                    <OptGroup label=\"Customer Email\">\r\n                        <Option value=\"c_ascending\">A-Z</Option>\r\n                        <Option value=\"c_decending\">Z-A</Option>\r\n                    </OptGroup>\r\n                    <OptGroup label=\"Carrier Name\">\r\n                        <Option value=\"cn_ascending\">A-Z</Option>\r\n                        <Option value=\"cn_decending\">Z-A</Option>\r\n                    </OptGroup>\r\n                </Select>\r\n                <Input.Search\r\n                    id=\"filter-box-customer-email\"\r\n                    className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\"\r\n                    allowClear\r\n                    placeholder=\"Search Customer Email\"\r\n                    enterButton=\"Search\"\r\n                    onSearch={c_email => {\r\n                        if (c_email !== \"\") filterEmail(ordersList, c_email, setOrdersList);\r\n                    }}\r\n                />\r\n                <Button \r\n                    className=\"box-item-xs-3 box-item-sm-4 box-item-md-3 box-item-lg-2 box-item-xl-2\"\r\n                    type=\"secondary\"\r\n                    onClick={() => {\r\n                        setOrdersList(orders); document.getElementById(\"filter-box-customer-email\").value = \"\";\r\n                    }}>Reset Filters</Button>\r\n            </div>\r\n            <div className=\"container table-container\">\r\n                {loading ? <div style={{ textAlign: 'center' }}><Spin size='large' /></div> : \r\n                    error ? <h1 style={{ textAlign: 'center', color: 'red' }}> Could not load data, please try refreshing page </h1>:\r\n                        <table className=\"box-shadow center-content\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>PO Number</th>\r\n                                    <th>Customer Email</th>\r\n                                    <th>Status</th>\r\n                                    <th>Date Issued</th>\r\n                                    <th>Tracking Number</th>\r\n                                    <th>Carrier</th>\r\n                                    <th>Send Tracking Details</th>\r\n                                    <th>View Order</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {row}\r\n                            </tbody>\r\n                        </table>\r\n                }\r\n            </div>\r\n            <Pagination current={page + 1} defaultCurrent={1} total={(maxNumberOfPages + 1) * 10} onChange={onChange} className=\"text-center\" />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CurrentOrders;"," //Handles ordering select input\r\n export const handleOrder = (order, orderList, setOrdersList) => {\r\n    switch(order){\r\n        case 'd_decending':{\r\n            const newList = [...orderList].sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'd_ascending':{\r\n            const newList = [...orderList].sort((a,b) => { return new Date(a.issued_date) - new Date(b.issued_date)});\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'c_ascending':{\r\n            const newList = [...orderList].sort((a,b) => (a.c_email > b.c_email) ? 1 : ((b.c_email > a.c_email) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'c_decending':{\r\n            const newList = [...orderList].sort((a,b) => (a.c_email < b.c_email) ? 1 : ((b.c_email < a.c_email) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'cn_ascending':{\r\n            const newList = [...orderList].sort((a,b) => (a.carrier > b.carrier) ? 1 : ((b.carrier > a.carrier) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'cn_decending':{\r\n            const newList = [...orderList].sort((a,b) => (a.carrier < b.carrier) ? 1 : ((b.carrier < a.carrier) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        default: {\r\n            setOrdersList(orderList);\r\n        }\r\n    }\r\n}","import { emailNotFound } from './Modals';\r\n\r\nexport const filterEmail = (orders, c_email, setOrdersList) => {\r\n    const filteredOrders =  orders.filter(order => {\r\n        return order.c_email === c_email;\r\n    });\r\n\r\n    if(filteredOrders.length !== 0) setOrdersList(filteredOrders);\r\n    else emailNotFound();\r\n}\r\n\r\nexport const setOrder = (order, orderList, setOrdersList) => {\r\n    switch(order){\r\n        case 'd_decending':{\r\n            const newList = [...orderList].sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'd_ascending':{\r\n            const newList = [...orderList].sort((a,b) => { return new Date(a.issued_date) - new Date(b.issued_date)});\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'c_ascending':{\r\n            const newList = [...orderList].sort((a,b) => (a.c_email > b.c_email) ? 1 : ((b.c_email > a.c_email) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'c_decending':{\r\n            const newList = [...orderList].sort((a,b) => (a.c_email < b.c_email) ? 1 : ((b.c_email < a.c_email) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'cn_ascending':{\r\n            const newList = [...orderList].sort((a,b) => (a.carrier > b.carrier) ? 1 : ((b.carrier > a.carrier) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        case 'cn_decending':{\r\n            const newList = [...orderList].sort((a,b) => (a.carrier < b.carrier) ? 1 : ((b.carrier < a.carrier) ? -1 : 0));\r\n            setOrdersList(newList);\r\n            break;\r\n        }\r\n        default: {\r\n            setOrdersList(orderList);\r\n        }\r\n    }\r\n}","import { Modal } from 'antd';\r\n\r\nexport const emailNotFound = () => {\r\n    Modal.warning({\r\n        title: 'Email not found',\r\n        content: (\r\n            <div>\r\n                <p>Please check the spelling is correct</p>\r\n            </div>\r\n        ),\r\n        onOk() {},\r\n    });\r\n  }","import { Select, Pagination, Input, Button, Spin } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\nimport { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getCompleteOrders } from '../../_actions/completeOrderActions';\r\nimport { filterEmail, setOrder } from './Functions';\r\nimport { useAuthUpdate, useAuth } from '../../SharedComponents/AuthContext/AuthContext'; \r\n\r\nconst { Option, OptGroup } = Select;\r\n\r\nconst itemsPerPage = 10;\r\n\r\nconst ProcessedOrders = () => {\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const orders = useSelector(state => state.completeOrdersState.completeOrders);\r\n    const error = useSelector(state => state.completeOrdersState.error);\r\n    const loading = useSelector(state => state.completeOrdersState.loading);\r\n    const empty = useSelector(state => state.completeOrdersState.empty);\r\n\r\n    const [page, setPage] = useState(0);\r\n    const [ordersList, setOrdersList] = useState([]);\r\n\r\n    const maxNumberOfPages = (Math.ceil(orders.length/itemsPerPage) - 1);\r\n\r\n    let renderableProducts = [];\r\n    let row = <></>\r\n\r\n    useEffect(() => {\r\n        if(!orders.length && !empty) dispatch(getCompleteOrders(auth.access_token, updateAuth));\r\n        else setOrdersList(orders);      \r\n    }, [orders.length, orders, dispatch, auth.access_token, updateAuth]);\r\n    \r\n    const onChange = p => { setPage(p - 1) };\r\n\r\n    if(ordersList.length !== 0){\r\n        renderableProducts = ordersList.slice( page * itemsPerPage, \r\n            ((page + 1) * itemsPerPage) > ordersList.length ? ordersList.length : ((page + 1) * itemsPerPage));\r\n        \r\n            row = renderableProducts.map(o => {\r\n                const date = new Date(o.issued_date);\r\n                const dateString = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`;\r\n                \r\n                return (\r\n                    <tr key = {o.po_number}>\r\n                        <td>{o.po_number}</td>\r\n                        <td>{o.c_email}</td>\r\n                        <td>{dateString}</td>\r\n                        <td><strong>{(o.tracking_number === null || (o.tracking_number !== null && o.tracking_number.length === 0)) ? <em>Not Available</em> : o.tracking_number}</strong></td>\r\n                        <td>{(o.carrier === null || (o.carrier !== null && o.carrier.length === 0)) ? <em>Not Available</em> : o.carrier}</td>\r\n                        <td><Button type=\"secondary\" onClick={() => {\r\n                            history.push(`/order/${o.po_number}/${o.status}`);\r\n                        }}> View </Button></td>\r\n                    </tr>\r\n                );\r\n            });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Processed Orders</h2>\r\n            </div>\r\n            <div className=\"container flex-horizontal-box-container\">\r\n                <Select allowClear placeholder=\"Order By\" className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\"\r\n                onSelect={v => {setOrder(v, ordersList, setOrdersList)}}>\r\n                    <OptGroup label=\"Data Issued\">\r\n                        <Option value=\"d_decending\">Latest</Option>\r\n                        <Option value=\"d_ascending\">Earliest</Option>\r\n                    </OptGroup>\r\n                    <OptGroup label=\"Customer Email\">\r\n                        <Option value=\"c_ascending\">A-Z</Option>\r\n                        <Option value=\"c_decending\">Z-A</Option>\r\n                    </OptGroup>\r\n                    <OptGroup label=\"Carrier Name\">\r\n                        <Option value=\"cn_ascending\">A-Z</Option>\r\n                        <Option value=\"cn_decending\">Z-A</Option>\r\n                    </OptGroup>  \r\n                </Select>\r\n            \r\n                <Input.Search\r\n                    id='processed-orders-email-filter'\r\n                    className=\"box-item-xs-6 box-item-sm-4 box-item-md-4 box-item-lg-4 box-item-xl-3\"\r\n                    placeholder=\"Search Customer Email\"\r\n                    enterButton=\"Search\"\r\n                    onSearch = { c_email => { \r\n                        if(c_email !== \"\"){\r\n                            filterEmail(ordersList, c_email, setOrdersList);\r\n                            setPage(0);\r\n                        } \r\n                    }}\r\n                />\r\n            \r\n                <Button\r\n                    className=\"box-item-xs-3 box-item-sm-4 box-item-md-3 box-item-lg-2 box-item-xl-2\"\r\n                    type=\"secondary\"\r\n                    onClick = { () => {\r\n                    setOrdersList(orders);\r\n                    document.getElementById('processed-orders-email-filter').value = \"\";\r\n                }}>Reset Filters</Button>\r\n            </div>\r\n\r\n            <div className=\"container table-container\">\r\n                {loading ? <div style={{ textAlign: 'center' }}><Spin size='large' /></div> :\r\n                    error ? <h1 style={{ textAlign: 'center', color: 'red' }}> Could not load data, please try refreshing page </h1> :\r\n                        <table className=\"box-shadow center-content\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>PO Number</th>\r\n                                    <th>Customer Email</th> \r\n                                    <th>Date Issued</th>\r\n                                    <th>Tracking Number</th> \r\n                                    <th>Carrier</th>\r\n                                    <th>View Order</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {row}\r\n                            </tbody>\r\n                        </table>\r\n                }\r\n                <Pagination current={page + 1} defaultCurrent={1} total={(maxNumberOfPages + 1) * 10} onChange={onChange} className=\"text-center\" />\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProcessedOrders;","//Form layout stuff\r\nexport const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n};\r\n\r\nexport const tailLayout = {\r\n    wrapperCol: { offset: 8, span: 16 },\r\n};","import { Modal } from 'antd';\r\nimport { postCompanyInfo } from './Functions';\r\nimport { history } from '../../_helpers/history';\r\n\r\nexport const errorLoading = () => {\r\n    Modal.error({\r\n        title: 'ERROR',\r\n        content: 'Could not load company information. Please try reloading the page.',\r\n    });    \r\n}\r\n\r\nexport const editSuccess = () => {\r\n    Modal.info({\r\n        title: 'Success',\r\n        content: 'Company information was edited successfully.',\r\n        onOk(){\r\n            history.push('/admin');\r\n        }\r\n    });    \r\n}\r\n\r\nexport const editFail = () => {\r\n    Modal.error({\r\n        title: 'ERROR',\r\n        content: 'There was a problem posting company information. Please try again.',\r\n    });    \r\n}\r\n\r\nexport const confirmEdit = (newInfo, access_token, updateAuth) => {\r\n    Modal.confirm({\r\n        title: 'Confirm',\r\n        content: 'Are you sure you want to edit the company information?',\r\n        onOk(){\r\n            return postCompanyInfo(newInfo, access_token, updateAuth);\r\n        }\r\n    });\r\n}","import axios from 'axios';\r\nimport { editSuccess, editFail } from './Modals';\r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\nexport const setFormValues = (info, form) => {\r\n    form.setFieldsValue({\r\n        c_number: info.c_number,\r\n        c_address: info.c_address,\r\n        c_email: info.c_email,\r\n        c_TandC: info.c_TandC,\r\n        c_about: info.c_about,\r\n        c_delivery: info.c_delivery,\r\n        c_blog: info.c_blog\r\n    });\r\n}\r\n\r\nexport const postCompanyInfo = (newInfo, access_token, updateAuth) => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n\r\n    return axios.post('/api/aboutus/edit-info', newInfo, config)\r\n        .then(res => {\r\n            if(res.data.success)editSuccess();\r\n            else{\r\n                console.log(res);\r\n                editFail();\r\n            } \r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            if(err.response.status === 401) _logout(updateAuth);\r\n            else editFail();\r\n        });\r\n}","import '../../_assets/CSS/pages/EditCompanyInfo/EditCompanyInfo.css';\r\n\r\nimport { Form, Input, Button, Spin } from 'antd';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuthUpdate, useAuth } from '../../SharedComponents/AuthContext/AuthContext'; \r\nimport { layout, tailLayout } from './FormLayout';\r\nimport { setFormValues } from './Functions';\r\nimport { errorLoading, confirmEdit } from './Modals';\r\n\r\n\r\nconst EditCompanyInfo = () => {\r\n\r\n    const [form] = Form.useForm();\r\n    const [companyInfo, setCompanyInfo] = useState(null);\r\n    const [dataLoading, setDataLoading] = useState(true);\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    useEffect(() => {\r\n        axios.get('/api/aboutus/')\r\n        .then(res => {\r\n            setCompanyInfo(res.data);\r\n            setFormValues(res.data, form);\r\n            setDataLoading(false);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            errorLoading();\r\n            setDataLoading(false);\r\n        })\r\n    }, [form]);\r\n\r\n\r\n\r\n\r\n\r\n    //form functions\r\n    const onFinish = newInfo => {\r\n        newInfo.c_about = \"_\";                 //about us has been removed. This stops backend from breaking\r\n        if(JSON.stringify(newInfo) !== JSON.stringify(companyInfo)){\r\n            confirmEdit(newInfo, auth.access_token, updateAuth);\r\n        } \r\n    };\r\n    \r\n    const onFinishFailed = errorInfo => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n    \r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"eci-text\">Edit Company Information</h1>\r\n\r\n            <p className=\"eci-text\">The input fields contain the current company information. Edit these fields if you wish to make changes.</p>\r\n\r\n            {\r\n                dataLoading\r\n                ?   <div style = {{textAlign: 'center'}}>\r\n                        <Spin size = 'large' />\r\n                        <h3 style = {{color: '#EB6E00'}}>Data Loading</h3>\r\n                    </div>\r\n                :   <Form\r\n                        {...layout}\r\n                        form={form}\r\n                        onFinish={onFinish}\r\n                        onFinishFailed={onFinishFailed}\r\n                        style = {{fontWeight: \"bold\"}}\r\n                        validateTrigger = 'onSubmit'\r\n                    >\r\n                        <Form.Item \r\n                            label=\"Company Number\" \r\n                            name=\"c_number\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input style = {{width: \"500px\"}} maxLength={20}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item \r\n                            label=\"Company Address\" \r\n                            name=\"c_address\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input style = {{width: \"500px\"}} maxLength={500}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item \r\n                            label=\"Company Email\" \r\n                            name=\"c_email\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input  style = {{width: \"500px\"}} maxLength={50}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item \r\n                            label=\"Terms and Conditions\" \r\n                            name=\"c_TandC\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input.TextArea style = {{width: \"500px\"}} rows = {6} maxLength={30000}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item \r\n                            label=\"Delivery and Dispatch\" \r\n                            name=\"c_delivery\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input.TextArea style = {{width: \"500px\"}} rows = {6} maxLength={30000}/>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item \r\n                            label=\"Company Blog\" \r\n                            name=\"c_blog\"\r\n                            rules={[{\r\n                                whitespace: true, \r\n                                required: true, \r\n                                message: 'Please provide data' \r\n                            }]}\r\n                        >\r\n                            <Input.TextArea style = {{width: \"500px\"}} rows = {6} maxLength={30000}/>\r\n                        </Form.Item>\r\n                        \r\n                        {\r\n                            companyInfo !== null\r\n                            ?   <Form.Item {...tailLayout}>\r\n                                    <Button type=\"primary\" htmlType=\"submit\"> Set Company Information </Button>\r\n                                </Form.Item>\r\n                            : <></>\r\n                        } \r\n                    </Form>\r\n            }  \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditCompanyInfo;","import { deleteConfirm } from '../../SharedComponents/Modals/Modals';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { history } from '../../_helpers/history';\r\nimport { getCategoryName } from '../../_services/SharedFunctions';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport { useEffect } from 'react';\r\nimport { useAuthUpdate, useAuth } from '../../SharedComponents/AuthContext/AuthContext';\r\n\r\n//All rows for the Product table\r\n\r\nconst ProductTableRows = props => {\r\n    const categories = props.categories;\r\n    const productsList = props.productsList;\r\n    const dispatch = props.dispatch;\r\n    const page = props.page;\r\n    const itemsPerPage = 10;\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    useEffect(() => {             \r\n        if(!categories.length) dispatch(getAllCategories());\r\n    }, [categories.length, dispatch]);\r\n\r\n    \r\n\r\n\r\n    let renderableProducts;\r\n    let row;\r\n    \r\n    if(!productsList.length)row = [];             //wait until data is loaded before performing operations it\r\n    else{\r\n        renderableProducts = productsList.slice( page * itemsPerPage, \r\n            ((page + 1) * itemsPerPage) > productsList.length ? productsList.length : ((page + 1) * itemsPerPage));\r\n        \r\n        row = renderableProducts.map((p, i) => {\r\n            return (\r\n                <tr key = {p._id} className=\"manage-products-table-row\">\r\n                    <td>{p.p_name}</td>\r\n                    <td>{p.p_code}</td>\r\n                    <td>${p.p_price}</td>\r\n                    <td>{p.p_unit}</td>\r\n                    <td>{ getCategoryName(p.p_categories, categories) }</td>\r\n                    <td>\r\n                        <EditOutlined props={p.p_code} className=\"manage-products-icon\" onClick={() => {\r\n                            history.push(`/editAddProducts/${p.p_code}`);\r\n                        }}/> \r\n                        <DeleteOutlined className=\"manage-products-icon\" onClick={() => { deleteConfirm(p.p_code, dispatch, auth.access_token, updateAuth) }} style = {{paddingLeft: \"15px\"}}/> \r\n                    </td>\r\n                </tr>\r\n            );\r\n        });\r\n    }\r\n\r\n    return row;\r\n}\r\n\r\nexport default ProductTableRows;","import '../../_assets/CSS/pages/ManageProducts/ManageProducts.css';\r\nimport { Select, Pagination, Spin } from 'antd';\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { history } from '../../_helpers/history';\r\nimport { getAllProducts, setDefaultOrder } from '../../_actions/productActions';\r\nimport { handleFilter, handleOrder } from './Functions';\r\nimport ProductTableRows from './ProductTableRows';\r\n\r\nconst { Option, OptGroup } = Select;\r\n\r\n\r\n\r\n\r\n\r\nconst ManageProducts = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const productsList = useSelector(state => state.productState.products);                 //Redux store product list\r\n    const errorLoading = useSelector(state => state.productState.error);\r\n    const loading = useSelector(state => state.productState.isLoading);\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    \r\n    const [filter, setFilter] = useState(null);             //filtering and current page number\r\n    const [order, setOrder] = useState(null);\r\n    const [page, setPage] = useState(0);\r\n\r\n    let processedProductsList = [...productsList];         \r\n\r\n    if(filter !== null && filter !== 'default') processedProductsList = handleFilter(processedProductsList, filter);        //filtering and ordering the product list\r\n    if(order !== null) processedProductsList = handleOrder(processedProductsList, order);\r\n\r\n    const itemsPerPage = 10;\r\n    const maxNumberOfPages = (Math.ceil(processedProductsList.length/itemsPerPage) - 1);             //pagination stuff\r\n\r\n    const productTableRowsProps = {                                                         //props for the product table rows\r\n        productsList: processedProductsList,\r\n        page: page,\r\n        dispatch: dispatch,\r\n        categories: categories,\r\n    }\r\n\r\n    useEffect(() => {                                                     //checks if the store is empty. If so, do an API request\r\n        if(!productsList.length) dispatch(getAllProducts());\r\n        else dispatch(setDefaultOrder());\r\n    }, [productsList.length, dispatch]);\r\n\r\n    let selectCategories = <></>;                                           //dynamically loading categories to filter products in select bar\r\n    if(categories.length !== 0){\r\n        selectCategories = categories.map(p => {\r\n            return <Option key={p._id} value={p._id}>{p.c_name}</Option>\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div >\r\n            <div id=\"manage-products-header\">Manage Products</div>\r\n\r\n            <div>\r\n                <table id=\"manage-products-select-table\" className=\"center-content\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <div style={{fontSize: \"30px\", fontWeight: \"bold\"}}>Products</div>\r\n                            </td>\r\n                            <td>\r\n                                <Select placeholder=\"Filter by\" style={{ width: \"300px\" }} onChange={e => {setFilter(e); setPage(0)}}>\r\n                                    <Option key={'default'} value={'default'}>{'Remove Filter'}</Option>\r\n                                    \r\n                                    <OptGroup label=\"Category\">\r\n                                        {selectCategories}\r\n                                    </OptGroup>    \r\n                                </Select>\r\n                            </td>\r\n                            \r\n                            <td>\r\n                                <Select placeholder=\"Order By\" style = {{width:\"300px\"}} onChange={v => setOrder(v)}>\r\n                                    <OptGroup label=\"Price\">\r\n                                        <Option value=\"p_decending\">high to low</Option>\r\n                                        <Option value=\"p_ascending\">low to high</Option>\r\n                                    </OptGroup>\r\n                                    <OptGroup label=\"Name\">\r\n                                        <Option value=\"n_ascending\">A-Z</Option>\r\n                                        <Option value=\"n_decending\">Z-A</Option>\r\n                                    </OptGroup>\r\n                                    <OptGroup label=\"Item Code\">\r\n                                        <Option value=\"i_ascending\">A-Z</Option>\r\n                                        <Option value=\"i_decending\">Z-A</Option>\r\n                                    </OptGroup>  \r\n                                </Select>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>  \r\n            </div>\r\n\r\n            {errorLoading ? <h1 style = {{textAlign: 'center', color: 'red'}}>Could not load data, please try again</h1> : <></>}\r\n            {loading ? <div style={{textAlign: 'center'}}><Spin size=\"large\"/></div> : <></>}\r\n      \r\n            <div style = {{height: \"500px\", display: \"table\"}}>\r\n                <table style={{width:\"100%\", textAlign: \"center\", tableLayout: \"fixed\"}}>\r\n                    <tbody>\r\n                        <tr style = {{border: \"solid black 1px\"}}>\r\n                            <th>Product Name</th>\r\n                            <th>Product Code</th> \r\n                            <th>Price</th>\r\n                            <th>Unit</th>\r\n                            <th>Category</th> \r\n                            <th className=\"manage-products-icon\" style ={{fontSize: \"30px\"}} onClick={() => {\r\n                                history.push('/editAddProducts');\r\n                            }}>+</th>\r\n                        </tr>\r\n                      \r\n                      <ProductTableRows {...productTableRowsProps} />\r\n                    </tbody>\r\n                </table>  \r\n            </div>\r\n            \r\n            <div style = {{textAlign: \"center\"}}>\r\n                <Pagination current={page + 1} total={(maxNumberOfPages + 1) * 10} onChange = {p => {setPage(p - 1)}}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ManageProducts;","//Filter and sort functions\r\n\r\nexport const handleFilter = (products, filter) => {\r\n    return products.filter(product => {\r\n        return product.p_categories === filter;\r\n    });\r\n}\r\n\r\n\r\nexport const handleOrder = (products, order) => {\r\n    switch(order){\r\n        case \"p_decending\": {\r\n            return products.sort((a,b) => (Number(a.p_price) < Number(b.p_price)) ? 1 : ((Number(b.p_price) < Number(a.p_price)) ? -1 : 0));\r\n        }\r\n        case \"p_ascending\": {\r\n            return products.sort((a,b) => (Number(a.p_price) > Number(b.p_price)) ? 1 : ((Number(b.p_price) > Number(a.p_price)) ? -1 : 0));\r\n        }\r\n        case \"n_ascending\": {\r\n            return products.sort((a,b) => (a.p_name > b.p_name) ? 1 : ((b.p_name > a.p_name) ? -1 : 0));\r\n        }\r\n        case \"n_decending\": {\r\n            return products.sort((a,b) => (a.p_name < b.p_name) ? 1 : ((b.p_name < a.p_name) ? -1 : 0));\r\n        }\r\n        case \"i_ascending\": {\r\n            return products.sort((a,b) => (a.p_code > b.p_code) ? 1 : ((b.p_code > a.p_code) ? -1 : 0));\r\n        }\r\n        case \"i_decending\": {\r\n            return products.sort((a,b) => (a.p_code < b.p_code) ? 1 : ((b.p_code < a.p_code) ? -1 : 0));\r\n        }\r\n        default: return;\r\n    }\r\n}","export const EDIT = \"EDIT\";\r\nexport const ADD = \"ADD\";","import { Modal} from 'antd';\r\nimport { onRemove } from './Functions'; \r\nimport { history } from '../../_helpers/history';\r\nimport { _editProduct, _addProduct } from './Functions';\r\nimport { editProduct, addProduct } from '../../_actions/productActions'; \r\nimport { _logout } from '../../_services/SharedFunctions';\r\n\r\nexport const imageModal = (src, file, fileList, updateFileList, product, setProduct) => {           //displays the preview of the image\r\n    Modal.confirm({\r\n        title: 'Image Preview',\r\n        icon: null,\r\n        content: <img alt=\"example\" style={{ width: '100%' }} src={src} />,\r\n        okText:\"Keep Image\",\r\n        cancelText: \"Delete Image\",\r\n        onOk() {},\r\n        onCancel() {\r\n            onRemove(file, fileList, updateFileList, product, setProduct)\r\n        },\r\n    });\r\n}\r\n\r\nconst editSuccess = p_code => {                                 \r\n    Modal.info({\r\n        title: \"Edit Successful\",\r\n        content: `Successfully edited product: ${p_code}`,\r\n        okText: \"Ok\",\r\n        onOk(){ history.push('/admin') }\r\n    });\r\n}\r\n\r\nconst addSuccess = p_code => {\r\n    Modal.info({\r\n        title: \"Add Successful\",\r\n        content: `Successfully added product: ${p_code}`,\r\n        okText: \"Ok\",\r\n        onOk(){ history.push('/admin') }\r\n    });\r\n}\r\n\r\n\r\nconst editFail = p_code => {\r\n    Modal.info({\r\n        title: \"ERROR\",\r\n        content: `There was a problem editing product: ${p_code}. Please try again or contact support.`,\r\n        okText: \"Ok\",\r\n        onOk(){ history.push('/admin') }\r\n    });\r\n}\r\n\r\nconst addFailPcode = p_code => {\r\n    Modal.info({\r\n        title: \"ERROR\",\r\n        content: `There was a problem adding product: ${p_code}. Please make sure the item code is not taken.`,\r\n        okText: \"Ok\"\r\n    });\r\n}\r\n\r\nconst addFail = p_code => {\r\n    Modal.info({\r\n        title: \"ERROR\",\r\n        content: `There was a problem adding product: ${p_code}. Please try again or contact support.`,\r\n        okText: \"Ok\",\r\n        onOk(){ history.push('/admin') }\r\n    });\r\n}\r\n\r\n \r\n\r\nexport const confirmEdit = (newProduct, formData, access_token, updateAuth, dispatch) => {                //confirms the edit\r\n    const config = { \r\n        headers:{ \r\n            authorization : `Bearer ${access_token}`,\r\n            'content-type': 'multipart/form-data'\r\n        }\r\n    };\r\n\r\n    Modal.confirm({\r\n        title: `Editing product: ${newProduct.p_code}`,\r\n        content: 'Are you sure you want to make these edits?',\r\n        onOk() {\r\n            if(dispatch !== undefined){                                     //if dispatch is defined then need to send product to the redux store (as well as the db)\r\n                \r\n                return dispatch(editProduct(newProduct, formData, access_token, updateAuth))\r\n                .then(res => {\r\n                    if(res.data.success){\r\n                        editSuccess(newProduct.p_code);\r\n                    } \r\n                    else { \r\n                        console.log(\"Error\", res);\r\n                        editFail(newProduct.p_code);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Error\", err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else editFail(newProduct.p_code);\r\n                });\r\n            }\r\n            else{                                               //else just push it to the db\r\n                return _editProduct(formData, config)\r\n                .then(res => {\r\n                    if(res.data.success) editSuccess(newProduct.p_code);\r\n                    else{\r\n                        console.log(res);\r\n                        editFail(newProduct.p_code);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else editFail(newProduct.p_code);\r\n                });\r\n            } \r\n        },\r\n        onCancel() {}\r\n    })\r\n}\r\n\r\nexport const confirmAdd = (newProduct, formData, access_token, updateAuth, dispatch) => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n\r\n    Modal.confirm({\r\n        title: `Adding product: ${newProduct.p_code}`,\r\n        content: 'Are you sure you want to add this product?',\r\n\r\n        onOk() {\r\n            if(dispatch !== undefined){                                             //if dispatch is defined need to send it to the redux store (as well as the db)\r\n                return dispatch(addProduct(formData, newProduct, access_token))\r\n                .then(res => {\r\n                    if(res.data.success) addSuccess(newProduct.p_code);\r\n                    else { \r\n                        console.log(\"Error\", res);\r\n                        addFailPcode(newProduct.p_code);\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Error\", err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else addFail(newProduct.p_code);\r\n                });\r\n            }\r\n            else{                                                                 //else just push it directly to the db\r\n                return _addProduct(formData, config)\r\n                .then(res => {\r\n                    if(res.data.success) addSuccess(newProduct.p_code);\r\n                    else{\r\n                        console.log(\"Error\", res);\r\n                        addFailPcode(newProduct.p_code);\r\n                    }\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Error\", err);\r\n                    if(err.response.status === 401) _logout(updateAuth);\r\n                    else addFail(newProduct.p_code);\r\n                });\r\n            } \r\n        },\r\n        onCancel() {},\r\n    })\r\n}","import axios from 'axios';\r\nimport { EDIT } from './PageStates';\r\nimport { history } from '../../_helpers/history';\r\nimport { imageModal } from './Modals';\r\nimport { message } from 'antd';\r\n\r\n/*\r\nconst config = {            \r\n    headers: {\r\n        'content-type': 'multipart/form-data'\r\n    }\r\n}*/\r\n\r\nexport const getProduct = (p_code, setProduct, setPageState) => {               //returns an individual product\r\n    axios.post('/api/products/product-by-id', { \r\n        p_code: p_code\r\n    })\r\n    .then(res => {\r\n        if(res.data.p_code === p_code){\r\n            setProduct(res.data);\r\n            setPageState(EDIT);\r\n        }\r\n        else{\r\n            history.push('/editAddProducts');\r\n            window.location.reload();\r\n        } \r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n        history.push('/editAddProducts');\r\n        window.location.reload();\r\n    })\r\n}\r\n\r\nexport const _editProduct = (product, config) => {                                //api for edit a product\r\n    return axios.post('/api/products/edit-product', product, config);\r\n}\r\n\r\nexport const _addProduct = (formData, config) => {                                        //api for add a product\r\n    return axios.post('api/products/add-product', formData, config);\r\n}\r\n\r\n\r\nexport const _getProduct = (p_code, productsList) => {                  //gets product from the Store\r\n    return productsList.find(product => {\r\n        return product.p_code === p_code;\r\n    });\r\n}\r\n\r\nexport const onPriceChange = (e, form) => {                            //controling user price input\r\n    const reg = /^(\\d+(\\.\\d{0,2})?|\\.?\\d{1,2})$/;\r\n    let str = e.target.value;\r\n\r\n    if (str === '' || reg.test(str)) form.setFieldsValue({p_price: str});\r\n    else{\r\n        str = str.substring(0, str.length - 1);\r\n        if(!reg.test(str)) form.setFieldsValue({p_price: ''});\r\n        else form.setFieldsValue({p_price: str});   \r\n    }  \r\n}\r\n\r\nexport const onPreview = async (file, fileList, updateFileList, product, setProduct) => {        //handles image preview\r\n    let src = file.url;\r\n    if(!src){\r\n        src = await new Promise(resolve => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file.originFileObj);\r\n            reader.onload = () => resolve(reader.result);\r\n        });\r\n        imageModal(src, file, fileList, updateFileList);                //viewing a new file\r\n    }\r\n    else imageModal(src, file, fileList, updateFileList, product, setProduct);                //viewing a pre-established file\r\n}\r\n\r\nexport const beforeUpload = (file, fileList) => {                                       //handles image upload\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if(!isJpgOrPng) message.error('You can only upload JPG/PNG file!');\r\n\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if(!isLt2M) message.error('Image must smaller than 2MB!');\r\n\r\n    if(!isJpgOrPng || !isLt2M) {\r\n        file = null;\r\n        fileList.pop();\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const onRemove = (file, fileList, updateFileList, product, setProduct) => {               //handles image removal\r\n    const index = fileList.indexOf(file);\r\n\r\n    const newFileList = fileList.slice();\r\n    newFileList.splice(index, 1);\r\n    updateFileList(newFileList);\r\n\r\n    if(file.uid.startsWith(\"EST\")){                             //delete from p_image_uri if file is pre-established (not a newly added file)\r\n        const new_p_image_uri = product.p_image_uri.slice();\r\n        const newProduct = product;\r\n\r\n        new_p_image_uri.splice(index, 1);\r\n        newProduct.p_image_uri = new_p_image_uri;\r\n\r\n        setProduct(newProduct);\r\n    }\r\n}\r\n\r\nexport const setFormValues = (form, product) => {                 //sets the values of the form to appropriate values when in edit mode\r\n    let p_units_sold = \"\";\r\n\r\n    form.setFieldsValue({\r\n        p_name: product.p_name,\r\n        p_code: product.p_code,\r\n        p_units_sold: p_units_sold,\r\n        p_price: product.p_price.toString(),\r\n        p_categories: product.p_categories,\r\n        p_description: product.p_description,\r\n        p_unit: product.p_unit,\r\n        p_image_uri: []\r\n    });\r\n}\r\n\r\nexport const checkProductsEqual = (product_a, product_b, numberOfNewImages, originalFileLength) => {                   //checks if the product has been edited or not\r\n        if(product_a.p_code === product_b.p_code && \r\n            product_a.p_categories === product_b.p_categories && \r\n            product_a.p_name === product_b.p_name &&\r\n            product_a.p_description === product_b.p_description &&\r\n            JSON.stringify(product_a.p_image_uri) === JSON.stringify(product_b.p_image_uri) &&           \r\n            product_a.p_price === product_b.p_price.toString() && \r\n            product_a.p_image_uri.length + numberOfNewImages === product_b.p_image_uri.length &&\r\n            product_a.p_image_uri.length === originalFileLength &&\r\n            product_a.p_unit === product_b.p_unit &&\r\n            JSON.stringify(product_a.p_size) === JSON.stringify(product_b.p_size)){\r\n                return true\r\n            }\r\n            return false;   \r\n}\r\n\r\nexport const createFormData = (newProduct, fileList) => {               //create form data for add mode\r\n    let formData = new FormData();\r\n\r\n    newProduct.p_size.forEach(s => {\r\n        formData.append('p_size[]', s);               //appending all sizes to the form data\r\n    });\r\n\r\n    [...fileList].forEach(image => {\r\n        formData.append(\"images\", image.originFileObj);\r\n    });\r\n\r\n    formData.append(\"p_name\", newProduct.p_name);\r\n    formData.append(\"p_code\", newProduct.p_code);\r\n    formData.append(\"p_units_sold\", newProduct.p_units_sold);\r\n    formData.append(\"p_price\", newProduct.p_price);\r\n    formData.append(\"p_categories\", newProduct.p_categories);\r\n    formData.append(\"p_description\", newProduct.p_description);\r\n    formData.append(\"p_unit\", newProduct.p_unit);\r\n\r\n    return formData;\r\n}\r\n\r\nexport const createFormDataEdit = (newProduct, product, fileList) => {              //create form data for edit mode\r\n    let formData = new FormData();\r\n\r\n    formData.append(\"p_name\", newProduct.p_name);\r\n    formData.append(\"p_code\", newProduct.p_code);\r\n    formData.append(\"p_units_sold\", newProduct.p_units_sold);\r\n    formData.append(\"p_price\", newProduct.p_price);\r\n    formData.append(\"p_categories\", newProduct.p_categories);\r\n    formData.append(\"p_description\", newProduct.p_description);\r\n    formData.append(\"p_unit\", newProduct.p_unit);\r\n\r\n    newProduct.p_size.forEach(s => {\r\n        formData.append('p_size[]', s);               //appending all sizes to the form data\r\n    });\r\n\r\n    if(product.p_image_uri <= 0) formData.append(\"p_image_uri\", []);\r\n    else{\r\n        [...product.p_image_uri].forEach(image => {\r\n            formData.append(\"p_image_uri\", image); \r\n        });\r\n    }\r\n    \r\n    [...fileList].forEach(image => {    //If the image file starts with EST it is a preexisting image that does not need to be added\r\n        if(!image.uid.startsWith('EST')){\r\n            formData.append(\"image\", image.originFileObj);\r\n            newProduct.p_image_uri.push(URL.createObjectURL(image.originFileObj));       //adding blobs to newProduct so the store contains image URLS \r\n        } \r\n    });\r\n\r\n    return formData;\r\n}\r\n\r\nexport const checkBlob = (p_image_uri) => {                                     //for checking the p_image_uri field for blobs\r\n    for(let i = 0; i < p_image_uri.length; i++){\r\n        if(p_image_uri[i].includes(\"blob\")){\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const addUriToFileList = (p_image_uri, updateFileList) => {              //adds pretend images to the updload input \r\n    const newFileList = [];\r\n    p_image_uri.forEach((uri, i) => {\r\n        newFileList.push(\r\n            {\r\n                uid: `EST_${i}`,\r\n                name: `image_${i}`,\r\n                status: 'done',\r\n                url: uri,\r\n            }\r\n        )\r\n    });\r\n    updateFileList(newFileList);\r\n}\r\n\r\nexport const deleteSizeOption = (s, sizeOptions, setSizeOptions) => {\r\n    const temp = [...sizeOptions];\r\n    const i = temp.indexOf(s);\r\n    if(i !== -1) temp.splice(i, 1);\r\n    setSizeOptions(temp);\r\n}\r\n\r\nexport const addSizeOption = (sizeOptions, setSizeOptions) => {\r\n    const s = document.getElementById('size-option-input').value;\r\n    if(s === \"\") return;\r\n    setSizeOptions([...sizeOptions, s]);\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Upload, Button, Form, Input, Select } from 'antd';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport '../../_assets/CSS/pages/AddEditProduct/AddEditProduct.css';\r\nimport { EDIT, ADD } from './PageStates';\r\nimport { history } from '../../_helpers/history'; \r\nimport { \r\n    getProduct, \r\n    _getProduct, \r\n    onPriceChange, \r\n    onPreview, \r\n    beforeUpload, \r\n    onRemove, \r\n    setFormValues, \r\n    checkProductsEqual, \r\n    addUriToFileList, \r\n    createFormDataEdit,\r\n    deleteSizeOption,\r\n    addSizeOption\r\n} from './Functions';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport { removeSpaces } from '../../_services/SharedFunctions';\r\nimport { confirmEdit, confirmAdd } from './Modals'; \r\nimport { createFormData, checkBlob } from './Functions';\r\nimport { useAuth, useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\n\r\nconst { Option, OptGroup } = Select;\r\n\r\n\r\n\r\n\r\n\r\nconst AddEditProduct = () => {\r\n\r\n    const { p_code } = useParams();\r\n\r\n    const dispatch = useDispatch();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const productsList = useSelector(state => state.productState.products);\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    const emptyCategories = useSelector(state => state.categoryState.empty);        //for checking there are categories available \r\n\r\n    const [parentCategoires, setParentCategories] = useState([]);\r\n    const [childCategories, setChildCategories] = useState([]);\r\n\r\n    const [pageState, setPageState] = useState(null);\r\n    const [product, setProduct] = useState(null);\r\n    const [fileList, updateFileList] = useState([]);\r\n    const [originalImageListLength, setOriginalImageListLength] = useState(0);      //used for checking if the newly edited file differs from the original\r\n    const [newPage, setNewPage] = useState(true);                 //checks if the page is fresh \r\n    const [sizeOptions, setSizeOptions] = useState([]);\r\n\r\n    const [form] = Form.useForm();\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => {                                                //Changes the page state to edit or Add. Will also determine if API call necessary\r\n        if(p_code){\r\n            if(productsList.length !== 0){                              //dont make API call if redux store is populated\r\n                const product = _getProduct(p_code, productsList);\r\n                if(checkBlob(product.p_image_uri) && newPage) window.location.reload(); //checks if the file list contains a blob. will not trigger unless the page is in a fresh state\r\n                if(product !== undefined){\r\n                    setProduct(product);            \r\n                    setPageState(EDIT);\r\n                }\r\n                else{                                   //if some nonsense is typed in the URL\r\n                    history.push('/editAddProducts');\r\n                    window.location.reload();\r\n                }                                \r\n            }\r\n            else getProduct(p_code, setProduct, setPageState);\r\n        }\r\n        else setPageState(ADD);\r\n\r\n        if(!categories.length && !emptyCategories) dispatch(getAllCategories());        //sets up the parent and child categories in the select input\r\n        else{   \r\n            if(!parentCategoires.length){\r\n                const parents = categories.filter(c => { return c.path === null });\r\n                setParentCategories(parents);\r\n            }\r\n            if(!childCategories.length){\r\n                const children = categories.filter(c => { return c.path !== null; });\r\n                setChildCategories(children);\r\n            }\r\n        }\r\n\r\n    }, [categories.length, dispatch, p_code, productsList, categories, childCategories.length, emptyCategories, parentCategoires.length, newPage]);\r\n        \r\n    useEffect(() => {                                                       \r\n        if(pageState === EDIT && newPage){\r\n            setFormValues(form, product, categories);       //sets the form values if in edit mode\r\n            setOriginalImageListLength(product.p_image_uri.length);      \r\n            setSizeOptions(product.p_size);\r\n            addUriToFileList(product.p_image_uri, updateFileList);     //populates the file list\r\n            \r\n        } \r\n    }, [categories, product, form, pageState, newPage]);\r\n\r\n\r\n\r\n\r\n\r\n    const selectCategories = parentCategoires.map(p => {                            //Options for the categories select input\r\n        const sub_categories = childCategories\r\n            .filter(c => { return c.path === `,${p.c_name},`})\r\n            .map(c => {\r\n                return <Option key={c._id} value={c._id}>{c.c_name}</Option>\r\n            });\r\n\r\n        return <OptGroup key={p._id} label={p.c_name}>{sub_categories}</OptGroup>\r\n    });\r\n\r\n    const sizeOptionsList = sizeOptions.map((s, i) => {\r\n        return(\r\n            <div key={i}>\r\n                <span>{s}</span> \r\n                <Button type='text' danger onClick={() => {deleteSizeOption(s, sizeOptions, setSizeOptions)}}>x</Button>\r\n            </div>\r\n        );\r\n    });\r\n\r\n    \r\n        \r\n\r\n\r\n\r\n\r\n    const onFinish = newProduct => {                                                    //handles form submission\r\n        newProduct.p_size = sizeOptions;                //adding size options to the form data\r\n\r\n        if(pageState === EDIT){\r\n            newProduct.p_code = product.p_code;             //set the new form p_code and p_image_uri fields to those of the original\r\n            newProduct.p_image_uri = product.p_image_uri;   \r\n            let number_of_new_images = 0;                   //used for checking if the product has been edited\r\n         \r\n            const formData = createFormDataEdit(newProduct, product, fileList);\r\n\r\n            [...fileList].forEach(image => {   \r\n                if(!image.uid.startsWith('EST')) number_of_new_images++;          \r\n            });\r\n\r\n            if(!checkProductsEqual(newProduct, product, number_of_new_images, originalImageListLength)){\r\n                setNewPage(false);\r\n                if(productsList.length !== 0) confirmEdit(newProduct, formData, auth.access_token, updateAuth, dispatch);    //if the Store contains the products, need to update this as well as do API call                                                                                 \r\n                else confirmEdit(newProduct, formData, auth.access_token, updateAuth);    //if the Store does not contain products, just need to do API call. do not need to update store   \r\n            }\r\n        }\r\n\r\n        if(pageState === ADD){                                      //if the page is in add mode, add the product\r\n            setNewPage(false);\r\n            let formData = createFormData(newProduct, fileList);\r\n            \r\n            for(let i = 0; i < fileList.length; i++)  newProduct.p_image_uri[i] = URL.createObjectURL(fileList[i].originFileObj);\r\n           \r\n            if(productsList.length !== 0) confirmAdd(newProduct, formData, auth.access_token, updateAuth, dispatch,);       //if there are products in redux store, add product there as well\r\n            else confirmAdd(newProduct, formData, auth.access_token, updateAuth);              //else just make the request as usual\r\n        };\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            {pageState === EDIT ? <h1 id=\"ae-product-header-title\">Editing Product: {product.p_code}</h1> : <></>}\r\n            {pageState === ADD ? <h1 id=\"ae-product-header-title\">Add Product</h1> : <></>}\r\n\r\n            <Form\r\n                encType='multipart/form-data'\r\n                form = {form}\r\n                onFinish={onFinish}\r\n                onFinishFailed={err => console.log(err)}\r\n            >\r\n                <div id=\"ae-product-form-wrapper\">\r\n                    <div className=\"ae-product-form\">\r\n                        <div className=\"ae-product-input\">\r\n                            <div><i style = {{color: 'red'}}>*</i> Product Name</div> \r\n\r\n                            <Form.Item \r\n                                name=\"p_name\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please input the name of the product',\r\n                                        validateTrigger: \"onSubmit\",\r\n                                        whitespace: true\r\n                                    }\r\n                            ]}>\r\n                                <Input style ={{width:\"500px\"}}/>\r\n                            </Form.Item>\r\n                        </div>\r\n                        \r\n                        {\r\n                            pageState === ADD\r\n                            ?   <div>  \r\n                                    <div><i style = {{color: 'red'}}>*</i> Product Code</div> \r\n                                    <Form.Item \r\n                                        name=\"p_code\"\r\n                                        rules={[\r\n                                            {\r\n                                                required: true,\r\n                                                message: 'Please input the product code',\r\n                                                whitespace: true,\r\n                                                validateTrigger: \"onSubmit\",\r\n                                                \r\n                                            }\r\n                                    ]}>\r\n                                        <Input onChange={e => {removeSpaces(e, form, 'p_code')}} style ={{width:\"500px\"}}/>\r\n                                    </Form.Item>\r\n                                </div>\r\n                            :   <></>\r\n                        }\r\n\r\n                        <div><i style = {{color: 'red'}}>*</i> Units per item\r\n                            <Form.Item \r\n                                name=\"p_unit\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please add value to this field',\r\n                                        validateTrigger: \"onSubmit\",\r\n                                        whitespace: true\r\n                                    },\r\n                                    {\r\n                                        validator: async (_, p_unit) => {\r\n                                            const reg = /^\\d+?\\s\\w+?\\/\\w+$/;\r\n                                            if (!reg.test(p_unit) && p_unit !== \"\" && p_unit !== undefined){\r\n                                                return Promise.reject(new Error(\"Please user the correct formatting\"));\r\n                                            }\r\n                                        },\r\n                                        validateTrigger: \"onSubmit\"\r\n                                    }\r\n                            ]}>\r\n                                <Input placeholder=\"Valid input e.g., 10 items/box, 20 bags/container\" maxLength={30}/>\r\n                            </Form.Item>\r\n                        </div>\r\n                        \r\n                        <div style = {{ width: \"500px\", paddingTop: \"4%\"}}>  \r\n                            <Form.Item \r\n                                name=\"p_image_uri\"\r\n                                getValueFromEvent={info => { return info.fileList }}                                      //this name is subject to change\r\n                                rules={[\r\n                                    {\r\n                                        validateTrigger: 'onSubmit',\r\n                                        validator: async (_) => {\r\n                                            if (fileList.length <= 0){\r\n                                                return Promise.reject(new Error(\"You must have at least one image uploaded\"));\r\n                                            } \r\n                                        }\r\n                                    }\r\n                                ]}  \r\n                            >\r\n                                <Upload \r\n                                    fileList={fileList}\r\n                                    listType = \"picture-card\"\r\n                                    onPreview = {file => { onPreview(file, fileList, updateFileList, product, setProduct) }}\r\n                                    onChange = {info => { updateFileList([...info.fileList]) }}\r\n                                    beforeUpload = {beforeUpload}\r\n                                    onRemove = {file => {onRemove(file, fileList, updateFileList, product, setProduct)}}\r\n                                >\r\n                                    {fileList.length < 6 && '+ Drag image or click'} \r\n                                </Upload>\r\n                            </Form.Item>\r\n                        \r\n                            <div><i style = {{color: 'red'}}>*</i> Size Options</div> \r\n                            <Form.Item \r\n                                name=\"p_size\"\r\n                                rules={[\r\n                                    {\r\n\r\n                                        validator: async (_,) => {\r\n                                            if (sizeOptions.length <= 0){\r\n                                                return Promise.reject(new Error('Must have at least 1 size option'));\r\n                                            } \r\n                                        },\r\n                                        validateTrigger: \"onSubmit\",\r\n                                        message: 'Please input at least 1 size option'\r\n                                    }\r\n                            ]}>\r\n                                <Input id=\"size-option-input\" placeholder={\"Enter size options for this product\"} style ={{width:\"500px\"}}/>     \r\n                            </Form.Item>\r\n\r\n                            <Button onClick={() => {addSizeOption(sizeOptions, setSizeOptions)}}>Add</Button>\r\n\r\n                            <div style={{textAlign: 'left', paddingTop: '2%'}}>\r\n                                {sizeOptionsList}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"ae-product-form\">\r\n                        <div className=\"ae-product-input\">\r\n                            <div><i style = {{color: 'red'}}>*</i> Unit Price</div> \r\n\r\n                            <Form.Item \r\n                                name=\"p_price\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please input the price of the product',\r\n                                        validateTrigger: \"onSubmit\",\r\n                                        whitespace:true\r\n                                    },\r\n\r\n                                    {\r\n                                        validator: async (_, value) => {\r\n                                            if (isNaN(value)){\r\n                                                return Promise.reject(new Error('Please only write numbers to the second decimal place'));\r\n                                            } \r\n                                        }\r\n                                    }\r\n                            ]}>\r\n                                <Input maxLength={6} onChange={e => {onPriceChange(e, form)}}/>\r\n                            </Form.Item>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <div><i style = {{color: 'red'}}>*</i> Category</div>\r\n\r\n                            <Form.Item \r\n                                name=\"p_categories\"\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please input the product category',\r\n                                        validateTrigger: \"onSubmit\"\r\n                                    }\r\n                            ]}>\r\n                                <Select placeholder=\"Select a category\">\r\n                                    {selectCategories}\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </div>\r\n                     \r\n                        <div> Product Description\r\n                            \r\n                            <Form.Item \r\n                                name=\"p_description\"\r\n                                rules={[\r\n                                    {\r\n                                        whitespace: true,\r\n                                        message: 'No white spaces',\r\n                                        validateTrigger: \"onSubmit\"\r\n                                    }]}\r\n                            >\r\n                                <Input.TextArea style ={{width:\"500px\", height: \"125px\"}}/>\r\n                            </Form.Item>\r\n                        </div>\r\n\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" >\r\n                                <b>\r\n                                    {pageState === EDIT ? <>Edit </> : <></> }\r\n                                    {pageState === ADD ? <>Add </> : <></> }\r\n                                    Product\r\n                                </b>\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </div>\r\n                </div> \r\n            </Form>   \r\n        </div>\r\n    );\r\n}\r\n   \r\nexport default AddEditProduct;","import { Modal } from 'antd';\r\nimport { addCategory, deleteCategory } from './Functions';\r\n\r\nexport const confirmAddingCategory = (values, form, access_token, updateAuth) => {\r\n    Modal.confirm({\r\n        title: 'Adding parent category',\r\n        content: `Are you sure you want to add a category with name: [${values.categoryName}] to the database?`,\r\n        onOk() {\r\n            return addCategory(values, form, access_token, updateAuth);\r\n        }\r\n    })\r\n}\r\n\r\nexport const confirmDeleteCategory = (value, access_token, updateAuth) => {\r\n    Modal.confirm({\r\n        title: 'WARNING! Deleting category [' + value.categoryToDelete + ']!',\r\n        content: `Are you sure you want to delete the category with name: [${value.categoryToDelete}]? Deleting this category will also delete its sub-categories and any products that falls under these sub-categories. This action cannot be reversed!`,\r\n        okType: 'danger',\r\n        onOk() {\r\n            return deleteCategory(value.categoryToDelete, access_token, updateAuth);\r\n        }\r\n    })\r\n}\r\n\r\nexport const errorModal = () => {\r\n    Modal.error({\r\n      title: 'Something went wrong!',\r\n      content: 'Try refreshing page or contact support!',\r\n    });\r\n}\r\n\r\nexport const successModal = (message) => {\r\n    Modal.info({\r\n        title: 'Success!',\r\n        content: <p>{message}</p>,\r\n        onOk() {\r\n            window.location.reload();\r\n        }\r\n    });\r\n  }","import axios from 'axios';\r\nimport { _logout } from '../../../_services/SharedFunctions';\r\nimport { errorModal, successModal } from './Modals';\r\n\r\nconst addCategoryURL = 'api/categories/add-category';\r\nconst deleteCategoryURL = 'api/categories/?c_name=';\r\n\r\nexport const addCategory = (values, form, access_token, updateAuth) => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n\r\n    const newCategory = {\r\n        path: (values.categoryParentPath === 'root' ? null : values.categoryParentPath),\r\n        c_name: values.categoryName,\r\n        c_description: values.categoryDescription\r\n    }\r\n    \r\n    return axios.post(addCategoryURL, newCategory, config)\r\n    .then(res => {\r\n        if(res.data.success){\r\n            successModal(`Added parent category \"${newCategory.c_name}\" successfully.`);\r\n        }\r\n        else{\r\n            console.error(\"Sorry but the following error occured when adding new category[\" + newCategory.c_name + \"]: \")\r\n            console.error(res);\r\n            form.setFields([\r\n                {\r\n                    name: \"categoryName\",\r\n                    errors: ['Category name already taken!'],\r\n                }\r\n            ]);\r\n        }\r\n    })\r\n    .catch(err => {\r\n        console.error(err);\r\n        if(err.response.status === 401) _logout(updateAuth);\r\n        else errorModal();\r\n    })\r\n}\r\n\r\nexport const deleteCategory = (c_name, access_token, updateAuth) => {\r\n    const config = { headers:{ authorization : `Bearer ${access_token}` }};\r\n\r\n    return axios.delete(deleteCategoryURL + encodeURI(c_name), config)\r\n        .then(res => {\r\n            if (res.data.success) {\r\n                successModal(`Deleted category [${c_name}] from the database!`);\r\n            }\r\n            else {\r\n                console.error(\"Sorry but the following error occured when deleting the category[\" + c_name + \"]: \")\r\n                console.error(res);\r\n                errorModal();\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.error(err);\r\n            if(err.response.status === 401) _logout(updateAuth);\r\n            else errorModal();\r\n        });\r\n}","import { Input, Button, Form, Tree, TreeSelect} from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getAllCategories } from '../../_actions/categoryActions';\r\nimport { useEffect } from 'react';\r\nimport { confirmAddingCategory, confirmDeleteCategory } from './Helpers/Modals';\r\nimport { getCategoriesHierarchy } from '../../SharedComponents/Categories/CategoriesFunctions';\r\nimport { useAuth, useAuthUpdate } from '../../SharedComponents/AuthContext/AuthContext';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst ManageCategories = () => {\r\n    const dispatch = useDispatch();\r\n    const categories = useSelector(state => state.categoryState.categories);\r\n    const [form_add_category] = Form.useForm();\r\n    const [form_delete_category] = Form.useForm();\r\n    const updateAuth = useAuthUpdate();             //authorization data\r\n    const auth = useAuth();\r\n\r\n    const onSubmitAddCategoryForm = values => {\r\n        confirmAddingCategory(values, form_add_category, auth.access_token, updateAuth);\r\n    }\r\n    const onSubmitDeleteCategoryForm = values => {\r\n        confirmDeleteCategory(values, auth.access_token, updateAuth);\r\n    }\r\n    const createPathForCategory = (node) => {\r\n        if(node === null){\r\n            console.error(\"Invalid selection for parent node\");\r\n            return null;\r\n        }\r\n        if(node.path === null){\r\n            return \",\" + node.c_name + \",\";\r\n        } else {\r\n            if(node.value === 'root'){\r\n                return null;\r\n            } else {\r\n                return node.path + node.c_name + \",\";\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {             \r\n        if(!categories.length) dispatch(getAllCategories())\r\n    }, [categories.length, dispatch, categories]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"page-title-holder fill\">\r\n                <h2>Manage Categories</h2>\r\n            </div>\r\n            <div className=\"container flex-horizontal-box-container\">\r\n                <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-6 box-item-lg-6 box-item-xl-4 box-shadow\" id=\"manage-categories-current-panel\">\r\n                    <h3>Current Categories</h3>\r\n                    <Tree treeData={getCategoriesHierarchy(categories, false)} selectable={false}/>\r\n                </div>\r\n                <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-6 box-item-lg-6 box-item-xl-4 box-shadow\" id=\"manage-categories-add-category-panel\">\r\n                    <h3>Add Category</h3>\r\n                    <Form form={form_add_category} onFinish={onSubmitAddCategoryForm}\r\n                      initialValues={{\"categoryParentPath\": 'root'}}>\r\n                        <label htmlFor=\"categoryParentPath\">Select parent category</label>\r\n                        <Form.Item name=\"categoryParentPath\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please select a parent category!'\r\n                                }\r\n                            ]}>\r\n                            {/* Input for Category Parent - for path*/}\r\n                            <TreeSelect treeData={[{\r\n                                title: '<No Parent> Root',\r\n                                value: 'root',\r\n                                children: getCategoriesHierarchy(categories, false)\r\n                            }]} treeDefaultExpandAll placeholder=\"<No Parent> Root\" onSelect={(values, node, extra) => { form_add_category.setFieldsValue({categoryParentPath: createPathForCategory(node)}) }}/>\r\n                        </Form.Item>\r\n                        <label htmlFor=\"categoryName\">Enter category name</label>\r\n                        <Form.Item name=\"categoryName\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please input the new category\\'s name!'\r\n                                }\r\n                            ]}>\r\n                            <Input maxLength={30} placeholder=\"Type new category name here\" />\r\n                        </Form.Item>\r\n                        <label htmlFor=\"categoryDescription\">Enter category description</label>\r\n                        <Form.Item name=\"categoryDescription\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input the new category\\'s description!'\r\n                            }\r\n                        ]}>\r\n                            <TextArea rows={4} placeholder=\"Type new category description here\" style={{resize: 'none'}}/>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <div>\r\n                                <Button type=\"primary\" htmlType='submit'>Add Category</Button>\r\n                                &ensp;\r\n                                <Button type=\"secondary\" onClick={(e) => { form_add_category.setFieldsValue({ categoryParentPath: 'root', categoryName: undefined, categoryDescription: undefined }); }}>Clear Details</Button>\r\n                            </div>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n                <div className=\"box-item-xs-12 box-item-sm-12 box-item-md-12 box-item-lg-12 box-item-xl-4 box-shadow\" id=\"manage-categories-delete-category-panel\">\r\n                    <h3>Delete Category</h3>\r\n                    <Form form={form_delete_category} onFinish={onSubmitDeleteCategoryForm}>\r\n                        <label htmlFor=\"categoryToDelete\">Select category to delete</label>\r\n                        <Form.Item name=\"categoryToDelete\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please select a category!'\r\n                                }\r\n                            ]}>\r\n                            <TreeSelect treeData={getCategoriesHierarchy(categories, false)} treeDefaultExpandAll placeholder=\"Please select a category to delete\" onSelect={(values, node, extra) => { form_delete_category.setFieldsValue({ categoryToDelete: node.c_name})}}/>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType='submit'>Delete Category</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n            </div> \r\n        </>\r\n    );\r\n}\r\n\r\nexport default ManageCategories;","export const layout = {\r\n    labelCol: {\r\n      span: 8\r\n    },\r\n    wrapperCol: {\r\n      span: 12\r\n    }\r\n};\r\n\r\nexport const actionButtonsLayout = {\r\n    wrapperCol: {\r\n        span: 20\r\n    }\r\n};","import { userConstants } from '../_constants/user.constants';\r\n\r\nimport Login from '../Pages/Login/Login';\r\nimport Homepage from '../Pages/Homepage/Homepage';\r\nimport HomepageAdmin from '../Pages/HomepageAdmin/HomepageAdmin';\r\nimport EditCustomer from '../Pages/EditCustomer/EditCustomer';              //might need to change role? This should be for CUSTOMER role?\r\nimport Products from '../Pages/Products/Products';\r\nimport ProductDetails from '../Pages/Products/ProductDetails';\r\nimport DeliveryDispatch from '../Pages/DeliveryDispatch/DeliveryDispatch';\r\nimport ContactUs from '../Pages/ContactUs/ContactUs';\r\nimport TermsConditions from '../Pages/TermsConditions/TermsConditions';\r\nimport Blog from '../Pages/Blog/Blog';\r\nimport EmailRequest from '../Pages/EmailRequest/EmailRequest';\r\nimport ReenterPassword from '../Pages/ReenterPassword/ReenterPassword';\r\nimport Cart from '../Pages/Cart';\r\nimport CheckoutShipping from '../Pages/Checkout/CheckoutShipping';\r\nimport CheckoutSecurePayment from '../Pages/Checkout/CheckoutSecurePayment';\r\nimport CheckoutReviewOrder from '../Pages/Checkout/CheckoutReviewOrder';\r\nimport CheckoutOrderComplete from '../Pages/Checkout/CheckoutOrderComplete';\r\nimport PaymentCancelled from '../Pages/Checkout/PaymentCancelled';\r\nimport ManageOrdersCustomer from '../Pages/ManageOrdersCustomer/ManageOrdersCustomer';\r\nimport Order from '../Pages/Order/Order';\r\nimport CurrentOrders from '../Pages/CurrentOrders/CurrentOrders';\r\nimport ProcessedOrders from '../Pages/ProcessedOrders/ProcessedOrders';\r\nimport EditCompanyInfo from '../Pages/EditCompanyInfo/EditCompanyInfo';\r\nimport ManageProducts from '../Pages/ManageProducts/ManageProducts';\r\nimport AddEditProduct from '../Pages/AddEditProduct/AddEditProduct';\r\nimport ManageCategories from '../Pages/ManageCategories/ManageCategories';\r\nimport Signup from '../Pages/Signup/Signup';\r\n\r\n//if we dont have change password page for customer, will need to add Cutomer role to forgotpassword pages\r\n\r\nconst config =  {\r\n    routes: [\r\n        //CUSTOMER\r\n        {\r\n            component: EditCustomer,\r\n            url: '/editCustomer',\r\n            roles: [userConstants.ROLE_CUSTOMER],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ManageOrdersCustomer,\r\n            url: '/manageOrders',\r\n            roles: [userConstants.ROLE_CUSTOMER],\r\n            exact: false\r\n        },\r\n\r\n\r\n        //GUEST\r\n        {\r\n            component: EmailRequest,\r\n            url: '/emailRequest',\r\n            roles: [userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ReenterPassword,\r\n            url: '/user/reset-password-email/token/:token/email/:email',\r\n            roles: [userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: Signup,\r\n            url: '/signup',\r\n            roles: [userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n\r\n\r\n\r\n\r\n        //CUSTOMER AND GUEST\r\n        {\r\n            component: Homepage,\r\n            url: '/',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: true\r\n        },\r\n        {\r\n            component: Products,\r\n            url: '/products',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: true\r\n        },\r\n        {\r\n            component: Products,\r\n            url: '/products/:category',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ProductDetails,\r\n            url: '/productDetails',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: DeliveryDispatch,\r\n            url: '/deliveryDispatch',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ContactUs,\r\n            url: '/contactUs',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: TermsConditions,\r\n            url: '/termsConditions',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: Blog,\r\n            url: '/blog',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: Cart,\r\n            url: '/cart',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: CheckoutShipping,\r\n            url: '/checkoutShipping',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: CheckoutSecurePayment,\r\n            url: '/checkoutSecurePayment',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: CheckoutReviewOrder,\r\n            url: '/checkoutReviewOrder',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: CheckoutOrderComplete,\r\n            url: '/checkoutOrderComplete',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: PaymentCancelled,\r\n            url: '/paymentCancelled',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n        {\r\n            component: PaymentCancelled,\r\n            url: '/paymentCancelled',\r\n            roles: [userConstants.ROLE_CUSTOMER, userConstants.ROLE_GUEST],\r\n            exact: false\r\n        },\r\n\r\n\r\n\r\n\r\n        //ADMIN\r\n        {\r\n            component: HomepageAdmin,\r\n            url: '/admin',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: Order,\r\n            url: '/order',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: true\r\n        },\r\n        {\r\n            component: Order,\r\n            url: '/order/:po_number',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: true\r\n        },\r\n        {\r\n            component: Order,\r\n            url: '/order/:po_number/:status',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: CurrentOrders,\r\n            url: '/currentOrders',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ProcessedOrders,\r\n            url: '/processedOrders',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: EditCompanyInfo,\r\n            url: '/editCompanyInformation',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ManageProducts,\r\n            url: '/manageProducts',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: AddEditProduct,\r\n            url: '/editAddProducts',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: true\r\n        },\r\n        {\r\n            component: AddEditProduct,\r\n            url: '/editAddProducts/:p_code',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n        {\r\n            component: ManageCategories,\r\n            url: '/manageCategories',\r\n            roles: [userConstants.ROLE_ADMIN],\r\n            exact: false\r\n        },\r\n\r\n\r\n\r\n\r\n        //NO ROLE\r\n        {\r\n            component: Login,\r\n            url: '/login',\r\n            roles: null,\r\n            exact: false\r\n        },\r\n        {\r\n            component: Login,\r\n            url: '*',\r\n            roles: null,\r\n            exact: false\r\n        },\r\n    ]\r\n}\r\n\r\nexport default config;","import { Form, Input, Button, Tooltip } from 'antd';\r\nimport { useForm } from 'antd/lib/form/Form';\r\nimport { emailTakenModal, signupSuccess } from './Modals';\r\nimport { history } from '../../_helpers/history';\r\nimport { useState } from 'react';\r\nimport { layout, actionButtonsLayout } from './Layouts'; \r\nimport { onlyNumbers, checkPasswordStrength } from '../../_services/SharedFunctions';\r\nimport axios from 'axios';\r\n\r\nconst Signup = () => {\r\n    const [form] = useForm();\r\n    const [loading, setLoading] = useState(false);\r\n    const [tooltipVisible, setTooltipVisible] = useState(false);\r\n\r\n    const submit = v => {\r\n        console.log(v);\r\n        setLoading(true);\r\n\r\n        axios.post('api/auth/sign_up', v)\r\n        .then(() => {\r\n            setLoading(false);\r\n            signupSuccess(v.first_name);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            setLoading(false);\r\n            emailTakenModal();\r\n        })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div className=\"page-title-holder with-divider center-page\">\r\n                <h2>Sign Up</h2>\r\n            </div>\r\n            <Form className=\"container\" {...layout} form={form} onFinish={submit} onFinishFailed={e => console.log(e)}>\r\n                <Form.Item\r\n                    label=\"First Name\"\r\n                    name=\"first_name\"\r\n                    style={{color: \"#0E5F76\"}}\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Please input your first name!',\r\n                            whitespace: true\r\n                        }\r\n                    ]}\r\n                >\r\n                    <Input maxLength={30}/>\r\n                </Form.Item>\r\n        \r\n                <Form.Item\r\n                    label=\"Last Name\"\r\n                    name=\"last_name\"\r\n                    style={{color: \"#0E5F76\"}}\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Please input your last name!',\r\n                            whitespace: true\r\n                        }\r\n                    ]}\r\n                >\r\n                    <Input maxLength={30}/>\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    label=\"Email\"\r\n                    name=\"email\"\r\n                    style={{color: \"#0E5F76\"}}\r\n                    validateTrigger={['onBlur']}\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            type: 'email',\r\n                            message: 'Please input a valid email!',\r\n                            whitespace: true,\r\n                        }     \r\n                    ]}\r\n                >\r\n                    <Input maxLength={30}/>\r\n                </Form.Item>\r\n\r\n                <Form.Item \r\n                        label=\"Phone\" \r\n                        name=\"mobile\" \r\n                        style={{color: \"#0E5F76\"}}\r\n                        validateTrigger={['onBlur']}\r\n                        \r\n                        rules={[\r\n                            {\r\n                                validator: async (_, phone) => {\r\n                                    if(phone !== undefined && phone !== \"\" && phone.length < 10){\r\n                                        return Promise.reject(new Error('Phone number must be valid!'));\r\n                                    }\r\n                                },\r\n                            },\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input a valid phone number!',\r\n                                whitespace: true\r\n                            }\r\n                        ]}\r\n                    >\r\n                    <Input onChange={e => {onlyNumbers(e, form, 'phone')}} maxLength={10}/>\r\n                </Form.Item>\r\n                \r\n                <Tooltip visible={tooltipVisible} title=\"Password must contain at least 8 characters, a special character, a number and an uppercase letter\">\r\n                    <Form.Item\r\n                        label=\"Password\"\r\n                        name=\"password\"\r\n                        style={{color: \"#0E5F76\"}}\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input your password!',\r\n                                whitespace: true\r\n                            },\r\n                            {\r\n                                validator: async (_, password) => {\r\n                                    if(password !== undefined && password !== \"\" && !checkPasswordStrength(password)){\r\n                                        setTooltipVisible(true);\r\n                                        return Promise.reject(new Error('Password not strong enough'));\r\n                                    }\r\n                                },\r\n                                validateTrigger: 'onSubmit'\r\n                            }\r\n                        ]}\r\n                    >\r\n                        <Input.Password onFocus={() => {setTooltipVisible(false)}} maxLength={50}/>\r\n                    </Form.Item>\r\n                </Tooltip>\r\n\r\n                <Form.Item\r\n                    label=\"Confirm Password\"\r\n                    name=\"passwordConfirm\"\r\n                    style={{color: \"#0E5F76\"}}\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Please confirm your password!',\r\n                        },\r\n                        ({ getFieldValue }) => ({\r\n                            validator(_, value) {\r\n                                if (!value || getFieldValue('password') === value) return Promise.resolve();\r\n                                return Promise.reject(new Error('The two passwords that you entered do not match!'));\r\n                            },\r\n                            validateTrigger: 'onSubmit'\r\n                        })\r\n                    ]}\r\n                >\r\n                    <Input.Password maxLength={30}/>\r\n                </Form.Item>\r\n                <Form.Item {...actionButtonsLayout}>\r\n                    <Button style={{float: 'right'}} loading={loading} type=\"primary\" htmlType=\"submit\">Sign up</Button>\r\n                </Form.Item>\r\n                <Form.Item {...actionButtonsLayout}>\r\n                    <span style={{float: 'right'}}>Already had an account ? &nbsp; <Button type=\"link\" onClick={() => history.push('/login')}>Login</Button></span>\r\n                </Form.Item>\r\n            </Form>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Signup;","import { Modal } from 'antd';\r\nimport { history } from '../../_helpers/history';\r\n\r\nexport const emailTakenModal = () => {\r\n    Modal.confirm({\r\n        title: 'Email taken!',\r\n        content: (\r\n            <div>This email is already in our system. Please either login or use a different email addresss</div>\r\n        ),\r\n        okText: 'Login',\r\n        cancelText: 'Use another email',\r\n        onOk() {\r\n            history.push('/login');\r\n        },\r\n    });\r\n}\r\n\r\nexport const signupSuccess = name => {\r\n    Modal.success({\r\n        title: 'Signup Success!',\r\n        content: (\r\n            <div>{`Welcome to SuperFin ${name}! You will now be directed to the login screen.`}</div>\r\n        ),\r\n        okText: 'Okay',\r\n        onOk() {\r\n            history.push('/login');\r\n        },\r\n    });\r\n}","import CategoryList from './CategoryList';\r\nimport { HomepageCarousel } from './HomepageCarousel';\r\n\r\nexport default function Homepage(){    \r\n    return(\r\n        <>\r\n            <HomepageCarousel />\r\n            <div className=\"page-title-holder\">\r\n                <h2>Show by Category</h2>\r\n            </div>\r\n            <CategoryList />\r\n        </>\r\n    );\r\n}","import { Route, Redirect } from 'react-router';\r\nimport { useAuth } from '../SharedComponents/AuthContext/AuthContext'; \r\nimport { userConstants } from '../_constants/user.constants';\r\n\r\nconst PrivateRoute = ({component: Component, roles = [], ...rest}) => {\r\n    const user = useAuth();\r\n    const hasRole = roles.some(role => user.roles[0].includes(role));\r\n\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            hasRole \r\n            ? <Component {...props} /> \r\n            : user.roles[0] === userConstants.ROLE_ADMIN \r\n            ? <Redirect to='/admin'/> \r\n            : <Redirect to='/'/>\r\n        )} />\r\n    );\r\n};\r\n\r\nexport default PrivateRoute;\r\n\r\n","import { Menu } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\n\r\nexport default function FooterMenu(){\r\n\r\n      return (\r\n        <Menu className=\"footer-menubar\" mode=\"horizontal\" >\r\n            <Menu.Item key=\"Home\" className=\"item\">\r\n                <Link to=\"/\"> Home </Link>\r\n            </Menu.Item >\r\n\r\n            <Menu.Item key=\"Terms\" className=\"item\">\r\n              <Link to=\"/termsConditions\"> Terms and Conditions </Link>\r\n            </Menu.Item >\r\n\r\n            <Menu.Item key=\"Contact\" className=\"item\">\r\n              <Link to=\"/contactUs\"> Contact Us </Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n}\r\n","import { Menu } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function FooterMenuMobile(){\r\n\r\n      return (\r\n        <Menu className=\"footer-menubar-mobile\" mode=\"vertical\" >\r\n            <Menu.Item key=\"Home\" className=\"item\">\r\n                <Link to=\"/\"> Home </Link>\r\n            </Menu.Item >\r\n\r\n            <Menu.Item key=\"Terms\" className=\"item\">\r\n              <Link to=\"/termsAndConditions\"> Terms and Conditions </Link>\r\n            </Menu.Item >\r\n\r\n            <Menu.Item key=\"Contact\" className=\"item\">\r\n              <Link to=\"/contactUs\"> Contact Us </Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n  }","import { useSelector } from 'react-redux';\r\nimport FooterMenu from './FooterMenu';\r\nimport FooterMenuMobile from './FooterMenuMobile';\r\nimport { useAuth } from '../AuthContext/AuthContext';\r\nimport { userConstants } from '../../_constants/user.constants';\r\n\r\nexport default function FooterMain(){\r\n    const isLoading = useSelector(state => state.cartState.loading); // cart state\r\n    const auth = useAuth();\r\n\r\n    return (\r\n        <>\r\n            {   \r\n                auth.roles[0] === userConstants.ROLE_ADMIN\r\n                ?\r\n                    <></>\r\n                :\r\n                isLoading \r\n                ?\r\n                    <div id=\"copyright-background\">\r\n                        Copyright 2020 Sungent Packaging | All rights reserved\r\n                    </div>\r\n                :\r\n                    <>\r\n                        <FooterMenu />\r\n                        <FooterMenuMobile />\r\n                        <div id=\"copyright-background\">Copyright 2020 Sungent Packaging | All rights reserved</div>\r\n                    </>\r\n            }\r\n        </>\r\n    );\r\n}","import './App.less';\r\nimport '../_assets/CSS/style.scss'\r\nimport Navbar from '../SharedComponents/Navbar/Navbar';\r\nimport { history } from '../_helpers/history';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport config from '../_routers/config';\r\nimport PrivateRoute from '../_routers/PrivateRoute';\r\nimport AuthProvider from '../SharedComponents/AuthContext/AuthContext';\r\nimport Footer from '../SharedComponents/Footer/FooterMain';\r\n\r\nconst App = () => {\r\n    return(\r\n        <>\r\n            <AuthProvider>\r\n                <Router history = {history}>\r\n                    <div className=\"Website-Header\">\r\n                        <Navbar />\r\n                    </div>\r\n                        <div className=\"Website-Body\" >\r\n                            <Switch>\r\n                                {\r\n                                    config.routes.map(({component, url, roles, exact}) => roles === null \r\n                                        ? <Route key={url} path={url} component={component}/> \r\n                                        : exact \r\n                                        ? <PrivateRoute key={url} exact path={url} component={component} roles={roles} />\r\n                                        : <PrivateRoute key={url} path={url} component={component} roles={roles} /> \r\n                                    )\r\n                                }\r\n                            </Switch>\r\n                        </div>\r\n                    <footer className=\"Website-Footer\">\r\n                        <Footer />\r\n                    </footer>\r\n                </Router>\r\n            </AuthProvider>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { \r\n    GET_PRODUCTS, \r\n    LOADING_PRODUCTS,\r\n    DELETE_PRODUCT, \r\n    EDIT_PRODUCT, \r\n    ADD_PRODUCT, \r\n    ERROR, \r\n    DEFAULT_ORDER\r\n} from '../_constants/actionTypes.constants';\r\n\r\nconst initState = {\r\n    products: [],\r\n    isLoading: false,\r\n    error: false\r\n}\r\n\r\nconst productReducer = (state = initState, {type, payload}) => {\r\n    switch(type){\r\n        case GET_PRODUCTS:\r\n            return {\r\n                ...state,\r\n                products: payload.sort((a,b) => (a.p_code > b.p_code) ? 1 : ((b.p_code > a.p_code) ? -1 : 0)),\r\n                isLoading: false,\r\n                error: false\r\n            }\r\n        case DEFAULT_ORDER:\r\n            return {\r\n                ...state,\r\n                products: [...state.products].sort((a,b) => (a.p_code > b.p_code) ? 1 : ((b.p_code > a.p_code) ? -1 : 0))\r\n            }\r\n        case LOADING_PRODUCTS: \r\n            return {\r\n                ...state,\r\n                isLoading: payload\r\n            }\r\n        case EDIT_PRODUCT:{\r\n            const index = state.products.findIndex(p => {\r\n                return p.p_code === payload.p_code;\r\n            });\r\n            \r\n            return {\r\n                ...state,\r\n                products: [\r\n                    ...state.products.slice(0, index),\r\n                    payload,\r\n                    ...state.products.slice(index + 1)\r\n                ]\r\n            }\r\n        }\r\n        case DELETE_PRODUCT: \r\n            return {\r\n               ...state,\r\n               products: state.products.filter(p => p.p_code !== payload)\r\n            }\r\n        case ADD_PRODUCT: \r\n            return {\r\n                ...state,\r\n                products: [...state.products, payload]\r\n            }\r\n        case ERROR: \r\n            return {\r\n                ...state,\r\n                error: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default productReducer;","import { \r\n    GET_PRODUCT, \r\n    ERROR,\r\n    SET_LOADING,\r\n} from '../_constants/actionTypes.constants';\r\n\r\nconst initState = {\r\n    product: null,\r\n    isLoading: false,\r\n    error: false\r\n}\r\n\r\nconst productDetailsReducer = (state = initState, { type, payload }) => {\r\n    switch (type) {\r\n        case GET_PRODUCT:\r\n            return {\r\n                ...state,\r\n                product: payload,\r\n                isLoading: false,\r\n                error: false\r\n            }\r\n        case SET_LOADING:\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                error: false\r\n            }\r\n        case ERROR:\r\n            return {\r\n                ...state,\r\n                error: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default productDetailsReducer;","import { \r\n    GET_CATEGORIES, \r\n    GET_SUB_CATEGORIES, \r\n    LOADING_CATEGORIES, \r\n    ERROR_CATEGORIES,\r\n    EMPTY_CATEGORIES \r\n} from '../_constants/actionTypes.constants';\r\n\r\nconst initState = {\r\n    categories: [],\r\n    loading: false,\r\n    error: false,\r\n    empty: false\r\n}\r\n\r\nconst categoryReducer = (state = initState, {type, payload}) => {\r\n    switch(type){\r\n        case GET_CATEGORIES:\r\n            return {\r\n                ...state,\r\n                categories: payload,\r\n                loading: false\r\n            }\r\n        case GET_SUB_CATEGORIES:\r\n            return {\r\n                ...state,\r\n                categories: payload,\r\n                loading: false\r\n            }\r\n        case LOADING_CATEGORIES:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            }\r\n        case ERROR_CATEGORIES:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: true\r\n            }\r\n        case EMPTY_CATEGORIES: \r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                empty: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default categoryReducer;","import { \r\n    GET_COMPANY_INFO,\r\n    SET_COMPANY_INFO, \r\n    LOADING_COMPANY_INFO \r\n} from '../_constants/actionTypes.constants';\r\n\r\nconst initState = {\r\n    companyInfo: {},\r\n    loading: false,\r\n    error: false\r\n}\r\n\r\nconst companyInfoReducer = (state = initState, {type, payload}) => {\r\n    switch(type){\r\n        case GET_COMPANY_INFO:\r\n            return {\r\n                ...state,\r\n                companyInfo: payload\r\n            }\r\n        case SET_COMPANY_INFO:\r\n            return {\r\n                ...state,\r\n                companyInfo: payload\r\n            }\r\n        case LOADING_COMPANY_INFO:\r\n            return {\r\n                ...state,\r\n                loading: !state.loading\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default companyInfoReducer;","import { \r\n    GET_COMPLETE_ORDERS, \r\n    ERROR_COMPLETE_ORDERS, \r\n    LOADING_COMPLETE_ORDERS, \r\n    DELETE_COMPLETE_ORDER, \r\n    ADD_COMPLETE_ORDER, \r\n    EDIT_COMPLETE_ORDER,\r\n    EMPTY_COMPLETE_ORDER\r\n} from '../_constants/actionTypes.constants';\r\n\r\nconst initState = {\r\n    completeOrders: [],\r\n    loading: false,\r\n    error: false,\r\n    empty:false\r\n}\r\n\r\nconst completeOrdersReducer = (state = initState, {type, payload}) => {\r\n    switch(type){\r\n        case GET_COMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                completeOrders: payload.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)}),\r\n                loading: false,\r\n                error: false\r\n            }\r\n        case EMPTY_COMPLETE_ORDER:\r\n            return{\r\n                ...state,\r\n                empty: true,\r\n                loading: false\r\n            }\r\n        case ERROR_COMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                error: true,\r\n                loading: false\r\n            }\r\n        case LOADING_COMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                loading: payload\r\n            }\r\n        case DELETE_COMPLETE_ORDER:\r\n            return{\r\n                ...state,\r\n                completeOrders: state.completeOrders.filter(o => o.po_number !== payload)\r\n            }\r\n        case ADD_COMPLETE_ORDER: {\r\n            const newArray = [...state.completeOrders, payload];\r\n            newArray.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n            \r\n            return {\r\n                ...state,\r\n                completeOrders: newArray\r\n            }\r\n        }\r\n        case EDIT_COMPLETE_ORDER: {\r\n            const index = state.completeOrders.findIndex(o => {\r\n                return o.po_number === payload.po_number;\r\n            });\r\n            \r\n            return {\r\n                ...state,\r\n                completeOrders: [\r\n                    ...state.completeOrders.slice(0, index),\r\n                    payload,\r\n                    ...state.completeOrders.slice(index + 1)\r\n                ]\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default completeOrdersReducer;","import { \r\n    GET_INCOMPLETE_ORDERS,\r\n    ERROR_INCOMPLETE_ORDERS, \r\n    LOADING_INCOMPLETE_ORDERS, \r\n    DELETE_INCOMPLETE_ORDERS, \r\n    ADD_TRACKING, \r\n    ADD_INCOMPLETE_ORDER, \r\n    EDIT_INCOMPLETE_ORDER,\r\n    EMPTY_INCOMPLETE_ORDER\r\n} from '../_constants/actionTypes.constants';\r\nimport { orderStatusConstants } from '../_constants/orderStatus.constants'; \r\n\r\nconst initState = {\r\n    incompleteOrders: [],\r\n    loading: false,\r\n    error: false,\r\n    empty: false\r\n}\r\n\r\nconst incompleteOrdersReducer = (state = initState, {type, payload}) => {\r\n    switch(type){\r\n        case GET_INCOMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                incompleteOrders: payload.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)}),\r\n                loading: false,\r\n                error: false\r\n            }\r\n        case EMPTY_INCOMPLETE_ORDER: \r\n            return{\r\n                ...state,\r\n                loading: false,\r\n                empty: true\r\n            }\r\n        case ERROR_INCOMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                error: true,\r\n                loading: false\r\n            }\r\n        case LOADING_INCOMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                loading: payload\r\n            }\r\n        case DELETE_INCOMPLETE_ORDERS:\r\n            return {\r\n                ...state,\r\n                incompleteOrders: state.incompleteOrders.filter(o => o.po_number !== payload)\r\n            }\r\n        case ADD_TRACKING:{\r\n            const index = state.incompleteOrders.findIndex(o => { return o.po_number === payload.po_number });\r\n            const tempArr = state.incompleteOrders;\r\n            let tempObj = tempArr[index];\r\n            \r\n            tempObj.tracking_number = payload.tracking_number;\r\n            tempObj.carrier = payload.carrier;\r\n            tempObj.status = orderStatusConstants.SHIPPED;\r\n\r\n            return {\r\n                ...state,\r\n                incompleteOrders: [...tempArr]\r\n            }\r\n        }\r\n        case ADD_INCOMPLETE_ORDER: {\r\n            const newArray = [...state.incompleteOrders, payload];\r\n            newArray.sort((a,b) => { return new Date(b.issued_date) - new Date(a.issued_date)});\r\n\r\n            return {\r\n                ...state,\r\n                incompleteOrders: newArray\r\n            }\r\n        }\r\n        case EDIT_INCOMPLETE_ORDER: {\r\n            const index = state.incompleteOrders.findIndex(o => {\r\n                return o.po_number === payload.po_number;\r\n            });\r\n            \r\n            return {\r\n                ...state,\r\n                incompleteOrders: [\r\n                    ...state.incompleteOrders.slice(0, index),\r\n                    payload,\r\n                    ...state.incompleteOrders.slice(index + 1)\r\n                ]\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default incompleteOrdersReducer;","/*\r\n  Author: Trang Nguyen\r\n  Notes: This file contains the reducer for all cart actions.\r\n    such as add-to-cart, clear cart, etc.\r\n*/\r\n\r\nimport {\r\n  ADD_TO_CART,\r\n  SET_SHIPPING_INFO,\r\n  SET_LOADING,\r\n  SET_ERROR,\r\n  LOAD_STRIPE,\r\n  INCREASE_QUANTITY,\r\n  DECREASE_QUANTITY,\r\n  REMOVE_ITEMS,\r\n  CLEAR_CART,\r\n  UPDATE_ITEM_INFO,\r\n} from '../_constants/cart.constants'\r\n\r\n// initial state of address\r\nconst address_init = {\r\n  po_attention_to: \"\",\r\n  po_address_line1: \"\",\r\n  po_address_line2: \"\",\r\n  po_suburb: \"Sydney\",\r\n  po_state: \"NSW\",\r\n  po_postcode: 2000,\r\n}\r\n\r\n// the cart's initial state\r\nconst initialState = {\r\n  items: JSON.parse(localStorage.getItem(\"items\")) || [],// array of {item_code, price_id (for stripe), unit_price, \r\n                                                         //   quantity, special_requirements, image_uri[]}\r\n  total: 0, // order total\r\n  address: JSON.parse(localStorage.getItem(\"address\")) || address_init, // shipping address\r\n  c_email: JSON.parse(localStorage.getItem(\"email\")) || \"\", // user email         \r\n  loading: false,    // page's loading state\r\n  error: null,       // if an error is returned\r\n  stripe: null,      // stripe session id\r\n}\r\n\r\n// cart reducer that performs different actions depending on action.type\r\nconst cartReducer= (state = initialState, action)=>{\r\n    \r\n  //INSIDE PRODUCT COMPONENT\r\n  if(action.type === ADD_TO_CART){\r\n    let addedItem = action.product;\r\n    let newTotal = state.total + (addedItem.p_price * action.quantity);\r\n\r\n    // check if the action id exists in the addedItems\r\n    // or if the item exists but the special requirements are different\r\n    // by returning its index (if not exists then return -1)\r\n    const i = state.items\r\n      .findIndex(p =>\r\n        p.item_code === addedItem.p_code \r\n          && p.special_requirements === action.special_requirements\r\n          && p.p_size === action.p_size\r\n      );\r\n    \r\n    if(i !== -1) // if item's already existed\r\n    {\r\n      // update current quantity and requirements of the existing item                    \r\n      state.items[i].quantity += action.quantity;\r\n\r\n      // return the cart state with updated total and item's quantity\r\n      return{\r\n        ...state,\r\n        total: newTotal,\r\n      }\r\n    }\r\n    else{     \r\n      // return cart state with updated item list and total      \r\n      return{\r\n        ...state,\r\n        items: [...state.items, \r\n          {\r\n            item_code: addedItem.p_code,\r\n            p_size: action.p_size,\r\n            quantity: action.quantity,\r\n            special_requirements: action.special_requirements,\r\n          }\r\n        ],            \r\n        total : newTotal\r\n      }\r\n    }\r\n  }\r\n  else if(action.type === INCREASE_QUANTITY){\r\n    const i = action.index;\r\n\r\n    // update new quantity\r\n    state.items[i].quantity += 1;\r\n\r\n    // calc new total\r\n    const newTotal = state.total + state.items[i].unit_price;\r\n\r\n    return {...state, total: newTotal};\r\n  }\r\n  else if(action.type === DECREASE_QUANTITY){\r\n    const i = action.index;\r\n\r\n    // decrease the quantity by 1\r\n    state.items[i].quantity -= 1;\r\n\r\n    // calc new total\r\n    const newTotal = state.total - state.items[i].unit_price;\r\n\r\n    // remove of item list if quantity = 0\r\n    if(state.items[i].quantity === 0){\r\n      state.items.splice(i, 1);\r\n    }\r\n\r\n    return {...state, total: newTotal};\r\n  }\r\n  else if(action.type === REMOVE_ITEMS){\r\n    let newItems = state.items;\r\n    action.invalid_pcodes.forEach(invalid => {\r\n      // remove items that are in invalid_pcodes\r\n      newItems = state.items.filter(item =>\r\n        (item.item_code !== invalid.item_code && item.p_size !== invalid.p_size)\r\n      );\r\n    });  \r\n    \r\n    // calc new total\r\n    let newTotal = 0;\r\n    state.items.forEach(item => {\r\n      newTotal += item.quantity * item.unit_price;\r\n    });\r\n\r\n    return {...state, items: newItems, total: newTotal};\r\n\r\n  }\r\n  else if(action.type === CLEAR_CART){\r\n    return{\r\n      ...state,\r\n      total: 0,\r\n      items: [],\r\n      address: address_init,\r\n      c_email: \"\",\r\n    };\r\n\r\n  }\r\n  else if(action.type === UPDATE_ITEM_INFO){\r\n    // set item info for each item in cart\r\n    action.items.forEach(item => {\r\n      if(state.items){\r\n        for(let i = 0; i < state.items.length; i++){\r\n          if(state.items[i].item_code === item.p_code){\r\n            // add updated info on item\r\n            state.items[i].p_name = item.p_name;\r\n            state.items[i].price_id = item.p_price_id;\r\n            state.items[i].unit_price = item.p_price;\r\n            state.items[i].p_image_uri = item.p_image_uri[0];\r\n          }\r\n  \r\n        }\r\n      }\r\n    });\r\n\r\n    // calc new total\r\n    let newTotal = 0;\r\n    state.items.forEach(item => {\r\n      newTotal += item.quantity * item.unit_price;\r\n    });\r\n\r\n    console.log({total: newTotal})\r\n\r\n    return {...state, total: newTotal};\r\n  }\r\n  else if(action.type === SET_SHIPPING_INFO){\r\n    return { ...state, address: action.address, c_email: action.email };\r\n  }\r\n  else if(action.type === SET_LOADING){\r\n    return { ...state, loading: action.loading };\r\n  }\r\n  else if(action.type === SET_ERROR){\r\n    return {...state, error: action.error};\r\n  }\r\n  else if (action.type === LOAD_STRIPE){\r\n    return {...state, stripe: action.stripe}\r\n  }\r\n  else{\r\n    return state\r\n  }\r\n\r\n}\r\nexport default cartReducer;","import productReducer from './productReducer';\r\nimport productDetailsReducer from './productDetailsReducer';\r\nimport categoryReducer from './categoryReducer';\r\nimport companyInfoReducer from './companyInfoReducer';\r\nimport completeOrdersReducer from './completeOrdersReducer';\r\nimport incompleteOrdersReducer from './incompleteOrdersReducer';\r\nimport cartReducer from './cartReducer';\r\nimport { combineReducers } from 'redux';\r\n\r\n\r\nconst allReducers = combineReducers({\r\n    productState: productReducer,\r\n    productDetailsState: productDetailsReducer,\r\n    categoryState: categoryReducer,\r\n    companyInfoState: companyInfoReducer,\r\n    completeOrdersState: completeOrdersReducer,\r\n    incompleteOrdersState: incompleteOrdersReducer,\r\n    cartState: cartReducer,\r\n});\r\n\r\nexport default allReducers;","import thunk from 'redux-thunk';\r\nimport allReducers from '../_reducers';\r\nimport { createStore, applyMiddleware } from 'redux';\r\n\r\nexport const store = createStore(allReducers, applyMiddleware(thunk));","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App/App';\r\nimport reportWebVitals from './Misc/reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './_helpers/store';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\n\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store = {store}>\r\n    <HelmetProvider>\r\n      <App />\r\n    </HelmetProvider>\r\n  </Provider>,\r\n  document.getElementById('main')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}